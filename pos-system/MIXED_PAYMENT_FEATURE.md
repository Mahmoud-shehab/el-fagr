# ميزة الدفع المختلط (نقدي + فيزا)

## الوصف
تم إضافة ميزة الدفع المختلط التي تسمح للعميل بالدفع بطريقتين في نفس الفاتورة: جزء نقدي وجزء بالفيزا.

## التغييرات المطبقة

### 1. قاعدة البيانات
- إضافة عمودين جديدين في جدول `sales`:
  - `cash_amount`: المبلغ النقدي
  - `card_amount`: المبلغ بالفيزا
- إضافة قيمة `mixed` إلى enum `payment_method`

### 2. واجهة المستخدم (POS.tsx)
- إضافة زر "دفع مختلط (نقدي + فيزا)" أسفل أزرار الدفع الأخرى
- عند الضغط على الزر، يظهر قسم لإدخال:
  - المبلغ النقدي
  - المبلغ بالفيزا
- الحساب التلقائي: عند إدخال أحد المبلغين، يتم حساب الآخر تلقائياً
- التحقق من الصحة: يجب أن يساوي مجموع المبلغين الإجمالي الكلي
- رسالة تأكيد بصرية (✓ المبلغ صحيح) عند التطابق

### 3. حفظ البيانات
- عند اختيار الدفع المختلط، يتم حفظ:
  - `payment_method = 'mixed'`
  - `cash_amount`: المبلغ النقدي المدخل
  - `card_amount`: المبلغ بالفيزا المدخل
- التحقق من صحة المبالغ قبل الحفظ

### 4. طباعة الفاتورة (InvoicePrint.tsx)
- عند طباعة فاتورة بدفع مختلط، يظهر:
  - طريقة الدفع: "مختلط (نقدي + فيزا)"
  - تفصيل المبالغ:
    - • نقدي: XXX ج.م
    - • فيزا: XXX ج.م

## كيفية الاستخدام

1. أضف المنتجات إلى السلة كالمعتاد
2. اضغط على زر "دفع مختلط (نقدي + فيزا)"
3. أدخل المبلغ النقدي أو المبلغ بالفيزا (سيتم حساب الآخر تلقائياً)
4. تأكد من ظهور رسالة "✓ المبلغ صحيح"
5. اضغط على "تأكيد الدفع المختلط"
6. سيتم حفظ الفاتورة وطباعتها مع تفاصيل الدفع

## مثال
- إجمالي الفاتورة: 1000 ج.م
- المبلغ النقدي: 600 ج.م
- المبلغ بالفيزا: 400 ج.م
- المجموع: 1000 ج.م ✓

## الملفات المعدلة
- `pos-system/src/pages/POS.tsx`
- `pos-system/src/components/InvoicePrint.tsx`
- `pos-system/migrations/add_mixed_payment_to_sales.sql`
