var nh=e=>{throw TypeError(e)};var Mo=(e,t,s)=>t.has(e)||nh("Cannot "+s);var E=(e,t,s)=>(Mo(e,t,"read from private field"),s?s.call(e):t.get(e)),ae=(e,t,s)=>t.has(e)?nh("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),Y=(e,t,s,n)=>(Mo(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),xe=(e,t,s)=>(Mo(e,t,"access private method"),s);var Qi=(e,t,s,n)=>({set _(a){Y(e,t,a,s)},get _(){return E(e,t,n)}});function Xg(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var Zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ef={exports:{}},ho={},Pf={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ui=Symbol.for("react.element"),ey=Symbol.for("react.portal"),ty=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),ry=Symbol.for("react.profiler"),ny=Symbol.for("react.provider"),ay=Symbol.for("react.context"),iy=Symbol.for("react.forward_ref"),ly=Symbol.for("react.suspense"),oy=Symbol.for("react.memo"),cy=Symbol.for("react.lazy"),ah=Symbol.iterator;function uy(e){return e===null||typeof e!="object"?null:(e=ah&&e[ah]||e["@@iterator"],typeof e=="function"?e:null)}var Tf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rf=Object.assign,Of={};function _a(e,t,s){this.props=e,this.context=t,this.refs=Of,this.updater=s||Tf}_a.prototype.isReactComponent={};_a.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Af(){}Af.prototype=_a.prototype;function Hu(e,t,s){this.props=e,this.context=t,this.refs=Of,this.updater=s||Tf}var Qu=Hu.prototype=new Af;Qu.constructor=Hu;Rf(Qu,_a.prototype);Qu.isPureReactComponent=!0;var ih=Array.isArray,If=Object.prototype.hasOwnProperty,Gu={current:null},$f={key:!0,ref:!0,__self:!0,__source:!0};function qf(e,t,s){var n,a={},i=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)If.call(t,n)&&!$f.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=s;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:Ui,type:e,key:i,ref:l,props:a,_owner:Gu.current}}function dy(e,t){return{$$typeof:Ui,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ju(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ui}function hy(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var lh=/\/+/g;function Lo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hy(""+e.key):t.toString(36)}function vl(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ui:case ey:l=!0}}if(l)return l=e,a=a(l),e=n===""?"."+Lo(l,0):n,ih(a)?(s="",e!=null&&(s=e.replace(lh,"$&/")+"/"),vl(a,t,s,"",function(u){return u})):a!=null&&(Ju(a)&&(a=dy(a,s+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(lh,"$&/")+"/")+e)),t.push(a)),1;if(l=0,n=n===""?".":n+":",ih(e))for(var o=0;o<e.length;o++){i=e[o];var c=n+Lo(i,o);l+=vl(i,t,s,c,a)}else if(c=uy(e),typeof c=="function")for(e=c.call(e),o=0;!(i=e.next()).done;)i=i.value,c=n+Lo(i,o++),l+=vl(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Gi(e,t,s){if(e==null)return e;var n=[],a=0;return vl(e,n,"","",function(i){return t.call(s,i,a++)}),n}function my(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var St={current:null},jl={transition:null},fy={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:jl,ReactCurrentOwner:Gu};function Mf(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Gi,forEach:function(e,t,s){Gi(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Gi(e,function(){t++}),t},toArray:function(e){return Gi(e,function(t){return t})||[]},only:function(e){if(!Ju(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ye.Component=_a;ye.Fragment=ty;ye.Profiler=ry;ye.PureComponent=Hu;ye.StrictMode=sy;ye.Suspense=ly;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fy;ye.act=Mf;ye.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Rf({},e.props),a=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Gu.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)If.call(t,c)&&!$f.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ui,type:e.type,key:a,ref:i,props:n,_owner:l}};ye.createContext=function(e){return e={$$typeof:ay,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ny,_context:e},e.Consumer=e};ye.createElement=qf;ye.createFactory=function(e){var t=qf.bind(null,e);return t.type=e,t};ye.createRef=function(){return{current:null}};ye.forwardRef=function(e){return{$$typeof:iy,render:e}};ye.isValidElement=Ju;ye.lazy=function(e){return{$$typeof:cy,_payload:{_status:-1,_result:e},_init:my}};ye.memo=function(e,t){return{$$typeof:oy,type:e,compare:t===void 0?null:t}};ye.startTransition=function(e){var t=jl.transition;jl.transition={};try{e()}finally{jl.transition=t}};ye.unstable_act=Mf;ye.useCallback=function(e,t){return St.current.useCallback(e,t)};ye.useContext=function(e){return St.current.useContext(e)};ye.useDebugValue=function(){};ye.useDeferredValue=function(e){return St.current.useDeferredValue(e)};ye.useEffect=function(e,t){return St.current.useEffect(e,t)};ye.useId=function(){return St.current.useId()};ye.useImperativeHandle=function(e,t,s){return St.current.useImperativeHandle(e,t,s)};ye.useInsertionEffect=function(e,t){return St.current.useInsertionEffect(e,t)};ye.useLayoutEffect=function(e,t){return St.current.useLayoutEffect(e,t)};ye.useMemo=function(e,t){return St.current.useMemo(e,t)};ye.useReducer=function(e,t,s){return St.current.useReducer(e,t,s)};ye.useRef=function(e){return St.current.useRef(e)};ye.useState=function(e){return St.current.useState(e)};ye.useSyncExternalStore=function(e,t,s){return St.current.useSyncExternalStore(e,t,s)};ye.useTransition=function(){return St.current.useTransition()};ye.version="18.3.1";Pf.exports=ye;var C=Pf.exports;const ns=Cf(C),Lf=Xg({__proto__:null,default:ns},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py=C,xy=Symbol.for("react.element"),gy=Symbol.for("react.fragment"),yy=Object.prototype.hasOwnProperty,vy=py.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jy={key:!0,ref:!0,__self:!0,__source:!0};function Df(e,t,s){var n,a={},i=null,l=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)yy.call(t,n)&&!jy.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:xy,type:e,key:i,ref:l,props:a,_owner:vy.current}}ho.Fragment=gy;ho.jsx=Df;ho.jsxs=Df;Ef.exports=ho;var r=Ef.exports,bc={},Ff={exports:{}},Vt={},Uf={exports:{}},zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,G){var Z=V.length;V.push(G);e:for(;0<Z;){var $=Z-1>>>1,b=V[$];if(0<a(b,G))V[$]=G,V[Z]=b,Z=$;else break e}}function s(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var G=V[0],Z=V.pop();if(Z!==G){V[0]=Z;e:for(var $=0,b=V.length,P=b>>>1;$<P;){var q=2*($+1)-1,H=V[q],K=q+1,ce=V[K];if(0>a(H,Z))K<b&&0>a(ce,H)?(V[$]=ce,V[K]=Z,$=K):(V[$]=H,V[q]=Z,$=q);else if(K<b&&0>a(ce,Z))V[$]=ce,V[K]=Z,$=K;else break e}}return G}function a(V,G){var Z=V.sortIndex-G.sortIndex;return Z!==0?Z:V.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,f=null,h=3,v=!1,g=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(V){for(var G=s(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=V)n(u),G.sortIndex=G.expirationTime,t(c,G);else break;G=s(u)}}function j(V){if(w=!1,y(V),!g)if(s(c)!==null)g=!0,he(k);else{var G=s(u);G!==null&&me(j,G.startTime-V)}}function k(V,G){g=!1,w&&(w=!1,p(x),x=-1),v=!0;var Z=h;try{for(y(G),f=s(c);f!==null&&(!(f.expirationTime>G)||V&&!z());){var $=f.callback;if(typeof $=="function"){f.callback=null,h=f.priorityLevel;var b=$(f.expirationTime<=G);G=e.unstable_now(),typeof b=="function"?f.callback=b:f===s(c)&&n(c),y(G)}else n(c);f=s(c)}if(f!==null)var P=!0;else{var q=s(u);q!==null&&me(j,q.startTime-G),P=!1}return P}finally{f=null,h=Z,v=!1}}var N=!1,R=null,x=-1,I=5,T=-1;function z(){return!(e.unstable_now()-T<I)}function W(){if(R!==null){var V=e.unstable_now();T=V;var G=!0;try{G=R(!0,V)}finally{G?X():(N=!1,R=null)}}else N=!1}var X;if(typeof m=="function")X=function(){m(W)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=W,X=function(){re.postMessage(null)}}else X=function(){_(W,0)};function he(V){R=V,N||(N=!0,X())}function me(V,G){x=_(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){g||v||(g=!0,he(k))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var Z=h;h=G;try{return V()}finally{h=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Z=h;h=V;try{return G()}finally{h=Z}},e.unstable_scheduleCallback=function(V,G,Z){var $=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?$+Z:$):Z=$,V){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=Z+b,V={id:d++,callback:G,priorityLevel:V,startTime:Z,expirationTime:b,sortIndex:-1},Z>$?(V.sortIndex=Z,t(u,V),s(c)===null&&V===s(u)&&(w?(p(x),x=-1):w=!0,me(j,Z-$))):(V.sortIndex=b,t(c,V),g||v||(g=!0,he(k))),V},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(V){var G=h;return function(){var Z=h;h=G;try{return V.apply(this,arguments)}finally{h=Z}}}})(zf);Uf.exports=zf;var wy=Uf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y=C,Wt=wy;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bf=new Set,ai={};function gn(e,t){ma(e,t),ma(e+"Capture",t)}function ma(e,t){for(ai[e]=t,e=0;e<t.length;e++)Bf.add(t[e])}var Ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nc=Object.prototype.hasOwnProperty,by=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oh={},ch={};function Ny(e){return Nc.call(ch,e)?!0:Nc.call(oh,e)?!1:by.test(e)?ch[e]=!0:(oh[e]=!0,!1)}function ky(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Sy(e,t,s,n){if(t===null||typeof t>"u"||ky(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ct(e,t,s,n,a,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){mt[e]=new Ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];mt[t]=new Ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){mt[e]=new Ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){mt[e]=new Ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){mt[e]=new Ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){mt[e]=new Ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){mt[e]=new Ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){mt[e]=new Ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){mt[e]=new Ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yu=/[\-:]([a-z])/g;function Xu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yu,Xu);mt[t]=new Ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yu,Xu);mt[t]=new Ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yu,Xu);mt[t]=new Ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){mt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){mt[e]=new Ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zu(e,t,s,n){var a=mt.hasOwnProperty(t)?mt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Sy(t,s,a,n)&&(s=null),n||a===null?Ny(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Qs=_y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ji=Symbol.for("react.element"),An=Symbol.for("react.portal"),In=Symbol.for("react.fragment"),ed=Symbol.for("react.strict_mode"),kc=Symbol.for("react.profiler"),Kf=Symbol.for("react.provider"),Wf=Symbol.for("react.context"),td=Symbol.for("react.forward_ref"),Sc=Symbol.for("react.suspense"),Cc=Symbol.for("react.suspense_list"),sd=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Vf=Symbol.for("react.offscreen"),uh=Symbol.iterator;function Ta(e){return e===null||typeof e!="object"?null:(e=uh&&e[uh]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Do;function Fa(e){if(Do===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Do=t&&t[1]||""}return`
`+Do+e}var Fo=!1;function Uo(e,t){if(!e||Fo)return"";Fo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),l=a.length-1,o=i.length-1;1<=l&&0<=o&&a[l]!==i[o];)o--;for(;1<=l&&0<=o;l--,o--)if(a[l]!==i[o]){if(l!==1||o!==1)do if(l--,o--,0>o||a[l]!==i[o]){var c=`
`+a[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=o);break}}}finally{Fo=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Fa(e):""}function Cy(e){switch(e.tag){case 5:return Fa(e.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return e=Uo(e.type,!1),e;case 11:return e=Uo(e.type.render,!1),e;case 1:return e=Uo(e.type,!0),e;default:return""}}function Ec(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case In:return"Fragment";case An:return"Portal";case kc:return"Profiler";case ed:return"StrictMode";case Sc:return"Suspense";case Cc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wf:return(e.displayName||"Context")+".Consumer";case Kf:return(e._context.displayName||"Context")+".Provider";case td:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sd:return t=e.displayName||null,t!==null?t:Ec(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return Ec(e(t))}catch{}}return null}function Ey(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ec(t);case 8:return t===ed?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Tr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Py(e){var t=Hf(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){n=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yi(e){e._valueTracker||(e._valueTracker=Py(e))}function Qf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=Hf(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Ol(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pc(e,t){var s=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function dh(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=Tr(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gf(e,t){t=t.checked,t!=null&&Zu(e,"checked",t,!1)}function Tc(e,t){Gf(e,t);var s=Tr(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rc(e,t.type,s):t.hasOwnProperty("defaultValue")&&Rc(e,t.type,Tr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hh(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Rc(e,t,s){(t!=="number"||Ol(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ua=Array.isArray;function Vn(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+Tr(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Oc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mh(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(Q(92));if(Ua(s)){if(1<s.length)throw Error(Q(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Tr(s)}}function Jf(e,t){var s=Tr(t.value),n=Tr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function fh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Yf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ac(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Yf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Xi,Xf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Xi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ii(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Qa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ty=["Webkit","ms","Moz","O"];Object.keys(Qa).forEach(function(e){Ty.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qa[t]=Qa[e]})});function Zf(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Qa.hasOwnProperty(e)&&Qa[e]?(""+t).trim():t+"px"}function ep(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Zf(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var Ry=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(e,t){if(t){if(Ry[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function $c(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=null;function rd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mc=null,Hn=null,Qn=null;function ph(e){if(e=Ki(e)){if(typeof Mc!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=go(t),Mc(e.stateNode,e.type,t))}}function tp(e){Hn?Qn?Qn.push(e):Qn=[e]:Hn=e}function sp(){if(Hn){var e=Hn,t=Qn;if(Qn=Hn=null,ph(e),t)for(e=0;e<t.length;e++)ph(t[e])}}function rp(e,t){return e(t)}function np(){}var zo=!1;function ap(e,t,s){if(zo)return e(t,s);zo=!0;try{return rp(e,t,s)}finally{zo=!1,(Hn!==null||Qn!==null)&&(np(),sp())}}function li(e,t){var s=e.stateNode;if(s===null)return null;var n=go(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(Q(231,t,typeof s));return s}var Lc=!1;if(Ks)try{var Ra={};Object.defineProperty(Ra,"passive",{get:function(){Lc=!0}}),window.addEventListener("test",Ra,Ra),window.removeEventListener("test",Ra,Ra)}catch{Lc=!1}function Oy(e,t,s,n,a,i,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(s,u)}catch(d){this.onError(d)}}var Ga=!1,Al=null,Il=!1,Dc=null,Ay={onError:function(e){Ga=!0,Al=e}};function Iy(e,t,s,n,a,i,l,o,c){Ga=!1,Al=null,Oy.apply(Ay,arguments)}function $y(e,t,s,n,a,i,l,o,c){if(Iy.apply(this,arguments),Ga){if(Ga){var u=Al;Ga=!1,Al=null}else throw Error(Q(198));Il||(Il=!0,Dc=u)}}function yn(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function ip(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xh(e){if(yn(e)!==e)throw Error(Q(188))}function qy(e){var t=e.alternate;if(!t){if(t=yn(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return xh(a),e;if(i===n)return xh(a),t;i=i.sibling}throw Error(Q(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(Q(189))}}if(s.alternate!==n)throw Error(Q(190))}if(s.tag!==3)throw Error(Q(188));return s.stateNode.current===s?e:t}function lp(e){return e=qy(e),e!==null?op(e):null}function op(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=op(e);if(t!==null)return t;e=e.sibling}return null}var cp=Wt.unstable_scheduleCallback,gh=Wt.unstable_cancelCallback,My=Wt.unstable_shouldYield,Ly=Wt.unstable_requestPaint,He=Wt.unstable_now,Dy=Wt.unstable_getCurrentPriorityLevel,nd=Wt.unstable_ImmediatePriority,up=Wt.unstable_UserBlockingPriority,$l=Wt.unstable_NormalPriority,Fy=Wt.unstable_LowPriority,dp=Wt.unstable_IdlePriority,mo=null,Cs=null;function Uy(e){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(mo,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:Ky,zy=Math.log,By=Math.LN2;function Ky(e){return e>>>=0,e===0?32:31-(zy(e)/By|0)|0}var Zi=64,el=4194304;function za(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ql(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,l=s&268435455;if(l!==0){var o=l&~a;o!==0?n=za(o):(i&=l,i!==0&&(n=za(i)))}else l=s&~a,l!==0?n=za(l):i!==0&&(n=za(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-xs(t),a=1<<s,n|=e[s],t&=~a;return n}function Wy(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vy(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-xs(i),o=1<<l,c=a[l];c===-1?(!(o&s)||o&n)&&(a[l]=Wy(o,t)):c<=t&&(e.expiredLanes|=o),i&=~o}}function Fc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hp(){var e=Zi;return Zi<<=1,!(Zi&4194240)&&(Zi=64),e}function Bo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function zi(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xs(t),e[t]=s}function Hy(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-xs(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function ad(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-xs(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var Ee=0;function mp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fp,id,pp,xp,gp,Uc=!1,tl=[],jr=null,wr=null,_r=null,oi=new Map,ci=new Map,ar=[],Qy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":jr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function Oa(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Ki(t),t!==null&&id(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Gy(e,t,s,n,a){switch(t){case"focusin":return jr=Oa(jr,e,t,s,n,a),!0;case"dragenter":return wr=Oa(wr,e,t,s,n,a),!0;case"mouseover":return _r=Oa(_r,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return oi.set(i,Oa(oi.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,ci.set(i,Oa(ci.get(i)||null,e,t,s,n,a)),!0}return!1}function yp(e){var t=Hr(e.target);if(t!==null){var s=yn(t);if(s!==null){if(t=s.tag,t===13){if(t=ip(s),t!==null){e.blockedOn=t,gp(e.priority,function(){pp(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=zc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);qc=n,s.target.dispatchEvent(n),qc=null}else return t=Ki(s),t!==null&&id(t),e.blockedOn=s,!1;t.shift()}return!0}function vh(e,t,s){wl(e)&&s.delete(t)}function Jy(){Uc=!1,jr!==null&&wl(jr)&&(jr=null),wr!==null&&wl(wr)&&(wr=null),_r!==null&&wl(_r)&&(_r=null),oi.forEach(vh),ci.forEach(vh)}function Aa(e,t){e.blockedOn===t&&(e.blockedOn=null,Uc||(Uc=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Jy)))}function ui(e){function t(a){return Aa(a,e)}if(0<tl.length){Aa(tl[0],e);for(var s=1;s<tl.length;s++){var n=tl[s];n.blockedOn===e&&(n.blockedOn=null)}}for(jr!==null&&Aa(jr,e),wr!==null&&Aa(wr,e),_r!==null&&Aa(_r,e),oi.forEach(t),ci.forEach(t),s=0;s<ar.length;s++)n=ar[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<ar.length&&(s=ar[0],s.blockedOn===null);)yp(s),s.blockedOn===null&&ar.shift()}var Gn=Qs.ReactCurrentBatchConfig,Ml=!0;function Yy(e,t,s,n){var a=Ee,i=Gn.transition;Gn.transition=null;try{Ee=1,ld(e,t,s,n)}finally{Ee=a,Gn.transition=i}}function Xy(e,t,s,n){var a=Ee,i=Gn.transition;Gn.transition=null;try{Ee=4,ld(e,t,s,n)}finally{Ee=a,Gn.transition=i}}function ld(e,t,s,n){if(Ml){var a=zc(e,t,s,n);if(a===null)Zo(e,t,n,Ll,s),yh(e,n);else if(Gy(a,e,t,s,n))n.stopPropagation();else if(yh(e,n),t&4&&-1<Qy.indexOf(e)){for(;a!==null;){var i=Ki(a);if(i!==null&&fp(i),i=zc(e,t,s,n),i===null&&Zo(e,t,n,Ll,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else Zo(e,t,n,null,s)}}var Ll=null;function zc(e,t,s,n){if(Ll=null,e=rd(n),e=Hr(e),e!==null)if(t=yn(e),t===null)e=null;else if(s=t.tag,s===13){if(e=ip(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ll=e,null}function vp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dy()){case nd:return 1;case up:return 4;case $l:case Fy:return 16;case dp:return 536870912;default:return 16}default:return 16}}var gr=null,od=null,_l=null;function jp(){if(_l)return _l;var e,t=od,s=t.length,n,a="value"in gr?gr.value:gr.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var l=s-e;for(n=1;n<=l&&t[s-n]===a[i-n];n++);return _l=a.slice(e,1<n?1-n:void 0)}function bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function jh(){return!1}function Ht(e){function t(s,n,a,i,l){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(s=e[o],this[o]=s?s(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sl:jh,this.isPropagationStopped=jh,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cd=Ht(ba),Bi=De({},ba,{view:0,detail:0}),Zy=Ht(Bi),Ko,Wo,Ia,fo=De({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ia&&(Ia&&e.type==="mousemove"?(Ko=e.screenX-Ia.screenX,Wo=e.screenY-Ia.screenY):Wo=Ko=0,Ia=e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Wo}}),wh=Ht(fo),ev=De({},fo,{dataTransfer:0}),tv=Ht(ev),sv=De({},Bi,{relatedTarget:0}),Vo=Ht(sv),rv=De({},ba,{animationName:0,elapsedTime:0,pseudoElement:0}),nv=Ht(rv),av=De({},ba,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iv=Ht(av),lv=De({},ba,{data:0}),_h=Ht(lv),ov={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uv[e])?!!t[e]:!1}function ud(){return dv}var hv=De({},Bi,{key:function(e){if(e.key){var t=ov[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(e){return e.type==="keypress"?bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mv=Ht(hv),fv=De({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bh=Ht(fv),pv=De({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),xv=Ht(pv),gv=De({},ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),yv=Ht(gv),vv=De({},fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jv=Ht(vv),wv=[9,13,27,32],dd=Ks&&"CompositionEvent"in window,Ja=null;Ks&&"documentMode"in document&&(Ja=document.documentMode);var _v=Ks&&"TextEvent"in window&&!Ja,wp=Ks&&(!dd||Ja&&8<Ja&&11>=Ja),Nh=" ",kh=!1;function _p(e,t){switch(e){case"keyup":return wv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function bv(e,t){switch(e){case"compositionend":return bp(t);case"keypress":return t.which!==32?null:(kh=!0,Nh);case"textInput":return e=t.data,e===Nh&&kh?null:e;default:return null}}function Nv(e,t){if($n)return e==="compositionend"||!dd&&_p(e,t)?(e=jp(),_l=od=gr=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wp&&t.locale!=="ko"?null:t.data;default:return null}}var kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kv[e.type]:t==="textarea"}function Np(e,t,s,n){tp(n),t=Dl(t,"onChange"),0<t.length&&(s=new cd("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Ya=null,di=null;function Sv(e){$p(e,0)}function po(e){var t=Ln(e);if(Qf(t))return e}function Cv(e,t){if(e==="change")return t}var kp=!1;if(Ks){var Ho;if(Ks){var Qo="oninput"in document;if(!Qo){var Ch=document.createElement("div");Ch.setAttribute("oninput","return;"),Qo=typeof Ch.oninput=="function"}Ho=Qo}else Ho=!1;kp=Ho&&(!document.documentMode||9<document.documentMode)}function Eh(){Ya&&(Ya.detachEvent("onpropertychange",Sp),di=Ya=null)}function Sp(e){if(e.propertyName==="value"&&po(di)){var t=[];Np(t,di,e,rd(e)),ap(Sv,t)}}function Ev(e,t,s){e==="focusin"?(Eh(),Ya=t,di=s,Ya.attachEvent("onpropertychange",Sp)):e==="focusout"&&Eh()}function Pv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return po(di)}function Tv(e,t){if(e==="click")return po(t)}function Rv(e,t){if(e==="input"||e==="change")return po(t)}function Ov(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vs=typeof Object.is=="function"?Object.is:Ov;function hi(e,t){if(vs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Nc.call(t,a)||!vs(e[a],t[a]))return!1}return!0}function Ph(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Th(e,t){var s=Ph(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ph(s)}}function Cp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ep(){for(var e=window,t=Ol();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Ol(e.document)}return t}function hd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Av(e){var t=Ep(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Cp(s.ownerDocument.documentElement,s)){if(n!==null&&hd(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Th(s,i);var l=Th(s,n);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Iv=Ks&&"documentMode"in document&&11>=document.documentMode,qn=null,Bc=null,Xa=null,Kc=!1;function Rh(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Kc||qn==null||qn!==Ol(n)||(n=qn,"selectionStart"in n&&hd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xa&&hi(Xa,n)||(Xa=n,n=Dl(Bc,"onSelect"),0<n.length&&(t=new cd("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=qn)))}function rl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Mn={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Go={},Pp={};Ks&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);function xo(e){if(Go[e])return Go[e];if(!Mn[e])return e;var t=Mn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Pp)return Go[e]=t[s];return e}var Tp=xo("animationend"),Rp=xo("animationiteration"),Op=xo("animationstart"),Ap=xo("transitionend"),Ip=new Map,Oh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Ip.set(e,t),gn(t,[e])}for(var Jo=0;Jo<Oh.length;Jo++){var Yo=Oh[Jo],$v=Yo.toLowerCase(),qv=Yo[0].toUpperCase()+Yo.slice(1);Ir($v,"on"+qv)}Ir(Tp,"onAnimationEnd");Ir(Rp,"onAnimationIteration");Ir(Op,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(Ap,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gn("onBeforeInput",["compositionend","keypress","textInput","paste"]);gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ba));function Ah(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,$y(n,t,void 0,e),e.currentTarget=null}function $p(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var l=n.length-1;0<=l;l--){var o=n[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==i&&a.isPropagationStopped())break e;Ah(a,o,u),i=c}else for(l=0;l<n.length;l++){if(o=n[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==i&&a.isPropagationStopped())break e;Ah(a,o,u),i=c}}}if(Il)throw e=Dc,Il=!1,Dc=null,e}function Ae(e,t){var s=t[Gc];s===void 0&&(s=t[Gc]=new Set);var n=e+"__bubble";s.has(n)||(qp(t,e,2,!1),s.add(n))}function Xo(e,t,s){var n=0;t&&(n|=4),qp(s,e,n,t)}var nl="_reactListening"+Math.random().toString(36).slice(2);function mi(e){if(!e[nl]){e[nl]=!0,Bf.forEach(function(s){s!=="selectionchange"&&(Mv.has(s)||Xo(s,!1,e),Xo(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nl]||(t[nl]=!0,Xo("selectionchange",!1,t))}}function qp(e,t,s,n){switch(vp(t)){case 1:var a=Yy;break;case 4:a=Xy;break;default:a=ld}s=a.bind(null,t,s,e),a=void 0,!Lc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Zo(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var l=n.tag;if(l===3||l===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(l===4)for(l=n.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;l=l.return}for(;o!==null;){if(l=Hr(o),l===null)return;if(c=l.tag,c===5||c===6){n=i=l;continue e}o=o.parentNode}}n=n.return}ap(function(){var u=i,d=rd(s),f=[];e:{var h=Ip.get(e);if(h!==void 0){var v=cd,g=e;switch(e){case"keypress":if(bl(s)===0)break e;case"keydown":case"keyup":v=mv;break;case"focusin":g="focus",v=Vo;break;case"focusout":g="blur",v=Vo;break;case"beforeblur":case"afterblur":v=Vo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xv;break;case Tp:case Rp:case Op:v=nv;break;case Ap:v=yv;break;case"scroll":v=Zy;break;case"wheel":v=jv;break;case"copy":case"cut":case"paste":v=iv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=bh}var w=(t&4)!==0,_=!w&&e==="scroll",p=w?h!==null?h+"Capture":null:h;w=[];for(var m=u,y;m!==null;){y=m;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,p!==null&&(j=li(m,p),j!=null&&w.push(fi(m,j,y)))),_)break;m=m.return}0<w.length&&(h=new v(h,g,null,s,d),f.push({event:h,listeners:w}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&s!==qc&&(g=s.relatedTarget||s.fromElement)&&(Hr(g)||g[Ws]))break e;if((v||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,v?(g=s.relatedTarget||s.toElement,v=u,g=g?Hr(g):null,g!==null&&(_=yn(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=u),v!==g)){if(w=wh,j="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=bh,j="onPointerLeave",p="onPointerEnter",m="pointer"),_=v==null?h:Ln(v),y=g==null?h:Ln(g),h=new w(j,m+"leave",v,s,d),h.target=_,h.relatedTarget=y,j=null,Hr(d)===u&&(w=new w(p,m+"enter",g,s,d),w.target=y,w.relatedTarget=_,j=w),_=j,v&&g)t:{for(w=v,p=g,m=0,y=w;y;y=wn(y))m++;for(y=0,j=p;j;j=wn(j))y++;for(;0<m-y;)w=wn(w),m--;for(;0<y-m;)p=wn(p),y--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=wn(w),p=wn(p)}w=null}else w=null;v!==null&&Ih(f,h,v,w,!1),g!==null&&_!==null&&Ih(f,_,g,w,!0)}}e:{if(h=u?Ln(u):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var k=Cv;else if(Sh(h))if(kp)k=Rv;else{k=Pv;var N=Ev}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Tv);if(k&&(k=k(e,u))){Np(f,k,s,d);break e}N&&N(e,h,u),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&Rc(h,"number",h.value)}switch(N=u?Ln(u):window,e){case"focusin":(Sh(N)||N.contentEditable==="true")&&(qn=N,Bc=u,Xa=null);break;case"focusout":Xa=Bc=qn=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Rh(f,s,d);break;case"selectionchange":if(Iv)break;case"keydown":case"keyup":Rh(f,s,d)}var R;if(dd)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else $n?_p(e,s)&&(x="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(x="onCompositionStart");x&&(wp&&s.locale!=="ko"&&($n||x!=="onCompositionStart"?x==="onCompositionEnd"&&$n&&(R=jp()):(gr=d,od="value"in gr?gr.value:gr.textContent,$n=!0)),N=Dl(u,x),0<N.length&&(x=new _h(x,e,null,s,d),f.push({event:x,listeners:N}),R?x.data=R:(R=bp(s),R!==null&&(x.data=R)))),(R=_v?bv(e,s):Nv(e,s))&&(u=Dl(u,"onBeforeInput"),0<u.length&&(d=new _h("onBeforeInput","beforeinput",null,s,d),f.push({event:d,listeners:u}),d.data=R))}$p(f,t)})}function fi(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Dl(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=li(e,s),i!=null&&n.unshift(fi(e,i,a)),i=li(e,t),i!=null&&n.push(fi(e,i,a))),e=e.return}return n}function wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ih(e,t,s,n,a){for(var i=t._reactName,l=[];s!==null&&s!==n;){var o=s,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,a?(c=li(s,i),c!=null&&l.unshift(fi(s,c,o))):a||(c=li(s,i),c!=null&&l.push(fi(s,c,o)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var Lv=/\r\n?/g,Dv=/\u0000|\uFFFD/g;function $h(e){return(typeof e=="string"?e:""+e).replace(Lv,`
`).replace(Dv,"")}function al(e,t,s){if(t=$h(t),$h(e)!==t&&s)throw Error(Q(425))}function Fl(){}var Wc=null,Vc=null;function Hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qc=typeof setTimeout=="function"?setTimeout:void 0,Fv=typeof clearTimeout=="function"?clearTimeout:void 0,qh=typeof Promise=="function"?Promise:void 0,Uv=typeof queueMicrotask=="function"?queueMicrotask:typeof qh<"u"?function(e){return qh.resolve(null).then(e).catch(zv)}:Qc;function zv(e){setTimeout(function(){throw e})}function ec(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),ui(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);ui(t)}function br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Na=Math.random().toString(36).slice(2),Ss="__reactFiber$"+Na,pi="__reactProps$"+Na,Ws="__reactContainer$"+Na,Gc="__reactEvents$"+Na,Bv="__reactListeners$"+Na,Kv="__reactHandles$"+Na;function Hr(e){var t=e[Ss];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ws]||s[Ss]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Mh(e);e!==null;){if(s=e[Ss])return s;e=Mh(e)}return t}e=s,s=e.parentNode}return null}function Ki(e){return e=e[Ss]||e[Ws],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ln(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function go(e){return e[pi]||null}var Jc=[],Dn=-1;function $r(e){return{current:e}}function Ie(e){0>Dn||(e.current=Jc[Dn],Jc[Dn]=null,Dn--)}function Te(e,t){Dn++,Jc[Dn]=e.current,e.current=t}var Rr={},yt=$r(Rr),At=$r(!1),un=Rr;function fa(e,t){var s=e.type.contextTypes;if(!s)return Rr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function It(e){return e=e.childContextTypes,e!=null}function Ul(){Ie(At),Ie(yt)}function Lh(e,t,s){if(yt.current!==Rr)throw Error(Q(168));Te(yt,t),Te(At,s)}function Mp(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(Q(108,Ey(e)||"Unknown",a));return De({},s,n)}function zl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rr,un=yt.current,Te(yt,e),Te(At,At.current),!0}function Dh(e,t,s){var n=e.stateNode;if(!n)throw Error(Q(169));s?(e=Mp(e,t,un),n.__reactInternalMemoizedMergedChildContext=e,Ie(At),Ie(yt),Te(yt,e)):Ie(At),Te(At,s)}var $s=null,yo=!1,tc=!1;function Lp(e){$s===null?$s=[e]:$s.push(e)}function Wv(e){yo=!0,Lp(e)}function qr(){if(!tc&&$s!==null){tc=!0;var e=0,t=Ee;try{var s=$s;for(Ee=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}$s=null,yo=!1}catch(a){throw $s!==null&&($s=$s.slice(e+1)),cp(nd,qr),a}finally{Ee=t,tc=!1}}return null}var Fn=[],Un=0,Bl=null,Kl=0,Xt=[],Zt=0,dn=null,Fs=1,Us="";function zr(e,t){Fn[Un++]=Kl,Fn[Un++]=Bl,Bl=e,Kl=t}function Dp(e,t,s){Xt[Zt++]=Fs,Xt[Zt++]=Us,Xt[Zt++]=dn,dn=e;var n=Fs;e=Us;var a=32-xs(n)-1;n&=~(1<<a),s+=1;var i=32-xs(t)+a;if(30<i){var l=a-a%5;i=(n&(1<<l)-1).toString(32),n>>=l,a-=l,Fs=1<<32-xs(t)+a|s<<a|n,Us=i+e}else Fs=1<<i|s<<a|n,Us=e}function md(e){e.return!==null&&(zr(e,1),Dp(e,1,0))}function fd(e){for(;e===Bl;)Bl=Fn[--Un],Fn[Un]=null,Kl=Fn[--Un],Fn[Un]=null;for(;e===dn;)dn=Xt[--Zt],Xt[Zt]=null,Us=Xt[--Zt],Xt[Zt]=null,Fs=Xt[--Zt],Xt[Zt]=null}var Kt=null,Bt=null,$e=!1,ps=null;function Fp(e,t){var s=es(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Fh(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,Bt=br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=dn!==null?{id:Fs,overflow:Us}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=es(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Kt=e,Bt=null,!0):!1;default:return!1}}function Yc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xc(e){if($e){var t=Bt;if(t){var s=t;if(!Fh(e,t)){if(Yc(e))throw Error(Q(418));t=br(s.nextSibling);var n=Kt;t&&Fh(e,t)?Fp(n,s):(e.flags=e.flags&-4097|2,$e=!1,Kt=e)}}else{if(Yc(e))throw Error(Q(418));e.flags=e.flags&-4097|2,$e=!1,Kt=e}}}function Uh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function il(e){if(e!==Kt)return!1;if(!$e)return Uh(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hc(e.type,e.memoizedProps)),t&&(t=Bt)){if(Yc(e))throw Up(),Error(Q(418));for(;t;)Fp(e,t),t=br(t.nextSibling)}if(Uh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Bt=br(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Kt?br(e.stateNode.nextSibling):null;return!0}function Up(){for(var e=Bt;e;)e=br(e.nextSibling)}function pa(){Bt=Kt=null,$e=!1}function pd(e){ps===null?ps=[e]:ps.push(e)}var Vv=Qs.ReactCurrentBatchConfig;function $a(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Q(309));var n=s.stateNode}if(!n)throw Error(Q(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var o=a.refs;l===null?delete o[i]:o[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!s._owner)throw Error(Q(290,e))}return e}function ll(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zh(e){var t=e._init;return t(e._payload)}function zp(e){function t(p,m){if(e){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function s(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=Cr(p,m),p.index=0,p.sibling=null,p}function i(p,m,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function o(p,m,y,j){return m===null||m.tag!==6?(m=oc(y,p.mode,j),m.return=p,m):(m=a(m,y),m.return=p,m)}function c(p,m,y,j){var k=y.type;return k===In?d(p,m,y.props.children,j,y.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&zh(k)===m.type)?(j=a(m,y.props),j.ref=$a(p,m,y),j.return=p,j):(j=Tl(y.type,y.key,y.props,null,p.mode,j),j.ref=$a(p,m,y),j.return=p,j)}function u(p,m,y,j){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=cc(y,p.mode,j),m.return=p,m):(m=a(m,y.children||[]),m.return=p,m)}function d(p,m,y,j,k){return m===null||m.tag!==7?(m=cn(y,p.mode,j,k),m.return=p,m):(m=a(m,y),m.return=p,m)}function f(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=oc(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ji:return y=Tl(m.type,m.key,m.props,null,p.mode,y),y.ref=$a(p,null,m),y.return=p,y;case An:return m=cc(m,p.mode,y),m.return=p,m;case sr:var j=m._init;return f(p,j(m._payload),y)}if(Ua(m)||Ta(m))return m=cn(m,p.mode,y,null),m.return=p,m;ll(p,m)}return null}function h(p,m,y,j){var k=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return k!==null?null:o(p,m,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ji:return y.key===k?c(p,m,y,j):null;case An:return y.key===k?u(p,m,y,j):null;case sr:return k=y._init,h(p,m,k(y._payload),j)}if(Ua(y)||Ta(y))return k!==null?null:d(p,m,y,j,null);ll(p,y)}return null}function v(p,m,y,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return p=p.get(y)||null,o(m,p,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ji:return p=p.get(j.key===null?y:j.key)||null,c(m,p,j,k);case An:return p=p.get(j.key===null?y:j.key)||null,u(m,p,j,k);case sr:var N=j._init;return v(p,m,y,N(j._payload),k)}if(Ua(j)||Ta(j))return p=p.get(y)||null,d(m,p,j,k,null);ll(m,j)}return null}function g(p,m,y,j){for(var k=null,N=null,R=m,x=m=0,I=null;R!==null&&x<y.length;x++){R.index>x?(I=R,R=null):I=R.sibling;var T=h(p,R,y[x],j);if(T===null){R===null&&(R=I);break}e&&R&&T.alternate===null&&t(p,R),m=i(T,m,x),N===null?k=T:N.sibling=T,N=T,R=I}if(x===y.length)return s(p,R),$e&&zr(p,x),k;if(R===null){for(;x<y.length;x++)R=f(p,y[x],j),R!==null&&(m=i(R,m,x),N===null?k=R:N.sibling=R,N=R);return $e&&zr(p,x),k}for(R=n(p,R);x<y.length;x++)I=v(R,p,x,y[x],j),I!==null&&(e&&I.alternate!==null&&R.delete(I.key===null?x:I.key),m=i(I,m,x),N===null?k=I:N.sibling=I,N=I);return e&&R.forEach(function(z){return t(p,z)}),$e&&zr(p,x),k}function w(p,m,y,j){var k=Ta(y);if(typeof k!="function")throw Error(Q(150));if(y=k.call(y),y==null)throw Error(Q(151));for(var N=k=null,R=m,x=m=0,I=null,T=y.next();R!==null&&!T.done;x++,T=y.next()){R.index>x?(I=R,R=null):I=R.sibling;var z=h(p,R,T.value,j);if(z===null){R===null&&(R=I);break}e&&R&&z.alternate===null&&t(p,R),m=i(z,m,x),N===null?k=z:N.sibling=z,N=z,R=I}if(T.done)return s(p,R),$e&&zr(p,x),k;if(R===null){for(;!T.done;x++,T=y.next())T=f(p,T.value,j),T!==null&&(m=i(T,m,x),N===null?k=T:N.sibling=T,N=T);return $e&&zr(p,x),k}for(R=n(p,R);!T.done;x++,T=y.next())T=v(R,p,x,T.value,j),T!==null&&(e&&T.alternate!==null&&R.delete(T.key===null?x:T.key),m=i(T,m,x),N===null?k=T:N.sibling=T,N=T);return e&&R.forEach(function(W){return t(p,W)}),$e&&zr(p,x),k}function _(p,m,y,j){if(typeof y=="object"&&y!==null&&y.type===In&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ji:e:{for(var k=y.key,N=m;N!==null;){if(N.key===k){if(k=y.type,k===In){if(N.tag===7){s(p,N.sibling),m=a(N,y.props.children),m.return=p,p=m;break e}}else if(N.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===sr&&zh(k)===N.type){s(p,N.sibling),m=a(N,y.props),m.ref=$a(p,N,y),m.return=p,p=m;break e}s(p,N);break}else t(p,N);N=N.sibling}y.type===In?(m=cn(y.props.children,p.mode,j,y.key),m.return=p,p=m):(j=Tl(y.type,y.key,y.props,null,p.mode,j),j.ref=$a(p,m,y),j.return=p,p=j)}return l(p);case An:e:{for(N=y.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){s(p,m.sibling),m=a(m,y.children||[]),m.return=p,p=m;break e}else{s(p,m);break}else t(p,m);m=m.sibling}m=cc(y,p.mode,j),m.return=p,p=m}return l(p);case sr:return N=y._init,_(p,m,N(y._payload),j)}if(Ua(y))return g(p,m,y,j);if(Ta(y))return w(p,m,y,j);ll(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(s(p,m.sibling),m=a(m,y),m.return=p,p=m):(s(p,m),m=oc(y,p.mode,j),m.return=p,p=m),l(p)):s(p,m)}return _}var xa=zp(!0),Bp=zp(!1),Wl=$r(null),Vl=null,zn=null,xd=null;function gd(){xd=zn=Vl=null}function yd(e){var t=Wl.current;Ie(Wl),e._currentValue=t}function Zc(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Jn(e,t){Vl=e,xd=zn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ot=!0),e.firstContext=null)}function ss(e){var t=e._currentValue;if(xd!==e)if(e={context:e,memoizedValue:t,next:null},zn===null){if(Vl===null)throw Error(Q(308));zn=e,Vl.dependencies={lanes:0,firstContext:e}}else zn=zn.next=e;return t}var Qr=null;function vd(e){Qr===null?Qr=[e]:Qr.push(e)}function Kp(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,vd(t)):(s.next=a.next,a.next=s),t.interleaved=s,Vs(e,n)}function Vs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var rr=!1;function jd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Nr(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Vs(e,s)}return a=n.interleaved,a===null?(t.next=t,vd(n)):(t.next=a.next,a.next=t),n.interleaved=t,Vs(e,s)}function Nl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,ad(e,s)}}function Bh(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=l:i=i.next=l,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Hl(e,t,s,n){var a=e.updateQueue;rr=!1;var i=a.firstBaseUpdate,l=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==l&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;l=0,d=u=c=null,o=i;do{var h=o.lane,v=o.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:v,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=e,w=o;switch(h=t,v=s,w.tag){case 1:if(g=w.payload,typeof g=="function"){f=g.call(v,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,h=typeof g=="function"?g.call(v,f,h):g,h==null)break e;f=De({},f,h);break e;case 2:rr=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else v={eventTime:v,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,l|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);mn|=l,e.lanes=l,e.memoizedState=f}}function Kh(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(Q(191,a));a.call(n)}}}var Wi={},Es=$r(Wi),xi=$r(Wi),gi=$r(Wi);function Gr(e){if(e===Wi)throw Error(Q(174));return e}function wd(e,t){switch(Te(gi,t),Te(xi,e),Te(Es,Wi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ac(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ac(t,e)}Ie(Es),Te(Es,t)}function ga(){Ie(Es),Ie(xi),Ie(gi)}function Vp(e){Gr(gi.current);var t=Gr(Es.current),s=Ac(t,e.type);t!==s&&(Te(xi,e),Te(Es,s))}function _d(e){xi.current===e&&(Ie(Es),Ie(xi))}var Me=$r(0);function Ql(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sc=[];function bd(){for(var e=0;e<sc.length;e++)sc[e]._workInProgressVersionPrimary=null;sc.length=0}var kl=Qs.ReactCurrentDispatcher,rc=Qs.ReactCurrentBatchConfig,hn=0,Le=null,st=null,it=null,Gl=!1,Za=!1,yi=0,Hv=0;function ft(){throw Error(Q(321))}function Nd(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!vs(e[s],t[s]))return!1;return!0}function kd(e,t,s,n,a,i){if(hn=i,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kl.current=e===null||e.memoizedState===null?Yv:Xv,e=s(n,a),Za){i=0;do{if(Za=!1,yi=0,25<=i)throw Error(Q(301));i+=1,it=st=null,t.updateQueue=null,kl.current=Zv,e=s(n,a)}while(Za)}if(kl.current=Jl,t=st!==null&&st.next!==null,hn=0,it=st=Le=null,Gl=!1,t)throw Error(Q(300));return e}function Sd(){var e=yi!==0;return yi=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Le.memoizedState=it=e:it=it.next=e,it}function rs(){if(st===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=st.next;var t=it===null?Le.memoizedState:it.next;if(t!==null)it=t,st=e;else{if(e===null)throw Error(Q(310));st=e,e={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},it===null?Le.memoizedState=it=e:it=it.next=e}return it}function vi(e,t){return typeof t=="function"?t(e):t}function nc(e){var t=rs(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=st,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var o=l=null,c=null,u=i;do{var d=u.lane;if((hn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,l=n):c=c.next=f,Le.lanes|=d,mn|=d}u=u.next}while(u!==null&&u!==i);c===null?l=n:c.next=o,vs(n,t.memoizedState)||(Ot=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Le.lanes|=i,mn|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ac(e){var t=rs(),s=t.queue;if(s===null)throw Error(Q(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var l=a=a.next;do i=e(i,l.action),l=l.next;while(l!==a);vs(i,t.memoizedState)||(Ot=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Hp(){}function Qp(e,t){var s=Le,n=rs(),a=t(),i=!vs(n.memoizedState,a);if(i&&(n.memoizedState=a,Ot=!0),n=n.queue,Cd(Yp.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||it!==null&&it.memoizedState.tag&1){if(s.flags|=2048,ji(9,Jp.bind(null,s,n,a,t),void 0,null),lt===null)throw Error(Q(349));hn&30||Gp(s,t,a)}return a}function Gp(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Jp(e,t,s,n){t.value=s,t.getSnapshot=n,Xp(t)&&Zp(e)}function Yp(e,t,s){return s(function(){Xp(t)&&Zp(e)})}function Xp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!vs(e,s)}catch{return!0}}function Zp(e){var t=Vs(e,1);t!==null&&gs(t,e,1,-1)}function Wh(e){var t=_s();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Jv.bind(null,Le,e),[t.memoizedState,e]}function ji(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function ex(){return rs().memoizedState}function Sl(e,t,s,n){var a=_s();Le.flags|=e,a.memoizedState=ji(1|t,s,void 0,n===void 0?null:n)}function vo(e,t,s,n){var a=rs();n=n===void 0?null:n;var i=void 0;if(st!==null){var l=st.memoizedState;if(i=l.destroy,n!==null&&Nd(n,l.deps)){a.memoizedState=ji(t,s,i,n);return}}Le.flags|=e,a.memoizedState=ji(1|t,s,i,n)}function Vh(e,t){return Sl(8390656,8,e,t)}function Cd(e,t){return vo(2048,8,e,t)}function tx(e,t){return vo(4,2,e,t)}function sx(e,t){return vo(4,4,e,t)}function rx(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nx(e,t,s){return s=s!=null?s.concat([e]):null,vo(4,4,rx.bind(null,t,e),s)}function Ed(){}function ax(e,t){var s=rs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Nd(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function ix(e,t){var s=rs();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Nd(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function lx(e,t,s){return hn&21?(vs(s,t)||(s=hp(),Le.lanes|=s,mn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ot=!0),e.memoizedState=s)}function Qv(e,t){var s=Ee;Ee=s!==0&&4>s?s:4,e(!0);var n=rc.transition;rc.transition={};try{e(!1),t()}finally{Ee=s,rc.transition=n}}function ox(){return rs().memoizedState}function Gv(e,t,s){var n=Sr(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},cx(e))ux(t,s);else if(s=Kp(e,t,s,n),s!==null){var a=kt();gs(s,e,n,a),dx(s,t,n)}}function Jv(e,t,s){var n=Sr(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(cx(e))ux(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,o=i(l,s);if(a.hasEagerState=!0,a.eagerState=o,vs(o,l)){var c=t.interleaved;c===null?(a.next=a,vd(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Kp(e,t,a,n),s!==null&&(a=kt(),gs(s,e,n,a),dx(s,t,n))}}function cx(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function ux(e,t){Za=Gl=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function dx(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,ad(e,s)}}var Jl={readContext:ss,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},Yv={readContext:ss,useCallback:function(e,t){return _s().memoizedState=[e,t===void 0?null:t],e},useContext:ss,useEffect:Vh,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Sl(4194308,4,rx.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Sl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sl(4,2,e,t)},useMemo:function(e,t){var s=_s();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=_s();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Gv.bind(null,Le,e),[n.memoizedState,e]},useRef:function(e){var t=_s();return e={current:e},t.memoizedState=e},useState:Wh,useDebugValue:Ed,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=Wh(!1),t=e[0];return e=Qv.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Le,a=_s();if($e){if(s===void 0)throw Error(Q(407));s=s()}else{if(s=t(),lt===null)throw Error(Q(349));hn&30||Gp(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Vh(Yp.bind(null,n,i,e),[e]),n.flags|=2048,ji(9,Jp.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=_s(),t=lt.identifierPrefix;if($e){var s=Us,n=Fs;s=(n&~(1<<32-xs(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=yi++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Hv++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xv={readContext:ss,useCallback:ax,useContext:ss,useEffect:Cd,useImperativeHandle:nx,useInsertionEffect:tx,useLayoutEffect:sx,useMemo:ix,useReducer:nc,useRef:ex,useState:function(){return nc(vi)},useDebugValue:Ed,useDeferredValue:function(e){var t=rs();return lx(t,st.memoizedState,e)},useTransition:function(){var e=nc(vi)[0],t=rs().memoizedState;return[e,t]},useMutableSource:Hp,useSyncExternalStore:Qp,useId:ox,unstable_isNewReconciler:!1},Zv={readContext:ss,useCallback:ax,useContext:ss,useEffect:Cd,useImperativeHandle:nx,useInsertionEffect:tx,useLayoutEffect:sx,useMemo:ix,useReducer:ac,useRef:ex,useState:function(){return ac(vi)},useDebugValue:Ed,useDeferredValue:function(e){var t=rs();return st===null?t.memoizedState=e:lx(t,st.memoizedState,e)},useTransition:function(){var e=ac(vi)[0],t=rs().memoizedState;return[e,t]},useMutableSource:Hp,useSyncExternalStore:Qp,useId:ox,unstable_isNewReconciler:!1};function cs(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function eu(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:De({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var jo={isMounted:function(e){return(e=e._reactInternals)?yn(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=kt(),a=Sr(e),i=zs(n,a);i.payload=t,s!=null&&(i.callback=s),t=Nr(e,i,a),t!==null&&(gs(t,e,a,n),Nl(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=kt(),a=Sr(e),i=zs(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Nr(e,i,a),t!==null&&(gs(t,e,a,n),Nl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=kt(),n=Sr(e),a=zs(s,n);a.tag=2,t!=null&&(a.callback=t),t=Nr(e,a,n),t!==null&&(gs(t,e,n,s),Nl(t,e,n))}};function Hh(e,t,s,n,a,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,l):t.prototype&&t.prototype.isPureReactComponent?!hi(s,n)||!hi(a,i):!0}function hx(e,t,s){var n=!1,a=Rr,i=t.contextType;return typeof i=="object"&&i!==null?i=ss(i):(a=It(t)?un:yt.current,n=t.contextTypes,i=(n=n!=null)?fa(e,a):Rr),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Qh(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function tu(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},jd(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ss(i):(i=It(t)?un:yt.current,a.context=fa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(eu(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&jo.enqueueReplaceState(a,a.state,null),Hl(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ya(e,t){try{var s="",n=t;do s+=Cy(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ic(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function su(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var e0=typeof WeakMap=="function"?WeakMap:Map;function mx(e,t,s){s=zs(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Xl||(Xl=!0,hu=n),su(e,t)},s}function fx(e,t,s){s=zs(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){su(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){su(e,t),typeof n!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function Gh(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new e0;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=f0.bind(null,e,t,s),t.then(e,e))}function Jh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yh(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=zs(-1,1),t.tag=2,Nr(s,t,1))),s.lanes|=1),e)}var t0=Qs.ReactCurrentOwner,Ot=!1;function bt(e,t,s,n){t.child=e===null?Bp(t,null,s,n):xa(t,e.child,s,n)}function Xh(e,t,s,n,a){s=s.render;var i=t.ref;return Jn(t,a),n=kd(e,t,s,n,i,a),s=Sd(),e!==null&&!Ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a)):($e&&s&&md(t),t.flags|=1,bt(e,t,n,a),t.child)}function Zh(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!qd(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,px(e,t,i,n,a)):(e=Tl(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var l=i.memoizedProps;if(s=s.compare,s=s!==null?s:hi,s(l,n)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,e=Cr(i,n),e.ref=t.ref,e.return=t,t.child=e}function px(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(hi(i,n)&&e.ref===t.ref)if(Ot=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ot=!0);else return t.lanes=e.lanes,Hs(e,t,a)}return ru(e,t,s,n,a)}function xx(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Kn,Ft),Ft|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Te(Kn,Ft),Ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Te(Kn,Ft),Ft|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,Te(Kn,Ft),Ft|=n;return bt(e,t,a,s),t.child}function gx(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function ru(e,t,s,n,a){var i=It(s)?un:yt.current;return i=fa(t,i),Jn(t,a),s=kd(e,t,s,n,i,a),n=Sd(),e!==null&&!Ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a)):($e&&n&&md(t),t.flags|=1,bt(e,t,s,a),t.child)}function em(e,t,s,n,a){if(It(s)){var i=!0;zl(t)}else i=!1;if(Jn(t,a),t.stateNode===null)Cl(e,t),hx(t,s,n),tu(t,s,n,a),n=!0;else if(e===null){var l=t.stateNode,o=t.memoizedProps;l.props=o;var c=l.context,u=s.contextType;typeof u=="object"&&u!==null?u=ss(u):(u=It(s)?un:yt.current,u=fa(t,u));var d=s.getDerivedStateFromProps,f=typeof d=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==n||c!==u)&&Qh(t,l,n,u),rr=!1;var h=t.memoizedState;l.state=h,Hl(t,n,l,a),c=t.memoizedState,o!==n||h!==c||At.current||rr?(typeof d=="function"&&(eu(t,s,d,n),c=t.memoizedState),(o=rr||Hh(t,s,o,n,h,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),l.props=n,l.state=c,l.context=u,n=o):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{l=t.stateNode,Wp(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:cs(t.type,o),l.props=u,f=t.pendingProps,h=l.context,c=s.contextType,typeof c=="object"&&c!==null?c=ss(c):(c=It(s)?un:yt.current,c=fa(t,c));var v=s.getDerivedStateFromProps;(d=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==f||h!==c)&&Qh(t,l,n,c),rr=!1,h=t.memoizedState,l.state=h,Hl(t,n,l,a);var g=t.memoizedState;o!==f||h!==g||At.current||rr?(typeof v=="function"&&(eu(t,s,v,n),g=t.memoizedState),(u=rr||Hh(t,s,u,n,h,g,c)||!1)?(d||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,g,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,g,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),l.props=n,l.state=g,l.context=c,n=u):(typeof l.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return nu(e,t,s,n,i,a)}function nu(e,t,s,n,a,i){gx(e,t);var l=(t.flags&128)!==0;if(!n&&!l)return a&&Dh(t,s,!1),Hs(e,t,i);n=t.stateNode,t0.current=t;var o=l&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&l?(t.child=xa(t,e.child,null,i),t.child=xa(t,null,o,i)):bt(e,t,o,i),t.memoizedState=n.state,a&&Dh(t,s,!0),t.child}function yx(e){var t=e.stateNode;t.pendingContext?Lh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lh(e,t.context,!1),wd(e,t.containerInfo)}function tm(e,t,s,n,a){return pa(),pd(a),t.flags|=256,bt(e,t,s,n),t.child}var au={dehydrated:null,treeContext:null,retryLane:0};function iu(e){return{baseLanes:e,cachePool:null,transitions:null}}function vx(e,t,s){var n=t.pendingProps,a=Me.current,i=!1,l=(t.flags&128)!==0,o;if((o=l)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Te(Me,a&1),e===null)return Xc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=n.children,e=n.fallback,i?(n=t.mode,i=t.child,l={mode:"hidden",children:l},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=bo(l,n,0,null),e=cn(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=iu(s),t.memoizedState=au,e):Pd(t,l));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return s0(e,t,l,n,o,a,s);if(i){i=n.fallback,l=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:n.children};return!(l&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Cr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?i=Cr(o,i):(i=cn(i,l,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,l=e.child.memoizedState,l=l===null?iu(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~s,t.memoizedState=au,n}return i=e.child,e=i.sibling,n=Cr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Pd(e,t){return t=bo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ol(e,t,s,n){return n!==null&&pd(n),xa(t,e.child,null,s),e=Pd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function s0(e,t,s,n,a,i,l){if(s)return t.flags&256?(t.flags&=-257,n=ic(Error(Q(422))),ol(e,t,l,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=bo({mode:"visible",children:n.children},a,0,null),i=cn(i,a,l,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&xa(t,e.child,null,l),t.child.memoizedState=iu(l),t.memoizedState=au,i);if(!(t.mode&1))return ol(e,t,l,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(Q(419)),n=ic(i,n,void 0),ol(e,t,l,n)}if(o=(l&e.childLanes)!==0,Ot||o){if(n=lt,n!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|l)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Vs(e,a),gs(n,e,a,-1))}return $d(),n=ic(Error(Q(421))),ol(e,t,l,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=p0.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Bt=br(a.nextSibling),Kt=t,$e=!0,ps=null,e!==null&&(Xt[Zt++]=Fs,Xt[Zt++]=Us,Xt[Zt++]=dn,Fs=e.id,Us=e.overflow,dn=t),t=Pd(t,n.children),t.flags|=4096,t)}function sm(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Zc(e.return,t,s)}function lc(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function jx(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(bt(e,t,n.children,s),n=Me.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sm(e,s,t);else if(e.tag===19)sm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Te(Me,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Ql(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),lc(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ql(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}lc(t,!0,s,null,i);break;case"together":lc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),mn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,s=Cr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Cr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function r0(e,t,s){switch(t.tag){case 3:yx(t),pa();break;case 5:Vp(t);break;case 1:It(t.type)&&zl(t);break;case 4:wd(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Te(Wl,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Te(Me,Me.current&1),t.flags|=128,null):s&t.child.childLanes?vx(e,t,s):(Te(Me,Me.current&1),e=Hs(e,t,s),e!==null?e.sibling:null);Te(Me,Me.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return jx(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Te(Me,Me.current),n)break;return null;case 22:case 23:return t.lanes=0,xx(e,t,s)}return Hs(e,t,s)}var wx,lu,_x,bx;wx=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};lu=function(){};_x=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Gr(Es.current);var i=null;switch(s){case"input":a=Pc(e,a),n=Pc(e,n),i=[];break;case"select":a=De({},a,{value:void 0}),n=De({},n,{value:void 0}),i=[];break;case"textarea":a=Oc(e,a),n=Oc(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fl)}Ic(s,n);var l;s=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var o=a[u];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ai.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(o=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(s||(s={}),s[l]=c[l])}else s||(i||(i=[]),i.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ai.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ae("scroll",e),i||o===c||(i=[])):(i=i||[]).push(u,c))}s&&(i=i||[]).push("style",s);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};bx=function(e,t,s,n){s!==n&&(t.flags|=4)};function qa(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function n0(e,t,s){var n=t.pendingProps;switch(fd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(t),null;case 1:return It(t.type)&&Ul(),pt(t),null;case 3:return n=t.stateNode,ga(),Ie(At),Ie(yt),bd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ps!==null&&(pu(ps),ps=null))),lu(e,t),pt(t),null;case 5:_d(t);var a=Gr(gi.current);if(s=t.type,e!==null&&t.stateNode!=null)_x(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Q(166));return pt(t),null}if(e=Gr(Es.current),il(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Ss]=t,n[pi]=i,e=(t.mode&1)!==0,s){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(a=0;a<Ba.length;a++)Ae(Ba[a],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":dh(n,i),Ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",n);break;case"textarea":mh(n,i),Ae("invalid",n)}Ic(s,i),a=null;for(var l in i)if(i.hasOwnProperty(l)){var o=i[l];l==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&al(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&al(n.textContent,o,e),a=["children",""+o]):ai.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&Ae("scroll",n)}switch(s){case"input":Yi(n),hh(n,i,!0);break;case"textarea":Yi(n),fh(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Fl)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Yf(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(s,{is:n.is}):(e=l.createElement(s),s==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,s),e[Ss]=t,e[pi]=n,wx(e,t,!1,!1),t.stateNode=e;e:{switch(l=$c(s,n),s){case"dialog":Ae("cancel",e),Ae("close",e),a=n;break;case"iframe":case"object":case"embed":Ae("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ba.length;a++)Ae(Ba[a],e);a=n;break;case"source":Ae("error",e),a=n;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),a=n;break;case"details":Ae("toggle",e),a=n;break;case"input":dh(e,n),a=Pc(e,n),Ae("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=De({},n,{value:void 0}),Ae("invalid",e);break;case"textarea":mh(e,n),a=Oc(e,n),Ae("invalid",e);break;default:a=n}Ic(s,a),o=a;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?ep(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Xf(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ii(e,c):typeof c=="number"&&ii(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ai.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ae("scroll",e):c!=null&&Zu(e,i,c,l))}switch(s){case"input":Yi(e),hh(e,n,!1);break;case"textarea":Yi(e),fh(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Tr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Vn(e,!!n.multiple,i,!1):n.defaultValue!=null&&Vn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pt(t),null;case 6:if(e&&t.stateNode!=null)bx(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Q(166));if(s=Gr(gi.current),Gr(Es.current),il(t)){if(n=t.stateNode,s=t.memoizedProps,n[Ss]=t,(i=n.nodeValue!==s)&&(e=Kt,e!==null))switch(e.tag){case 3:al(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&al(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ss]=t,t.stateNode=n}return pt(t),null;case 13:if(Ie(Me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Bt!==null&&t.mode&1&&!(t.flags&128))Up(),pa(),t.flags|=98560,i=!1;else if(i=il(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Ss]=t}else pa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pt(t),i=!1}else ps!==null&&(pu(ps),ps=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?nt===0&&(nt=3):$d())),t.updateQueue!==null&&(t.flags|=4),pt(t),null);case 4:return ga(),lu(e,t),e===null&&mi(t.stateNode.containerInfo),pt(t),null;case 10:return yd(t.type._context),pt(t),null;case 17:return It(t.type)&&Ul(),pt(t),null;case 19:if(Ie(Me),i=t.memoizedState,i===null)return pt(t),null;if(n=(t.flags&128)!==0,l=i.rendering,l===null)if(n)qa(i,!1);else{if(nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ql(e),l!==null){for(t.flags|=128,qa(i,!1),n=l.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Te(Me,Me.current&1|2),t.child}e=e.sibling}i.tail!==null&&He()>va&&(t.flags|=128,n=!0,qa(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ql(l),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),qa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!$e)return pt(t),null}else 2*He()-i.renderingStartTime>va&&s!==1073741824&&(t.flags|=128,n=!0,qa(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(s=i.last,s!==null?s.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=He(),t.sibling=null,s=Me.current,Te(Me,n?s&1|2:s&1),t):(pt(t),null);case 22:case 23:return Id(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ft&1073741824&&(pt(t),t.subtreeFlags&6&&(t.flags|=8192)):pt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function a0(e,t){switch(fd(t),t.tag){case 1:return It(t.type)&&Ul(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ga(),Ie(At),Ie(yt),bd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _d(t),null;case 13:if(Ie(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Me),null;case 4:return ga(),null;case 10:return yd(t.type._context),null;case 22:case 23:return Id(),null;case 24:return null;default:return null}}var cl=!1,xt=!1,i0=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Bn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ke(e,t,n)}else s.current=null}function ou(e,t,s){try{s()}catch(n){Ke(e,t,n)}}var rm=!1;function l0(e,t){if(Wc=Ml,e=Ep(),hd(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var l=0,o=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var v;f!==s||a!==0&&f.nodeType!==3||(o=l+a),f!==i||n!==0&&f.nodeType!==3||(c=l+n),f.nodeType===3&&(l+=f.nodeValue.length),(v=f.firstChild)!==null;)h=f,f=v;for(;;){if(f===e)break t;if(h===s&&++u===a&&(o=l),h===i&&++d===n&&(c=l),(v=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=v}s=o===-1||c===-1?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Vc={focusedElem:e,selectionRange:s},Ml=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,_=g.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:cs(t.type,w),_);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){Ke(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return g=rm,rm=!1,g}function ei(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ou(t,s,i)}a=a.next}while(a!==n)}}function wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function cu(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Nx(e){var t=e.alternate;t!==null&&(e.alternate=null,Nx(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ss],delete t[pi],delete t[Gc],delete t[Bv],delete t[Kv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kx(e){return e.tag===5||e.tag===3||e.tag===4}function nm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kx(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function uu(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Fl));else if(n!==4&&(e=e.child,e!==null))for(uu(e,t,s),e=e.sibling;e!==null;)uu(e,t,s),e=e.sibling}function du(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(du(e,t,s),e=e.sibling;e!==null;)du(e,t,s),e=e.sibling}var dt=null,ms=!1;function Xs(e,t,s){for(s=s.child;s!==null;)Sx(e,t,s),s=s.sibling}function Sx(e,t,s){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(mo,s)}catch{}switch(s.tag){case 5:xt||Bn(s,t);case 6:var n=dt,a=ms;dt=null,Xs(e,t,s),dt=n,ms=a,dt!==null&&(ms?(e=dt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):dt.removeChild(s.stateNode));break;case 18:dt!==null&&(ms?(e=dt,s=s.stateNode,e.nodeType===8?ec(e.parentNode,s):e.nodeType===1&&ec(e,s),ui(e)):ec(dt,s.stateNode));break;case 4:n=dt,a=ms,dt=s.stateNode.containerInfo,ms=!0,Xs(e,t,s),dt=n,ms=a;break;case 0:case 11:case 14:case 15:if(!xt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ou(s,t,l),a=a.next}while(a!==n)}Xs(e,t,s);break;case 1:if(!xt&&(Bn(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(o){Ke(s,t,o)}Xs(e,t,s);break;case 21:Xs(e,t,s);break;case 22:s.mode&1?(xt=(n=xt)||s.memoizedState!==null,Xs(e,t,s),xt=n):Xs(e,t,s);break;default:Xs(e,t,s)}}function am(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new i0),t.forEach(function(n){var a=x0.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function ls(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,o=l;e:for(;o!==null;){switch(o.tag){case 5:dt=o.stateNode,ms=!1;break e;case 3:dt=o.stateNode.containerInfo,ms=!0;break e;case 4:dt=o.stateNode.containerInfo,ms=!0;break e}o=o.return}if(dt===null)throw Error(Q(160));Sx(i,l,a),dt=null,ms=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ke(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cx(t,e),t=t.sibling}function Cx(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ls(t,e),ws(e),n&4){try{ei(3,e,e.return),wo(3,e)}catch(w){Ke(e,e.return,w)}try{ei(5,e,e.return)}catch(w){Ke(e,e.return,w)}}break;case 1:ls(t,e),ws(e),n&512&&s!==null&&Bn(s,s.return);break;case 5:if(ls(t,e),ws(e),n&512&&s!==null&&Bn(s,s.return),e.flags&32){var a=e.stateNode;try{ii(a,"")}catch(w){Ke(e,e.return,w)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,l=s!==null?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Gf(a,i),$c(o,l);var u=$c(o,i);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];d==="style"?ep(a,f):d==="dangerouslySetInnerHTML"?Xf(a,f):d==="children"?ii(a,f):Zu(a,d,f,u)}switch(o){case"input":Tc(a,i);break;case"textarea":Jf(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Vn(a,!!i.multiple,v,!1):h!==!!i.multiple&&(i.defaultValue!=null?Vn(a,!!i.multiple,i.defaultValue,!0):Vn(a,!!i.multiple,i.multiple?[]:"",!1))}a[pi]=i}catch(w){Ke(e,e.return,w)}}break;case 6:if(ls(t,e),ws(e),n&4){if(e.stateNode===null)throw Error(Q(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(w){Ke(e,e.return,w)}}break;case 3:if(ls(t,e),ws(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(w){Ke(e,e.return,w)}break;case 4:ls(t,e),ws(e);break;case 13:ls(t,e),ws(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Od=He())),n&4&&am(e);break;case 22:if(d=s!==null&&s.memoizedState!==null,e.mode&1?(xt=(u=xt)||d,ls(t,e),xt=u):ls(t,e),ws(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ee=e,d=e.child;d!==null;){for(f=ee=d;ee!==null;){switch(h=ee,v=h.child,h.tag){case 0:case 11:case 14:case 15:ei(4,h,h.return);break;case 1:Bn(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,s=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){Ke(n,s,w)}}break;case 5:Bn(h,h.return);break;case 22:if(h.memoizedState!==null){lm(f);continue}}v!==null?(v.return=h,ee=v):lm(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Zf("display",l))}catch(w){Ke(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){Ke(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ls(t,e),ws(e),n&4&&am(e);break;case 21:break;default:ls(t,e),ws(e)}}function ws(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(kx(s)){var n=s;break e}s=s.return}throw Error(Q(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ii(a,""),n.flags&=-33);var i=nm(e);du(e,i,a);break;case 3:case 4:var l=n.stateNode.containerInfo,o=nm(e);uu(e,o,l);break;default:throw Error(Q(161))}}catch(c){Ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function o0(e,t,s){ee=e,Ex(e)}function Ex(e,t,s){for(var n=(e.mode&1)!==0;ee!==null;){var a=ee,i=a.child;if(a.tag===22&&n){var l=a.memoizedState!==null||cl;if(!l){var o=a.alternate,c=o!==null&&o.memoizedState!==null||xt;o=cl;var u=xt;if(cl=l,(xt=c)&&!u)for(ee=a;ee!==null;)l=ee,c=l.child,l.tag===22&&l.memoizedState!==null?om(a):c!==null?(c.return=l,ee=c):om(a);for(;i!==null;)ee=i,Ex(i),i=i.sibling;ee=a,cl=o,xt=u}im(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ee=i):im(e)}}function im(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xt||wo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!xt)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:cs(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Kh(t,i,n);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Kh(t,l,s)}break;case 5:var o=t.stateNode;if(s===null&&t.flags&4){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ui(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}xt||t.flags&512&&cu(t)}catch(h){Ke(t,t.return,h)}}if(t===e){ee=null;break}if(s=t.sibling,s!==null){s.return=t.return,ee=s;break}ee=t.return}}function lm(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ee=s;break}ee=t.return}}function om(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{wo(4,t)}catch(c){Ke(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ke(t,a,c)}}var i=t.return;try{cu(t)}catch(c){Ke(t,i,c)}break;case 5:var l=t.return;try{cu(t)}catch(c){Ke(t,l,c)}}}catch(c){Ke(t,t.return,c)}if(t===e){ee=null;break}var o=t.sibling;if(o!==null){o.return=t.return,ee=o;break}ee=t.return}}var c0=Math.ceil,Yl=Qs.ReactCurrentDispatcher,Td=Qs.ReactCurrentOwner,ts=Qs.ReactCurrentBatchConfig,we=0,lt=null,Xe=null,ht=0,Ft=0,Kn=$r(0),nt=0,wi=null,mn=0,_o=0,Rd=0,ti=null,Rt=null,Od=0,va=1/0,As=null,Xl=!1,hu=null,kr=null,ul=!1,yr=null,Zl=0,si=0,mu=null,El=-1,Pl=0;function kt(){return we&6?He():El!==-1?El:El=He()}function Sr(e){return e.mode&1?we&2&&ht!==0?ht&-ht:Vv.transition!==null?(Pl===0&&(Pl=hp()),Pl):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:vp(e.type)),e):1}function gs(e,t,s,n){if(50<si)throw si=0,mu=null,Error(Q(185));zi(e,s,n),(!(we&2)||e!==lt)&&(e===lt&&(!(we&2)&&(_o|=s),nt===4&&ir(e,ht)),$t(e,n),s===1&&we===0&&!(t.mode&1)&&(va=He()+500,yo&&qr()))}function $t(e,t){var s=e.callbackNode;Vy(e,t);var n=ql(e,e===lt?ht:0);if(n===0)s!==null&&gh(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&gh(s),t===1)e.tag===0?Wv(cm.bind(null,e)):Lp(cm.bind(null,e)),Uv(function(){!(we&6)&&qr()}),s=null;else{switch(mp(n)){case 1:s=nd;break;case 4:s=up;break;case 16:s=$l;break;case 536870912:s=dp;break;default:s=$l}s=qx(s,Px.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Px(e,t){if(El=-1,Pl=0,we&6)throw Error(Q(327));var s=e.callbackNode;if(Yn()&&e.callbackNode!==s)return null;var n=ql(e,e===lt?ht:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=eo(e,n);else{t=n;var a=we;we|=2;var i=Rx();(lt!==e||ht!==t)&&(As=null,va=He()+500,on(e,t));do try{h0();break}catch(o){Tx(e,o)}while(!0);gd(),Yl.current=i,we=a,Xe!==null?t=0:(lt=null,ht=0,t=nt)}if(t!==0){if(t===2&&(a=Fc(e),a!==0&&(n=a,t=fu(e,a))),t===1)throw s=wi,on(e,0),ir(e,n),$t(e,He()),s;if(t===6)ir(e,n);else{if(a=e.current.alternate,!(n&30)&&!u0(a)&&(t=eo(e,n),t===2&&(i=Fc(e),i!==0&&(n=i,t=fu(e,i))),t===1))throw s=wi,on(e,0),ir(e,n),$t(e,He()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(Q(345));case 2:Br(e,Rt,As);break;case 3:if(ir(e,n),(n&130023424)===n&&(t=Od+500-He(),10<t)){if(ql(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){kt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qc(Br.bind(null,e,Rt,As),t);break}Br(e,Rt,As);break;case 4:if(ir(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-xs(n);i=1<<l,l=t[l],l>a&&(a=l),n&=~i}if(n=a,n=He()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*c0(n/1960))-n,10<n){e.timeoutHandle=Qc(Br.bind(null,e,Rt,As),n);break}Br(e,Rt,As);break;case 5:Br(e,Rt,As);break;default:throw Error(Q(329))}}}return $t(e,He()),e.callbackNode===s?Px.bind(null,e):null}function fu(e,t){var s=ti;return e.current.memoizedState.isDehydrated&&(on(e,t).flags|=256),e=eo(e,t),e!==2&&(t=Rt,Rt=s,t!==null&&pu(t)),e}function pu(e){Rt===null?Rt=e:Rt.push.apply(Rt,e)}function u0(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!vs(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~Rd,t&=~_o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-xs(t),n=1<<s;e[s]=-1,t&=~n}}function cm(e){if(we&6)throw Error(Q(327));Yn();var t=ql(e,0);if(!(t&1))return $t(e,He()),null;var s=eo(e,t);if(e.tag!==0&&s===2){var n=Fc(e);n!==0&&(t=n,s=fu(e,n))}if(s===1)throw s=wi,on(e,0),ir(e,t),$t(e,He()),s;if(s===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,Rt,As),$t(e,He()),null}function Ad(e,t){var s=we;we|=1;try{return e(t)}finally{we=s,we===0&&(va=He()+500,yo&&qr())}}function fn(e){yr!==null&&yr.tag===0&&!(we&6)&&Yn();var t=we;we|=1;var s=ts.transition,n=Ee;try{if(ts.transition=null,Ee=1,e)return e()}finally{Ee=n,ts.transition=s,we=t,!(we&6)&&qr()}}function Id(){Ft=Kn.current,Ie(Kn)}function on(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Fv(s)),Xe!==null)for(s=Xe.return;s!==null;){var n=s;switch(fd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ul();break;case 3:ga(),Ie(At),Ie(yt),bd();break;case 5:_d(n);break;case 4:ga();break;case 13:Ie(Me);break;case 19:Ie(Me);break;case 10:yd(n.type._context);break;case 22:case 23:Id()}s=s.return}if(lt=e,Xe=e=Cr(e.current,null),ht=Ft=t,nt=0,wi=null,Rd=_o=mn=0,Rt=ti=null,Qr!==null){for(t=0;t<Qr.length;t++)if(s=Qr[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var l=i.next;i.next=a,n.next=l}s.pending=n}Qr=null}return e}function Tx(e,t){do{var s=Xe;try{if(gd(),kl.current=Jl,Gl){for(var n=Le.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Gl=!1}if(hn=0,it=st=Le=null,Za=!1,yi=0,Td.current=null,s===null||s.return===null){nt=1,wi=t,Xe=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=ht,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Jh(l);if(v!==null){v.flags&=-257,Yh(v,l,o,i,t),v.mode&1&&Gh(i,u,t),t=v,c=u;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){Gh(i,u,t),$d();break e}c=Error(Q(426))}}else if($e&&o.mode&1){var _=Jh(l);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Yh(_,l,o,i,t),pd(ya(c,o));break e}}i=c=ya(c,o),nt!==4&&(nt=2),ti===null?ti=[i]:ti.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=mx(i,c,t);Bh(i,p);break e;case 1:o=c;var m=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(kr===null||!kr.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=fx(i,o,t);Bh(i,j);break e}}i=i.return}while(i!==null)}Ax(s)}catch(k){t=k,Xe===s&&s!==null&&(Xe=s=s.return);continue}break}while(!0)}function Rx(){var e=Yl.current;return Yl.current=Jl,e===null?Jl:e}function $d(){(nt===0||nt===3||nt===2)&&(nt=4),lt===null||!(mn&268435455)&&!(_o&268435455)||ir(lt,ht)}function eo(e,t){var s=we;we|=2;var n=Rx();(lt!==e||ht!==t)&&(As=null,on(e,t));do try{d0();break}catch(a){Tx(e,a)}while(!0);if(gd(),we=s,Yl.current=n,Xe!==null)throw Error(Q(261));return lt=null,ht=0,nt}function d0(){for(;Xe!==null;)Ox(Xe)}function h0(){for(;Xe!==null&&!My();)Ox(Xe)}function Ox(e){var t=$x(e.alternate,e,Ft);e.memoizedProps=e.pendingProps,t===null?Ax(e):Xe=t,Td.current=null}function Ax(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=a0(s,t),s!==null){s.flags&=32767,Xe=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,Xe=null;return}}else if(s=n0(s,t,Ft),s!==null){Xe=s;return}if(t=t.sibling,t!==null){Xe=t;return}Xe=t=e}while(t!==null);nt===0&&(nt=5)}function Br(e,t,s){var n=Ee,a=ts.transition;try{ts.transition=null,Ee=1,m0(e,t,s,n)}finally{ts.transition=a,Ee=n}return null}function m0(e,t,s,n){do Yn();while(yr!==null);if(we&6)throw Error(Q(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(Hy(e,i),e===lt&&(Xe=lt=null,ht=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||ul||(ul=!0,qx($l,function(){return Yn(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=ts.transition,ts.transition=null;var l=Ee;Ee=1;var o=we;we|=4,Td.current=null,l0(e,s),Cx(s,e),Av(Vc),Ml=!!Wc,Vc=Wc=null,e.current=s,o0(s),Ly(),we=o,Ee=l,ts.transition=i}else e.current=s;if(ul&&(ul=!1,yr=e,Zl=a),i=e.pendingLanes,i===0&&(kr=null),Uy(s.stateNode),$t(e,He()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Xl)throw Xl=!1,e=hu,hu=null,e;return Zl&1&&e.tag!==0&&Yn(),i=e.pendingLanes,i&1?e===mu?si++:(si=0,mu=e):si=0,qr(),null}function Yn(){if(yr!==null){var e=mp(Zl),t=ts.transition,s=Ee;try{if(ts.transition=null,Ee=16>e?16:e,yr===null)var n=!1;else{if(e=yr,yr=null,Zl=0,we&6)throw Error(Q(331));var a=we;for(we|=4,ee=e.current;ee!==null;){var i=ee,l=i.child;if(ee.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:ei(8,d,i)}var f=d.child;if(f!==null)f.return=d,ee=f;else for(;ee!==null;){d=ee;var h=d.sibling,v=d.return;if(Nx(d),d===u){ee=null;break}if(h!==null){h.return=v,ee=h;break}ee=v}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}ee=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,ee=l;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ei(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,ee=p;break e}ee=i.return}}var m=e.current;for(ee=m;ee!==null;){l=ee;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,ee=y;else e:for(l=m;ee!==null;){if(o=ee,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:wo(9,o)}}catch(k){Ke(o,o.return,k)}if(o===l){ee=null;break e}var j=o.sibling;if(j!==null){j.return=o.return,ee=j;break e}ee=o.return}}if(we=a,qr(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(mo,e)}catch{}n=!0}return n}finally{Ee=s,ts.transition=t}}return!1}function um(e,t,s){t=ya(s,t),t=mx(e,t,1),e=Nr(e,t,1),t=kt(),e!==null&&(zi(e,1,t),$t(e,t))}function Ke(e,t,s){if(e.tag===3)um(e,e,s);else for(;t!==null;){if(t.tag===3){um(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kr===null||!kr.has(n))){e=ya(s,e),e=fx(t,e,1),t=Nr(t,e,1),e=kt(),t!==null&&(zi(t,1,e),$t(t,e));break}}t=t.return}}function f0(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=kt(),e.pingedLanes|=e.suspendedLanes&s,lt===e&&(ht&s)===s&&(nt===4||nt===3&&(ht&130023424)===ht&&500>He()-Od?on(e,0):Rd|=s),$t(e,t)}function Ix(e,t){t===0&&(e.mode&1?(t=el,el<<=1,!(el&130023424)&&(el=4194304)):t=1);var s=kt();e=Vs(e,t),e!==null&&(zi(e,t,s),$t(e,s))}function p0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ix(e,s)}function x0(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(t),Ix(e,s)}var $x;$x=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||At.current)Ot=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Ot=!1,r0(e,t,s);Ot=!!(e.flags&131072)}else Ot=!1,$e&&t.flags&1048576&&Dp(t,Kl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Cl(e,t),e=t.pendingProps;var a=fa(t,yt.current);Jn(t,s),a=kd(null,t,n,e,a,s);var i=Sd();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(n)?(i=!0,zl(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,jd(t),a.updater=jo,t.stateNode=a,a._reactInternals=t,tu(t,n,e,s),t=nu(null,t,n,!0,i,s)):(t.tag=0,$e&&i&&md(t),bt(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Cl(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=y0(n),e=cs(n,e),a){case 0:t=ru(null,t,n,e,s);break e;case 1:t=em(null,t,n,e,s);break e;case 11:t=Xh(null,t,n,e,s);break e;case 14:t=Zh(null,t,n,cs(n.type,e),s);break e}throw Error(Q(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),ru(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),em(e,t,n,a,s);case 3:e:{if(yx(t),e===null)throw Error(Q(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Wp(e,t),Hl(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ya(Error(Q(423)),t),t=tm(e,t,n,s,a);break e}else if(n!==a){a=ya(Error(Q(424)),t),t=tm(e,t,n,s,a);break e}else for(Bt=br(t.stateNode.containerInfo.firstChild),Kt=t,$e=!0,ps=null,s=Bp(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(pa(),n===a){t=Hs(e,t,s);break e}bt(e,t,n,s)}t=t.child}return t;case 5:return Vp(t),e===null&&Xc(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,l=a.children,Hc(n,a)?l=null:i!==null&&Hc(n,i)&&(t.flags|=32),gx(e,t),bt(e,t,l,s),t.child;case 6:return e===null&&Xc(t),null;case 13:return vx(e,t,s);case 4:return wd(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=xa(t,null,n,s):bt(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),Xh(e,t,n,a,s);case 7:return bt(e,t,t.pendingProps,s),t.child;case 8:return bt(e,t,t.pendingProps.children,s),t.child;case 12:return bt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Te(Wl,n._currentValue),n._currentValue=l,i!==null)if(vs(i.value,l)){if(i.children===a.children&&!At.current){t=Hs(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var o=i.dependencies;if(o!==null){l=i.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=zs(-1,s&-s),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Zc(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(Q(341));l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),Zc(l,s,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}bt(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Jn(t,s),a=ss(a),n=n(a),t.flags|=1,bt(e,t,n,s),t.child;case 14:return n=t.type,a=cs(n,t.pendingProps),a=cs(n.type,a),Zh(e,t,n,a,s);case 15:return px(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:cs(n,a),Cl(e,t),t.tag=1,It(n)?(e=!0,zl(t)):e=!1,Jn(t,s),hx(t,n,a),tu(t,n,a,s),nu(null,t,n,!0,e,s);case 19:return jx(e,t,s);case 22:return xx(e,t,s)}throw Error(Q(156,t.tag))};function qx(e,t){return cp(e,t)}function g0(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function es(e,t,s,n){return new g0(e,t,s,n)}function qd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y0(e){if(typeof e=="function")return qd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===td)return 11;if(e===sd)return 14}return 2}function Cr(e,t){var s=e.alternate;return s===null?(s=es(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Tl(e,t,s,n,a,i){var l=2;if(n=e,typeof e=="function")qd(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case In:return cn(s.children,a,i,t);case ed:l=8,a|=8;break;case kc:return e=es(12,s,t,a|2),e.elementType=kc,e.lanes=i,e;case Sc:return e=es(13,s,t,a),e.elementType=Sc,e.lanes=i,e;case Cc:return e=es(19,s,t,a),e.elementType=Cc,e.lanes=i,e;case Vf:return bo(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kf:l=10;break e;case Wf:l=9;break e;case td:l=11;break e;case sd:l=14;break e;case sr:l=16,n=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=es(l,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function cn(e,t,s,n){return e=es(7,e,n,t),e.lanes=s,e}function bo(e,t,s,n){return e=es(22,e,n,t),e.elementType=Vf,e.lanes=s,e.stateNode={isHidden:!1},e}function oc(e,t,s){return e=es(6,e,null,t),e.lanes=s,e}function cc(e,t,s){return t=es(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function v0(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Md(e,t,s,n,a,i,l,o,c){return e=new v0(e,t,s,o,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=es(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},jd(i),e}function j0(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:An,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Mx(e){if(!e)return Rr;e=e._reactInternals;e:{if(yn(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var s=e.type;if(It(s))return Mp(e,s,t)}return t}function Lx(e,t,s,n,a,i,l,o,c){return e=Md(s,n,!0,e,a,i,l,o,c),e.context=Mx(null),s=e.current,n=kt(),a=Sr(s),i=zs(n,a),i.callback=t??null,Nr(s,i,a),e.current.lanes=a,zi(e,a,n),$t(e,n),e}function No(e,t,s,n){var a=t.current,i=kt(),l=Sr(a);return s=Mx(s),t.context===null?t.context=s:t.pendingContext=s,t=zs(i,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Nr(a,t,l),e!==null&&(gs(e,a,l,i),Nl(e,a,l)),l}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Ld(e,t){dm(e,t),(e=e.alternate)&&dm(e,t)}function w0(){return null}var Dx=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dd(e){this._internalRoot=e}ko.prototype.render=Dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));No(e,t,null,null)};ko.prototype.unmount=Dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fn(function(){No(null,e,null,null)}),t[Ws]=null}};function ko(e){this._internalRoot=e}ko.prototype.unstable_scheduleHydration=function(e){if(e){var t=xp();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ar.length&&t!==0&&t<ar[s].priority;s++);ar.splice(s,0,e),s===0&&yp(e)}};function Fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hm(){}function _0(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=to(l);i.call(u)}}var l=Lx(t,n,e,0,null,!1,!1,"",hm);return e._reactRootContainer=l,e[Ws]=l.current,mi(e.nodeType===8?e.parentNode:e),fn(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var u=to(c);o.call(u)}}var c=Md(e,0,!1,null,null,!1,!1,"",hm);return e._reactRootContainer=c,e[Ws]=c.current,mi(e.nodeType===8?e.parentNode:e),fn(function(){No(t,c,s,n)}),c}function Co(e,t,s,n,a){var i=s._reactRootContainer;if(i){var l=i;if(typeof a=="function"){var o=a;a=function(){var c=to(l);o.call(c)}}No(t,l,e,a)}else l=_0(s,t,e,a,n);return to(l)}fp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=za(t.pendingLanes);s!==0&&(ad(t,s|1),$t(t,He()),!(we&6)&&(va=He()+500,qr()))}break;case 13:fn(function(){var n=Vs(e,1);if(n!==null){var a=kt();gs(n,e,1,a)}}),Ld(e,1)}};id=function(e){if(e.tag===13){var t=Vs(e,134217728);if(t!==null){var s=kt();gs(t,e,134217728,s)}Ld(e,134217728)}};pp=function(e){if(e.tag===13){var t=Sr(e),s=Vs(e,t);if(s!==null){var n=kt();gs(s,e,t,n)}Ld(e,t)}};xp=function(){return Ee};gp=function(e,t){var s=Ee;try{return Ee=e,t()}finally{Ee=s}};Mc=function(e,t,s){switch(t){case"input":if(Tc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=go(n);if(!a)throw Error(Q(90));Qf(n),Tc(n,a)}}}break;case"textarea":Jf(e,s);break;case"select":t=s.value,t!=null&&Vn(e,!!s.multiple,t,!1)}};rp=Ad;np=fn;var b0={usingClientEntryPoint:!1,Events:[Ki,Ln,go,tp,sp,Ad]},Ma={findFiberByHostInstance:Hr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},N0={bundleType:Ma.bundleType,version:Ma.version,rendererPackageName:Ma.rendererPackageName,rendererConfig:Ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ma.findFiberByHostInstance||w0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dl.isDisabled&&dl.supportsFiber)try{mo=dl.inject(N0),Cs=dl}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b0;Vt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fd(t))throw Error(Q(200));return j0(e,t,null,s)};Vt.createRoot=function(e,t){if(!Fd(e))throw Error(Q(299));var s=!1,n="",a=Dx;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Md(e,1,!1,null,null,s,!1,n,a),e[Ws]=t.current,mi(e.nodeType===8?e.parentNode:e),new Dd(t)};Vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=lp(t),e=e===null?null:e.stateNode,e};Vt.flushSync=function(e){return fn(e)};Vt.hydrate=function(e,t,s){if(!So(t))throw Error(Q(200));return Co(null,e,t,!0,s)};Vt.hydrateRoot=function(e,t,s){if(!Fd(e))throw Error(Q(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",l=Dx;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=Lx(t,null,e,1,s??null,a,!1,i,l),e[Ws]=t.current,mi(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new ko(t)};Vt.render=function(e,t,s){if(!So(t))throw Error(Q(200));return Co(null,e,t,!1,s)};Vt.unmountComponentAtNode=function(e){if(!So(e))throw Error(Q(40));return e._reactRootContainer?(fn(function(){Co(null,null,e,!1,function(){e._reactRootContainer=null,e[Ws]=null})}),!0):!1};Vt.unstable_batchedUpdates=Ad;Vt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!So(s))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Co(e,t,s,!1,n)};Vt.version="18.3.1-next-f1338f8080-20240426";function Fx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fx)}catch(e){console.error(e)}}Fx(),Ff.exports=Vt;var Ux=Ff.exports,mm=Ux;bc.createRoot=mm.createRoot,bc.hydrateRoot=mm.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _i(){return _i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},_i.apply(this,arguments)}var vr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(vr||(vr={}));const fm="popstate";function k0(e){e===void 0&&(e={});function t(a,i){let{pathname:l="/",search:o="",hash:c=""}=vn(a.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),xu("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(a,i){let l=a.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof i=="string"?i:so(i))}function n(a,i){Eo(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return C0(t,s,n,e)}function Qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Eo(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function S0(){return Math.random().toString(36).substr(2,8)}function pm(e,t){return{usr:e.state,key:e.key,idx:t}}function xu(e,t,s,n){return s===void 0&&(s=null),_i({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vn(t):t,{state:s,key:t&&t.key||n||S0()})}function so(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function vn(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function C0(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o=vr.Pop,c=null,u=d();u==null&&(u=0,l.replaceState(_i({},l.state,{idx:u}),""));function d(){return(l.state||{idx:null}).idx}function f(){o=vr.Pop;let _=d(),p=_==null?null:_-u;u=_,c&&c({action:o,location:w.location,delta:p})}function h(_,p){o=vr.Push;let m=xu(w.location,_,p);s&&s(m,_),u=d()+1;let y=pm(m,u),j=w.createHref(m);try{l.pushState(y,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}i&&c&&c({action:o,location:w.location,delta:1})}function v(_,p){o=vr.Replace;let m=xu(w.location,_,p);s&&s(m,_),u=d();let y=pm(m,u),j=w.createHref(m);l.replaceState(y,"",j),i&&c&&c({action:o,location:w.location,delta:0})}function g(_){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof _=="string"?_:so(_);return m=m.replace(/ $/,"%20"),Qe(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let w={get action(){return o},get location(){return e(a,l)},listen(_){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fm,f),c=_,()=>{a.removeEventListener(fm,f),c=null}},createHref(_){return t(a,_)},createURL:g,encodeLocation(_){let p=g(_);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:v,go(_){return l.go(_)}};return w}var xm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xm||(xm={}));function E0(e,t,s){return s===void 0&&(s="/"),P0(e,t,s)}function P0(e,t,s,n){let a=typeof t=="string"?vn(t):t,i=Ud(a.pathname||"/",s);if(i==null)return null;let l=zx(e);T0(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=z0(i);o=D0(l[c],u)}return o}function zx(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,l,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Er([n,c.relativePath]),d=s.concat(c);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zx(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:M0(u,i.index),routesMeta:d})};return e.forEach((i,l)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))a(i,l);else for(let c of Bx(i.path))a(i,l,c)}),t}function Bx(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=Bx(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function T0(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:L0(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const R0=/^:[\w-]+$/,O0=3,A0=2,I0=1,$0=10,q0=-2,gm=e=>e==="*";function M0(e,t){let s=e.split("/"),n=s.length;return s.some(gm)&&(n+=q0),t&&(n+=A0),s.filter(a=>!gm(a)).reduce((a,i)=>a+(R0.test(i)?O0:i===""?I0:$0),n)}function L0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function D0(e,t,s){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=F0({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(a,f.params),l.push({params:a,pathname:Er([i,f.pathname]),pathnameBase:H0(Er([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=Er([i,f.pathnameBase]))}return l}function F0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=U0(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:v}=d;if(h==="*"){let w=o[f]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const g=o[f];return v&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function U0(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Eo(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function z0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Eo(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ud(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const B0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K0=e=>B0.test(e);function W0(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?vn(e):e,i;if(s)if(K0(s))i=s;else{if(s.includes("//")){let l=s;s=s.replace(/\/\/+/g,"/"),Eo(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+s))}s.startsWith("/")?i=ym(s.substring(1),"/"):i=ym(s,t)}else i=t;return{pathname:i,search:Q0(n),hash:G0(a)}}function ym(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function uc(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V0(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function zd(e,t){let s=V0(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Bd(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=vn(e):(a=_i({},e),Qe(!a.pathname||!a.pathname.includes("?"),uc("?","pathname","search",a)),Qe(!a.pathname||!a.pathname.includes("#"),uc("#","pathname","hash",a)),Qe(!a.search||!a.search.includes("#"),uc("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=s;else{let f=t.length-1;if(!n&&l.startsWith("..")){let h=l.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=W0(a,o),u=l&&l!=="/"&&l.endsWith("/"),d=(i||l===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Er=e=>e.join("/").replace(/\/\/+/g,"/"),H0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Q0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,G0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function J0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Kx=["post","put","patch","delete"];new Set(Kx);const Y0=["get",...Kx];new Set(Y0);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},bi.apply(this,arguments)}const Kd=C.createContext(null),X0=C.createContext(null),Mr=C.createContext(null),Po=C.createContext(null),Gs=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Wx=C.createContext(null);function Z0(e,t){let{relative:s}=t===void 0?{}:t;ka()||Qe(!1);let{basename:n,navigator:a}=C.useContext(Mr),{hash:i,pathname:l,search:o}=Hx(e,{relative:s}),c=l;return n!=="/"&&(c=l==="/"?n:Er([n,l])),a.createHref({pathname:c,search:o,hash:i})}function ka(){return C.useContext(Po)!=null}function Sa(){return ka()||Qe(!1),C.useContext(Po).location}function Vx(e){C.useContext(Mr).static||C.useLayoutEffect(e)}function jn(){let{isDataRoute:e}=C.useContext(Gs);return e?fj():ej()}function ej(){ka()||Qe(!1);let e=C.useContext(Kd),{basename:t,future:s,navigator:n}=C.useContext(Mr),{matches:a}=C.useContext(Gs),{pathname:i}=Sa(),l=JSON.stringify(zd(a,s.v7_relativeSplatPath)),o=C.useRef(!1);return Vx(()=>{o.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Bd(u,JSON.parse(l),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Er([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,l,i,e])}const tj=C.createContext(null);function sj(e){let t=C.useContext(Gs).outlet;return t&&C.createElement(tj.Provider,{value:e},t)}function Hx(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=C.useContext(Mr),{matches:a}=C.useContext(Gs),{pathname:i}=Sa(),l=JSON.stringify(zd(a,n.v7_relativeSplatPath));return C.useMemo(()=>Bd(e,JSON.parse(l),i,s==="path"),[e,l,i,s])}function rj(e,t){return nj(e,t)}function nj(e,t,s,n){ka()||Qe(!1);let{navigator:a}=C.useContext(Mr),{matches:i}=C.useContext(Gs),l=i[i.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Sa(),d;if(t){var f;let _=typeof t=="string"?vn(t):t;c==="/"||(f=_.pathname)!=null&&f.startsWith(c)||Qe(!1),d=_}else d=u;let h=d.pathname||"/",v=h;if(c!=="/"){let _=c.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=E0(e,{pathname:v}),w=cj(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:Er([c,a.encodeLocation?a.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Er([c,a.encodeLocation?a.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),i,s,n);return t&&w?C.createElement(Po.Provider,{value:{location:bi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vr.Pop}},w):w}function aj(){let e=mj(),t=J0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),s?C.createElement("pre",{style:a},s):null,null)}const ij=C.createElement(aj,null);class lj extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?C.createElement(Gs.Provider,{value:this.props.routeContext},C.createElement(Wx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oj(e){let{routeContext:t,match:s,children:n}=e,a=C.useContext(Kd);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),C.createElement(Gs.Provider,{value:t},n)}function cj(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,o=(a=s)==null?void 0:a.errors;if(o!=null){let d=l.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);d>=0||Qe(!1),l=l.slice(0,Math.min(l.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<l.length;d++){let f=l[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:v}=s,g=f.route.loader&&h[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((d,f,h)=>{let v,g=!1,w=null,_=null;s&&(v=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||ij,c&&(u<0&&h===0?(pj("route-fallback"),g=!0,_=null):u===h&&(g=!0,_=f.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,h+1)),m=()=>{let y;return v?y=w:g?y=_:f.route.Component?y=C.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,C.createElement(oj,{match:f,routeContext:{outlet:d,matches:p,isDataRoute:s!=null},children:y})};return s&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?C.createElement(lj,{location:s.location,revalidation:s.revalidation,component:w,error:v,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Qx=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qx||{}),Gx=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gx||{});function uj(e){let t=C.useContext(Kd);return t||Qe(!1),t}function dj(e){let t=C.useContext(X0);return t||Qe(!1),t}function hj(e){let t=C.useContext(Gs);return t||Qe(!1),t}function Jx(e){let t=hj(),s=t.matches[t.matches.length-1];return s.route.id||Qe(!1),s.route.id}function mj(){var e;let t=C.useContext(Wx),s=dj(),n=Jx();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function fj(){let{router:e}=uj(Qx.UseNavigateStable),t=Jx(Gx.UseNavigateStable),s=C.useRef(!1);return Vx(()=>{s.current=!0}),C.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,bi({fromRouteId:t},i)))},[e,t])}const vm={};function pj(e,t,s){vm[e]||(vm[e]=!0)}function xj(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yx(e){let{to:t,replace:s,state:n,relative:a}=e;ka()||Qe(!1);let{future:i,static:l}=C.useContext(Mr),{matches:o}=C.useContext(Gs),{pathname:c}=Sa(),u=jn(),d=Bd(t,zd(o,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return C.useEffect(()=>u(JSON.parse(f),{replace:s,state:n,relative:a}),[u,f,a,s,n]),null}function gj(e){return sj(e.context)}function Ue(e){Qe(!1)}function yj(e){let{basename:t="/",children:s=null,location:n,navigationType:a=vr.Pop,navigator:i,static:l=!1,future:o}=e;ka()&&Qe(!1);let c=t.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:i,static:l,future:bi({v7_relativeSplatPath:!1},o)}),[c,o,i,l]);typeof n=="string"&&(n=vn(n));let{pathname:d="/",search:f="",hash:h="",state:v=null,key:g="default"}=n,w=C.useMemo(()=>{let _=Ud(d,c);return _==null?null:{location:{pathname:_,search:f,hash:h,state:v,key:g},navigationType:a}},[c,d,f,h,v,g,a]);return w==null?null:C.createElement(Mr.Provider,{value:u},C.createElement(Po.Provider,{children:s,value:w}))}function vj(e){let{children:t,location:s}=e;return rj(gu(t),s)}new Promise(()=>{});function gu(e,t){t===void 0&&(t=[]);let s=[];return C.Children.forEach(e,(n,a)=>{if(!C.isValidElement(n))return;let i=[...t,a];if(n.type===C.Fragment){s.push.apply(s,gu(n.props.children,i));return}n.type!==Ue&&Qe(!1),!n.props.index||!n.props.children||Qe(!1);let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=gu(n.props.children,i)),s.push(l)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yu(){return yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},yu.apply(this,arguments)}function jj(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function wj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _j(e,t){return e.button===0&&(!t||t==="_self")&&!wj(e)}const bj=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Nj="6";try{window.__reactRouterVersion=Nj}catch{}const kj="startTransition",jm=Lf[kj];function Sj(e){let{basename:t,children:s,future:n,window:a}=e,i=C.useRef();i.current==null&&(i.current=k0({window:a,v5Compat:!0}));let l=i.current,[o,c]=C.useState({action:l.action,location:l.location}),{v7_startTransition:u}=n||{},d=C.useCallback(f=>{u&&jm?jm(()=>c(f)):c(f)},[c,u]);return C.useLayoutEffect(()=>l.listen(d),[l,d]),C.useEffect(()=>xj(n),[n]),C.createElement(yj,{basename:t,children:s,location:o.location,navigationType:o.action,navigator:l,future:n})}const Cj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ej=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pj=C.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=jj(t,bj),{basename:v}=C.useContext(Mr),g,w=!1;if(typeof u=="string"&&Ej.test(u)&&(g=u,Cj))try{let y=new URL(window.location.href),j=u.startsWith("//")?new URL(y.protocol+u):new URL(u),k=Ud(j.pathname,v);j.origin===y.origin&&k!=null?u=k+j.search+j.hash:w=!0}catch{}let _=Z0(u,{relative:a}),p=Tj(u,{replace:l,state:o,target:c,preventScrollReset:d,relative:a,viewTransition:f});function m(y){n&&n(y),y.defaultPrevented||p(y)}return C.createElement("a",yu({},h,{href:g||_,onClick:w||i?n:m,ref:s,target:c}))});var wm;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wm||(wm={}));var _m;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(_m||(_m={}));function Tj(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=t===void 0?{}:t,c=jn(),u=Sa(),d=Hx(e,{relative:l});return C.useCallback(f=>{if(_j(f,s)){f.preventDefault();let h=n!==void 0?n:so(u)===so(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[u,c,d,n,a,s,e,i,l,o])}var Ca=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rj={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},or,Vu,xf,Oj=(xf=class{constructor(){ae(this,or,Rj);ae(this,Vu,!1)}setTimeoutProvider(e){Y(this,or,e)}setTimeout(e,t){return E(this,or).setTimeout(e,t)}clearTimeout(e){E(this,or).clearTimeout(e)}setInterval(e,t){return E(this,or).setInterval(e,t)}clearInterval(e){E(this,or).clearInterval(e)}},or=new WeakMap,Vu=new WeakMap,xf),Jr=new Oj;function Aj(e){setTimeout(e,0)}var pn=typeof window>"u"||"Deno"in globalThis;function Nt(){}function Ij(e,t){return typeof e=="function"?e(t):e}function vu(e){return typeof e=="number"&&e>=0&&e!==1/0}function Xx(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Pr(e,t){return typeof e=="function"?e(t):e}function Yt(e,t){return typeof e=="function"?e(t):e}function bm(e,t){const{type:s="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==Wd(l,t.options))return!1}else if(!Ni(t.queryKey,l))return!1}if(s!=="all"){const c=t.isActive();if(s==="active"&&!c||s==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function Nm(e,t){const{exact:s,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(xn(t.options.mutationKey)!==xn(i))return!1}else if(!Ni(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Wd(e,t){return((t==null?void 0:t.queryKeyHashFn)||xn)(e)}function xn(e){return JSON.stringify(e,(t,s)=>ju(s)?Object.keys(s).sort().reduce((n,a)=>(n[a]=s[a],n),{}):s)}function Ni(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>Ni(e[s],t[s])):!1}var $j=Object.prototype.hasOwnProperty;function Zx(e,t){if(e===t)return e;const s=km(e)&&km(t);if(!s&&!(ju(e)&&ju(t)))return t;const a=(s?e:Object.keys(e)).length,i=s?t:Object.keys(t),l=i.length,o=s?new Array(l):{};let c=0;for(let u=0;u<l;u++){const d=s?u:i[u],f=e[d],h=t[d];if(f===h){o[d]=f,(s?u<a:$j.call(e,d))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){o[d]=h;continue}const v=Zx(f,h);o[d]=v,v===f&&c++}return a===l&&c===a?e:o}function ro(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function km(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ju(e){if(!Sm(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!Sm(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Sm(e){return Object.prototype.toString.call(e)==="[object Object]"}function qj(e){return new Promise(t=>{Jr.setTimeout(t,e)})}function wu(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Zx(e,t):t}function Mj(e,t,s=0){const n=[...e,t];return s&&n.length>s?n.slice(1):n}function Lj(e,t,s=0){const n=[t,...e];return s&&n.length>s?n.slice(0,-1):n}var Vd=Symbol();function eg(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Vd?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function tg(e,t){return typeof e=="function"?e(...t):!!e}var Xr,cr,ta,gf,Dj=(gf=class extends Ca{constructor(){super();ae(this,Xr);ae(this,cr);ae(this,ta);Y(this,ta,t=>{if(!pn&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){E(this,cr)||this.setEventListener(E(this,ta))}onUnsubscribe(){var t;this.hasListeners()||((t=E(this,cr))==null||t.call(this),Y(this,cr,void 0))}setEventListener(t){var s;Y(this,ta,t),(s=E(this,cr))==null||s.call(this),Y(this,cr,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){E(this,Xr)!==t&&(Y(this,Xr,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof E(this,Xr)=="boolean"?E(this,Xr):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Xr=new WeakMap,cr=new WeakMap,ta=new WeakMap,gf),Hd=new Dj;function _u(){let e,t;const s=new Promise((a,i)=>{e=a,t=i});s.status="pending",s.catch(()=>{});function n(a){Object.assign(s,a),delete s.resolve,delete s.reject}return s.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},s.reject=a=>{n({status:"rejected",reason:a}),t(a)},s}var Fj=Aj;function Uj(){let e=[],t=0,s=o=>{o()},n=o=>{o()},a=Fj;const i=o=>{t?e.push(o):a(()=>{s(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{s(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{s=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var rt=Uj(),sa,ur,ra,yf,zj=(yf=class extends Ca{constructor(){super();ae(this,sa,!0);ae(this,ur);ae(this,ra);Y(this,ra,t=>{if(!pn&&window.addEventListener){const s=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){E(this,ur)||this.setEventListener(E(this,ra))}onUnsubscribe(){var t;this.hasListeners()||((t=E(this,ur))==null||t.call(this),Y(this,ur,void 0))}setEventListener(t){var s;Y(this,ra,t),(s=E(this,ur))==null||s.call(this),Y(this,ur,t(this.setOnline.bind(this)))}setOnline(t){E(this,sa)!==t&&(Y(this,sa,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return E(this,sa)}},sa=new WeakMap,ur=new WeakMap,ra=new WeakMap,yf),no=new zj;function Bj(e){return Math.min(1e3*2**e,3e4)}function sg(e){return(e??"online")==="online"?no.isOnline():!0}var bu=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function rg(e){let t=!1,s=0,n;const a=_u(),i=()=>a.status!=="pending",l=w=>{var _;if(!i()){const p=new bu(w);h(p),(_=e.onCancel)==null||_.call(e,p)}},o=()=>{t=!0},c=()=>{t=!1},u=()=>Hd.isFocused()&&(e.networkMode==="always"||no.isOnline())&&e.canRun(),d=()=>sg(e.networkMode)&&e.canRun(),f=w=>{i()||(n==null||n(),a.resolve(w))},h=w=>{i()||(n==null||n(),a.reject(w))},v=()=>new Promise(w=>{var _;n=p=>{(i()||u())&&w(p)},(_=e.onPause)==null||_.call(e)}).then(()=>{var w;n=void 0,i()||(w=e.onContinue)==null||w.call(e)}),g=()=>{if(i())return;let w;const _=s===0?e.initialPromise:void 0;try{w=_??e.fn()}catch(p){w=Promise.reject(p)}Promise.resolve(w).then(f).catch(p=>{var N;if(i())return;const m=e.retry??(pn?0:3),y=e.retryDelay??Bj,j=typeof y=="function"?y(s,p):y,k=m===!0||typeof m=="number"&&s<m||typeof m=="function"&&m(s,p);if(t||!k){h(p);return}s++,(N=e.onFail)==null||N.call(e,s,p),qj(j).then(()=>u()?void 0:v()).then(()=>{t?h(p):g()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?g():v().then(g),a)}}var Zr,vf,ng=(vf=class{constructor(){ae(this,Zr)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),vu(this.gcTime)&&Y(this,Zr,Jr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(pn?1/0:5*60*1e3))}clearGcTimeout(){E(this,Zr)&&(Jr.clearTimeout(E(this,Zr)),Y(this,Zr,void 0))}},Zr=new WeakMap,vf),en,na,Jt,tn,at,qi,sn,ds,Os,jf,Kj=(jf=class extends ng{constructor(t){super();ae(this,ds);ae(this,en);ae(this,na);ae(this,Jt);ae(this,tn);ae(this,at);ae(this,qi);ae(this,sn);Y(this,sn,!1),Y(this,qi,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,tn,t.client),Y(this,Jt,E(this,tn).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,en,Em(this.options)),this.state=t.state??E(this,en),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=E(this,at))==null?void 0:t.promise}setOptions(t){if(this.options={...E(this,qi),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=Em(this.options);s.data!==void 0&&(this.setState(Cm(s.data,s.dataUpdatedAt)),Y(this,en,s))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&E(this,Jt).remove(this)}setData(t,s){const n=wu(this.state.data,t,this.options);return xe(this,ds,Os).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(t,s){xe(this,ds,Os).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var n,a;const s=(n=E(this,at))==null?void 0:n.promise;return(a=E(this,at))==null||a.cancel(t),s?s.then(Nt).catch(Nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(E(this,en))}isActive(){return this.observers.some(t=>Yt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vd||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Pr(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Xx(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=E(this,at))==null||s.continue()}onOnline(){var s;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=E(this,at))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),E(this,Jt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(E(this,at)&&(E(this,sn)?E(this,at).cancel({revert:!0}):E(this,at).cancelRetry()),this.scheduleGc()),E(this,Jt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xe(this,ds,Os).call(this,{type:"invalidate"})}async fetch(t,s){var c,u,d,f,h,v,g,w,_,p,m,y;if(this.state.fetchStatus!=="idle"&&((c=E(this,at))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(E(this,at))return E(this,at).continueRetry(),E(this,at).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(k=>k.options.queryFn);j&&this.setOptions(j.options)}const n=new AbortController,a=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Y(this,sn,!0),n.signal)})},i=()=>{const j=eg(this.options,s),N=(()=>{const R={client:E(this,tn),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return Y(this,sn,!1),this.options.persister?this.options.persister(j,N,this):j(N)},o=(()=>{const j={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:E(this,tn),state:this.state,fetchFn:i};return a(j),j})();(u=this.options.behavior)==null||u.onFetch(o,this),Y(this,na,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&xe(this,ds,Os).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta}),Y(this,at,rg({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,onCancel:j=>{j instanceof bu&&j.revert&&this.setState({...E(this,na),fetchStatus:"idle"}),n.abort()},onFail:(j,k)=>{xe(this,ds,Os).call(this,{type:"failed",failureCount:j,error:k})},onPause:()=>{xe(this,ds,Os).call(this,{type:"pause"})},onContinue:()=>{xe(this,ds,Os).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const j=await E(this,at).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(v=(h=E(this,Jt).config).onSuccess)==null||v.call(h,j,this),(w=(g=E(this,Jt).config).onSettled)==null||w.call(g,j,this.state.error,this),j}catch(j){if(j instanceof bu){if(j.silent)return E(this,at).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw xe(this,ds,Os).call(this,{type:"error",error:j}),(p=(_=E(this,Jt).config).onError)==null||p.call(_,j,this),(y=(m=E(this,Jt).config).onSettled)==null||y.call(m,this.state.data,j,this),j}finally{this.scheduleGc()}}},en=new WeakMap,na=new WeakMap,Jt=new WeakMap,tn=new WeakMap,at=new WeakMap,qi=new WeakMap,sn=new WeakMap,ds=new WeakSet,Os=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ag(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...Cm(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Y(this,na,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),rt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),E(this,Jt).notify({query:this,type:"updated",action:t})})},jf);function ag(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sg(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Cm(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Em(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,n=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Pt,ve,Mi,wt,rn,aa,qs,dr,Li,ia,la,nn,an,hr,oa,ke,Ka,Nu,ku,Su,Cu,Eu,Pu,Tu,ig,wf,Wj=(wf=class extends Ca{constructor(t,s){super();ae(this,ke);ae(this,Pt);ae(this,ve);ae(this,Mi);ae(this,wt);ae(this,rn);ae(this,aa);ae(this,qs);ae(this,dr);ae(this,Li);ae(this,ia);ae(this,la);ae(this,nn);ae(this,an);ae(this,hr);ae(this,oa,new Set);this.options=s,Y(this,Pt,t),Y(this,dr,null),Y(this,qs,_u()),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(E(this,ve).addObserver(this),Pm(E(this,ve),this.options)?xe(this,ke,Ka).call(this):this.updateResult(),xe(this,ke,Cu).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ru(E(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ru(E(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,xe(this,ke,Eu).call(this),xe(this,ke,Pu).call(this),E(this,ve).removeObserver(this)}setOptions(t){const s=this.options,n=E(this,ve);if(this.options=E(this,Pt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yt(this.options.enabled,E(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");xe(this,ke,Tu).call(this),E(this,ve).setOptions(this.options),s._defaulted&&!ro(this.options,s)&&E(this,Pt).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,ve),observer:this});const a=this.hasListeners();a&&Tm(E(this,ve),n,this.options,s)&&xe(this,ke,Ka).call(this),this.updateResult(),a&&(E(this,ve)!==n||Yt(this.options.enabled,E(this,ve))!==Yt(s.enabled,E(this,ve))||Pr(this.options.staleTime,E(this,ve))!==Pr(s.staleTime,E(this,ve)))&&xe(this,ke,Nu).call(this);const i=xe(this,ke,ku).call(this);a&&(E(this,ve)!==n||Yt(this.options.enabled,E(this,ve))!==Yt(s.enabled,E(this,ve))||i!==E(this,hr))&&xe(this,ke,Su).call(this,i)}getOptimisticResult(t){const s=E(this,Pt).getQueryCache().build(E(this,Pt),t),n=this.createResult(s,t);return Hj(this,n)&&(Y(this,wt,n),Y(this,aa,this.options),Y(this,rn,E(this,ve).state)),n}getCurrentResult(){return E(this,wt)}trackResult(t,s){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),s==null||s(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&E(this,qs).status==="pending"&&E(this,qs).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){E(this,oa).add(t)}getCurrentQuery(){return E(this,ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=E(this,Pt).defaultQueryOptions(t),n=E(this,Pt).getQueryCache().build(E(this,Pt),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(t){return xe(this,ke,Ka).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),E(this,wt)))}createResult(t,s){var I;const n=E(this,ve),a=this.options,i=E(this,wt),l=E(this,rn),o=E(this,aa),u=t!==n?t.state:E(this,Mi),{state:d}=t;let f={...d},h=!1,v;if(s._optimisticResults){const T=this.hasListeners(),z=!T&&Pm(t,s),W=T&&Tm(t,n,s,a);(z||W)&&(f={...f,...ag(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:w,status:_}=f;v=f.data;let p=!1;if(s.placeholderData!==void 0&&v===void 0&&_==="pending"){let T;i!=null&&i.isPlaceholderData&&s.placeholderData===(o==null?void 0:o.placeholderData)?(T=i.data,p=!0):T=typeof s.placeholderData=="function"?s.placeholderData((I=E(this,la))==null?void 0:I.state.data,E(this,la)):s.placeholderData,T!==void 0&&(_="success",v=wu(i==null?void 0:i.data,T,s),h=!0)}if(s.select&&v!==void 0&&!p)if(i&&v===(l==null?void 0:l.data)&&s.select===E(this,Li))v=E(this,ia);else try{Y(this,Li,s.select),v=s.select(v),v=wu(i==null?void 0:i.data,v,s),Y(this,ia,v),Y(this,dr,null)}catch(T){Y(this,dr,T)}E(this,dr)&&(g=E(this,dr),v=E(this,ia),w=Date.now(),_="error");const m=f.fetchStatus==="fetching",y=_==="pending",j=_==="error",k=y&&m,N=v!==void 0,x={status:_,fetchStatus:f.fetchStatus,isPending:y,isSuccess:_==="success",isError:j,isInitialLoading:k,isLoading:k,data:v,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:m,isRefetching:m&&!y,isLoadingError:j&&!N,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:j&&N,isStale:Qd(t,s),refetch:this.refetch,promise:E(this,qs),isEnabled:Yt(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=X=>{x.status==="error"?X.reject(x.error):x.data!==void 0&&X.resolve(x.data)},z=()=>{const X=Y(this,qs,x.promise=_u());T(X)},W=E(this,qs);switch(W.status){case"pending":t.queryHash===n.queryHash&&T(W);break;case"fulfilled":(x.status==="error"||x.data!==W.value)&&z();break;case"rejected":(x.status!=="error"||x.error!==W.reason)&&z();break}}return x}updateResult(){const t=E(this,wt),s=this.createResult(E(this,ve),this.options);if(Y(this,rn,E(this,ve).state),Y(this,aa,this.options),E(this,rn).data!==void 0&&Y(this,la,E(this,ve)),ro(s,t))return;Y(this,wt,s);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!E(this,oa).size)return!0;const l=new Set(i??E(this,oa));return this.options.throwOnError&&l.add("error"),Object.keys(E(this,wt)).some(o=>{const c=o;return E(this,wt)[c]!==t[c]&&l.has(c)})};xe(this,ke,ig).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&xe(this,ke,Cu).call(this)}},Pt=new WeakMap,ve=new WeakMap,Mi=new WeakMap,wt=new WeakMap,rn=new WeakMap,aa=new WeakMap,qs=new WeakMap,dr=new WeakMap,Li=new WeakMap,ia=new WeakMap,la=new WeakMap,nn=new WeakMap,an=new WeakMap,hr=new WeakMap,oa=new WeakMap,ke=new WeakSet,Ka=function(t){xe(this,ke,Tu).call(this);let s=E(this,ve).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(Nt)),s},Nu=function(){xe(this,ke,Eu).call(this);const t=Pr(this.options.staleTime,E(this,ve));if(pn||E(this,wt).isStale||!vu(t))return;const n=Xx(E(this,wt).dataUpdatedAt,t)+1;Y(this,nn,Jr.setTimeout(()=>{E(this,wt).isStale||this.updateResult()},n))},ku=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(E(this,ve)):this.options.refetchInterval)??!1},Su=function(t){xe(this,ke,Pu).call(this),Y(this,hr,t),!(pn||Yt(this.options.enabled,E(this,ve))===!1||!vu(E(this,hr))||E(this,hr)===0)&&Y(this,an,Jr.setInterval(()=>{(this.options.refetchIntervalInBackground||Hd.isFocused())&&xe(this,ke,Ka).call(this)},E(this,hr)))},Cu=function(){xe(this,ke,Nu).call(this),xe(this,ke,Su).call(this,xe(this,ke,ku).call(this))},Eu=function(){E(this,nn)&&(Jr.clearTimeout(E(this,nn)),Y(this,nn,void 0))},Pu=function(){E(this,an)&&(Jr.clearInterval(E(this,an)),Y(this,an,void 0))},Tu=function(){const t=E(this,Pt).getQueryCache().build(E(this,Pt),this.options);if(t===E(this,ve))return;const s=E(this,ve);Y(this,ve,t),Y(this,Mi,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},ig=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(E(this,wt))}),E(this,Pt).getQueryCache().notify({query:E(this,ve),type:"observerResultsUpdated"})})},wf);function Vj(e,t){return Yt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Pm(e,t){return Vj(e,t)||e.state.data!==void 0&&Ru(e,t,t.refetchOnMount)}function Ru(e,t,s){if(Yt(t.enabled,e)!==!1&&Pr(t.staleTime,e)!=="static"){const n=typeof s=="function"?s(e):s;return n==="always"||n!==!1&&Qd(e,t)}return!1}function Tm(e,t,s,n){return(e!==t||Yt(n.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Qd(e,s)}function Qd(e,t){return Yt(t.enabled,e)!==!1&&e.isStaleByTime(Pr(t.staleTime,e))}function Hj(e,t){return!ro(e.getCurrentResult(),t)}function Rm(e){return{onFetch:(t,s)=>{var d,f,h,v,g;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((v=t.state.data)==null?void 0:v.pages)||[],l=((g=t.state.data)==null?void 0:g.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let w=!1;const _=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},p=eg(t.options,t.fetchOptions),m=async(y,j,k)=>{if(w)return Promise.reject();if(j==null&&y.pages.length)return Promise.resolve(y);const R=(()=>{const z={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return _(z),z})(),x=await p(R),{maxPages:I}=t.options,T=k?Lj:Mj;return{pages:T(y.pages,x,I),pageParams:T(y.pageParams,j,I)}};if(a&&i.length){const y=a==="backward",j=y?Qj:Om,k={pages:i,pageParams:l},N=j(n,k);o=await m(k,N,y)}else{const y=e??i.length;do{const j=c===0?l[0]??n.initialPageParam:Om(n,o);if(c>0&&j==null)break;o=await m(o,j),c++}while(c<y)}return o};t.options.persister?t.fetchFn=()=>{var w,_;return(_=(w=t.options).persister)==null?void 0:_.call(w,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=u}}}function Om(e,{pages:t,pageParams:s}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,s[n],s):void 0}function Qj(e,{pages:t,pageParams:s}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,s[0],s):void 0}var Di,bs,_t,ln,Ns,tr,_f,Gj=(_f=class extends ng{constructor(t){super();ae(this,Ns);ae(this,Di);ae(this,bs);ae(this,_t);ae(this,ln);Y(this,Di,t.client),this.mutationId=t.mutationId,Y(this,_t,t.mutationCache),Y(this,bs,[]),this.state=t.state||lg(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){E(this,bs).includes(t)||(E(this,bs).push(t),this.clearGcTimeout(),E(this,_t).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,bs,E(this,bs).filter(s=>s!==t)),this.scheduleGc(),E(this,_t).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){E(this,bs).length||(this.state.status==="pending"?this.scheduleGc():E(this,_t).remove(this))}continue(){var t;return((t=E(this,ln))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,u,d,f,h,v,g,w,_,p,m,y,j,k,N,R,x,I;const s=()=>{xe(this,Ns,tr).call(this,{type:"continue"})},n={client:E(this,Di),meta:this.options.meta,mutationKey:this.options.mutationKey};Y(this,ln,rg({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(T,z)=>{xe(this,Ns,tr).call(this,{type:"failed",failureCount:T,error:z})},onPause:()=>{xe(this,Ns,tr).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>E(this,_t).canRun(this)}));const a=this.state.status==="pending",i=!E(this,ln).canStart();try{if(a)s();else{xe(this,Ns,tr).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=E(this,_t).config).onMutate)==null?void 0:o.call(l,t,this,n));const z=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));z!==this.state.context&&xe(this,Ns,tr).call(this,{type:"pending",context:z,variables:t,isPaused:i})}const T=await E(this,ln).start();return await((f=(d=E(this,_t).config).onSuccess)==null?void 0:f.call(d,T,t,this.state.context,this,n)),await((v=(h=this.options).onSuccess)==null?void 0:v.call(h,T,t,this.state.context,n)),await((w=(g=E(this,_t).config).onSettled)==null?void 0:w.call(g,T,null,this.state.variables,this.state.context,this,n)),await((p=(_=this.options).onSettled)==null?void 0:p.call(_,T,null,t,this.state.context,n)),xe(this,Ns,tr).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(m=E(this,_t).config).onError)==null?void 0:y.call(m,T,t,this.state.context,this,n)),await((k=(j=this.options).onError)==null?void 0:k.call(j,T,t,this.state.context,n)),await((R=(N=E(this,_t).config).onSettled)==null?void 0:R.call(N,void 0,T,this.state.variables,this.state.context,this,n)),await((I=(x=this.options).onSettled)==null?void 0:I.call(x,void 0,T,t,this.state.context,n)),T}finally{xe(this,Ns,tr).call(this,{type:"error",error:T})}}finally{E(this,_t).runNext(this)}}},Di=new WeakMap,bs=new WeakMap,_t=new WeakMap,ln=new WeakMap,Ns=new WeakSet,tr=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),rt.batch(()=>{E(this,bs).forEach(n=>{n.onMutationUpdate(t)}),E(this,_t).notify({mutation:this,type:"updated",action:t})})},_f);function lg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ms,hs,Fi,bf,Jj=(bf=class extends Ca{constructor(t={}){super();ae(this,Ms);ae(this,hs);ae(this,Fi);this.config=t,Y(this,Ms,new Set),Y(this,hs,new Map),Y(this,Fi,0)}build(t,s,n){const a=new Gj({client:t,mutationCache:this,mutationId:++Qi(this,Fi)._,options:t.defaultMutationOptions(s),state:n});return this.add(a),a}add(t){E(this,Ms).add(t);const s=hl(t);if(typeof s=="string"){const n=E(this,hs).get(s);n?n.push(t):E(this,hs).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(E(this,Ms).delete(t)){const s=hl(t);if(typeof s=="string"){const n=E(this,hs).get(s);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&E(this,hs).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=hl(t);if(typeof s=="string"){const n=E(this,hs).get(s),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const s=hl(t);if(typeof s=="string"){const a=(n=E(this,hs).get(s))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rt.batch(()=>{E(this,Ms).forEach(t=>{this.notify({type:"removed",mutation:t})}),E(this,Ms).clear(),E(this,hs).clear()})}getAll(){return Array.from(E(this,Ms))}find(t){const s={exact:!0,...t};return this.getAll().find(n=>Nm(s,n))}findAll(t={}){return this.getAll().filter(s=>Nm(t,s))}notify(t){rt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return rt.batch(()=>Promise.all(t.map(s=>s.continue().catch(Nt))))}},Ms=new WeakMap,hs=new WeakMap,Fi=new WeakMap,bf);function hl(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ls,mr,Tt,Ds,Bs,Rl,Ou,Nf,Yj=(Nf=class extends Ca{constructor(s,n){super();ae(this,Bs);ae(this,Ls);ae(this,mr);ae(this,Tt);ae(this,Ds);Y(this,Ls,s),this.setOptions(n),this.bindMethods(),xe(this,Bs,Rl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){var a;const n=this.options;this.options=E(this,Ls).defaultMutationOptions(s),ro(this.options,n)||E(this,Ls).getMutationCache().notify({type:"observerOptionsUpdated",mutation:E(this,Tt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&xn(n.mutationKey)!==xn(this.options.mutationKey)?this.reset():((a=E(this,Tt))==null?void 0:a.state.status)==="pending"&&E(this,Tt).setOptions(this.options)}onUnsubscribe(){var s;this.hasListeners()||(s=E(this,Tt))==null||s.removeObserver(this)}onMutationUpdate(s){xe(this,Bs,Rl).call(this),xe(this,Bs,Ou).call(this,s)}getCurrentResult(){return E(this,mr)}reset(){var s;(s=E(this,Tt))==null||s.removeObserver(this),Y(this,Tt,void 0),xe(this,Bs,Rl).call(this),xe(this,Bs,Ou).call(this)}mutate(s,n){var a;return Y(this,Ds,n),(a=E(this,Tt))==null||a.removeObserver(this),Y(this,Tt,E(this,Ls).getMutationCache().build(E(this,Ls),this.options)),E(this,Tt).addObserver(this),E(this,Tt).execute(s)}},Ls=new WeakMap,mr=new WeakMap,Tt=new WeakMap,Ds=new WeakMap,Bs=new WeakSet,Rl=function(){var n;const s=((n=E(this,Tt))==null?void 0:n.state)??lg();Y(this,mr,{...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset})},Ou=function(s){rt.batch(()=>{var n,a,i,l,o,c,u,d;if(E(this,Ds)&&this.hasListeners()){const f=E(this,mr).variables,h=E(this,mr).context,v={client:E(this,Ls),meta:this.options.meta,mutationKey:this.options.mutationKey};(s==null?void 0:s.type)==="success"?((a=(n=E(this,Ds)).onSuccess)==null||a.call(n,s.data,f,h,v),(l=(i=E(this,Ds)).onSettled)==null||l.call(i,s.data,null,f,h,v)):(s==null?void 0:s.type)==="error"&&((c=(o=E(this,Ds)).onError)==null||c.call(o,s.error,f,h,v),(d=(u=E(this,Ds)).onSettled)==null||d.call(u,void 0,s.error,f,h,v))}this.listeners.forEach(f=>{f(E(this,mr))})})},Nf),ks,kf,Xj=(kf=class extends Ca{constructor(t={}){super();ae(this,ks);this.config=t,Y(this,ks,new Map)}build(t,s,n){const a=s.queryKey,i=s.queryHash??Wd(a,s);let l=this.get(i);return l||(l=new Kj({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(s),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){E(this,ks).has(t.queryHash)||(E(this,ks).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=E(this,ks).get(t.queryHash);s&&(t.destroy(),s===t&&E(this,ks).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){rt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return E(this,ks).get(t)}getAll(){return[...E(this,ks).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(n=>bm(s,n))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(n=>bm(t,n)):s}notify(t){rt.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){rt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){rt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ks=new WeakMap,kf),ze,fr,pr,ca,ua,xr,da,ha,Sf,Zj=(Sf=class{constructor(e={}){ae(this,ze);ae(this,fr);ae(this,pr);ae(this,ca);ae(this,ua);ae(this,xr);ae(this,da);ae(this,ha);Y(this,ze,e.queryCache||new Xj),Y(this,fr,e.mutationCache||new Jj),Y(this,pr,e.defaultOptions||{}),Y(this,ca,new Map),Y(this,ua,new Map),Y(this,xr,0)}mount(){Qi(this,xr)._++,E(this,xr)===1&&(Y(this,da,Hd.subscribe(async e=>{e&&(await this.resumePausedMutations(),E(this,ze).onFocus())})),Y(this,ha,no.subscribe(async e=>{e&&(await this.resumePausedMutations(),E(this,ze).onOnline())})))}unmount(){var e,t;Qi(this,xr)._--,E(this,xr)===0&&((e=E(this,da))==null||e.call(this),Y(this,da,void 0),(t=E(this,ha))==null||t.call(this),Y(this,ha,void 0))}isFetching(e){return E(this,ze).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return E(this,fr).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=E(this,ze).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=E(this,ze).build(this,t),n=s.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Pr(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return E(this,ze).findAll(e).map(({queryKey:t,state:s})=>{const n=s.data;return[t,n]})}setQueryData(e,t,s){const n=this.defaultQueryOptions({queryKey:e}),a=E(this,ze).get(n.queryHash),i=a==null?void 0:a.state.data,l=Ij(t,i);if(l!==void 0)return E(this,ze).build(this,n).setData(l,{...s,manual:!0})}setQueriesData(e,t,s){return rt.batch(()=>E(this,ze).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=E(this,ze).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=E(this,ze);rt.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=E(this,ze);return rt.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},n=rt.batch(()=>E(this,ze).findAll(e).map(a=>a.cancel(s)));return Promise.all(n).then(Nt).catch(Nt)}invalidateQueries(e,t={}){return rt.batch(()=>(E(this,ze).findAll(e).forEach(s=>{s.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},n=rt.batch(()=>E(this,ze).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,s);return s.throwOnError||(i=i.catch(Nt)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Nt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=E(this,ze).build(this,t);return s.isStaleByTime(Pr(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nt).catch(Nt)}fetchInfiniteQuery(e){return e.behavior=Rm(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nt).catch(Nt)}ensureInfiniteQueryData(e){return e.behavior=Rm(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return no.isOnline()?E(this,fr).resumePausedMutations():Promise.resolve()}getQueryCache(){return E(this,ze)}getMutationCache(){return E(this,fr)}getDefaultOptions(){return E(this,pr)}setDefaultOptions(e){Y(this,pr,e)}setQueryDefaults(e,t){E(this,ca).set(xn(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...E(this,ca).values()],s={};return t.forEach(n=>{Ni(e,n.queryKey)&&Object.assign(s,n.defaultOptions)}),s}setMutationDefaults(e,t){E(this,ua).set(xn(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...E(this,ua).values()],s={};return t.forEach(n=>{Ni(e,n.mutationKey)&&Object.assign(s,n.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...E(this,pr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Wd(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Vd&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...E(this,pr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){E(this,ze).clear(),E(this,fr).clear()}},ze=new WeakMap,fr=new WeakMap,pr=new WeakMap,ca=new WeakMap,ua=new WeakMap,xr=new WeakMap,da=new WeakMap,ha=new WeakMap,Sf),og=C.createContext(void 0),ot=e=>{const t=C.useContext(og);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ew=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(og.Provider,{value:e,children:t})),cg=C.createContext(!1),tw=()=>C.useContext(cg);cg.Provider;function sw(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var rw=C.createContext(sw()),nw=()=>C.useContext(rw),aw=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},iw=e=>{C.useEffect(()=>{e.clearReset()},[e])},lw=({result:e,errorResetBoundary:t,throwOnError:s,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||tg(s,[e.error,n])),ow=e=>{if(e.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>s(n(...a)):s(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},cw=(e,t)=>e.isLoading&&e.isFetching&&!t,uw=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Am=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function dw(e,t,s){var f,h,v,g,w;const n=tw(),a=nw(),i=ot(),l=i.defaultQueryOptions(e);(h=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,l),l._optimisticResults=n?"isRestoring":"optimistic",ow(l),aw(l,a),iw(a);const o=!i.getQueryCache().get(l.queryHash),[c]=C.useState(()=>new t(i,l)),u=c.getOptimisticResult(l),d=!n&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(_=>{const p=d?c.subscribe(rt.batchCalls(_)):Nt;return c.updateResult(),p},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),C.useEffect(()=>{c.setOptions(l)},[l,c]),uw(l,u))throw Am(l,c,a);if(lw({result:u,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw u.error;if((g=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||g.call(v,l,u),l.experimental_prefetchInRender&&!pn&&cw(u,n)){const _=o?Am(l,c,a):(w=i.getQueryCache().get(l.queryHash))==null?void 0:w.promise;_==null||_.catch(Nt).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?u:c.trackResult(u)}function se(e,t){return dw(e,Wj)}function vt(e,t){const s=ot(),[n]=C.useState(()=>new Yj(s,e));C.useEffect(()=>{n.setOptions(e)},[n,e]);const a=C.useSyncExternalStore(C.useCallback(l=>n.subscribe(rt.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=C.useCallback((l,o)=>{n.mutate(l,o).catch(Nt)},[n]);if(a.error&&tg(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const hw={},Im=e=>{let t;const s=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const v=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),s.forEach(g=>g(t,v))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(s.add(d),()=>s.delete(d)),destroy:()=>{(hw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},u=t=e(n,a,c);return c},mw=e=>e?Im(e):Im;var ug={exports:{}},dg={},hg={exports:{}},mg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja=C;function fw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pw=typeof Object.is=="function"?Object.is:fw,xw=ja.useState,gw=ja.useEffect,yw=ja.useLayoutEffect,vw=ja.useDebugValue;function jw(e,t){var s=t(),n=xw({inst:{value:s,getSnapshot:t}}),a=n[0].inst,i=n[1];return yw(function(){a.value=s,a.getSnapshot=t,dc(a)&&i({inst:a})},[e,s,t]),gw(function(){return dc(a)&&i({inst:a}),e(function(){dc(a)&&i({inst:a})})},[e]),vw(s),s}function dc(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!pw(e,s)}catch{return!0}}function ww(e,t){return t()}var _w=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ww:jw;mg.useSyncExternalStore=ja.useSyncExternalStore!==void 0?ja.useSyncExternalStore:_w;hg.exports=mg;var bw=hg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=C,Nw=bw;function kw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sw=typeof Object.is=="function"?Object.is:kw,Cw=Nw.useSyncExternalStore,Ew=To.useRef,Pw=To.useEffect,Tw=To.useMemo,Rw=To.useDebugValue;dg.useSyncExternalStoreWithSelector=function(e,t,s,n,a){var i=Ew(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=Tw(function(){function c(v){if(!u){if(u=!0,d=v,v=n(v),a!==void 0&&l.hasValue){var g=l.value;if(a(g,v))return f=g}return f=v}if(g=f,Sw(d,v))return g;var w=n(v);return a!==void 0&&a(g,w)?(d=v,g):(d=v,f=w)}var u=!1,d,f,h=s===void 0?null:s;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,s,n,a]);var o=Cw(e,i[0],i[1]);return Pw(function(){l.hasValue=!0,l.value=o},[o]),Rw(o),o};ug.exports=dg;var Ow=ug.exports;const Aw=Cf(Ow),fg={},{useDebugValue:Iw}=ns,{useSyncExternalStoreWithSelector:$w}=Aw;let $m=!1;const qw=e=>e;function Mw(e,t=qw,s){(fg?"production":void 0)!=="production"&&s&&!$m&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$m=!0);const n=$w(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return Iw(n),n}const Lw=e=>{(fg?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?mw(e):e,s=(n,a)=>Mw(t,n,a);return Object.assign(s,t),s},Dw=e=>Lw,Fw={};function Uw(e,t){let s;try{s=e()}catch{return}return{getItem:a=>{var i;const l=c=>c===null?null:JSON.parse(c,void 0),o=(i=s.getItem(a))!=null?i:null;return o instanceof Promise?o.then(l):l(o)},setItem:(a,i)=>s.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>s.removeItem(a)}}const ki=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then(n){return ki(n)(s)},catch(n){return this}}}catch(s){return{then(n){return this},catch(n){return ki(n)(s)}}}},zw=(e,t)=>(s,n,a)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:_=>_,version:0,merge:(_,p)=>({...p,..._}),...t},l=!1;const o=new Set,c=new Set;let u;try{u=i.getStorage()}catch{}if(!u)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(..._)},n,a);const d=ki(i.serialize),f=()=>{const _=i.partialize({...n()});let p;const m=d({state:_,version:i.version}).then(y=>u.setItem(i.name,y)).catch(y=>{p=y});if(p)throw p;return m},h=a.setState;a.setState=(_,p)=>{h(_,p),f()};const v=e((..._)=>{s(..._),f()},n,a);let g;const w=()=>{var _;if(!u)return;l=!1,o.forEach(m=>m(n()));const p=((_=i.onRehydrateStorage)==null?void 0:_.call(i,n()))||void 0;return ki(u.getItem.bind(u))(i.name).then(m=>{if(m)return i.deserialize(m)}).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==i.version){if(i.migrate)return i.migrate(m.state,m.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return m.state}).then(m=>{var y;return g=i.merge(m,(y=n())!=null?y:v),s(g,!0),f()}).then(()=>{p==null||p(g,void 0),l=!0,c.forEach(m=>m(g))}).catch(m=>{p==null||p(void 0,m)})};return a.persist={setOptions:_=>{i={...i,..._},_.getStorage&&(u=_.getStorage())},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>l,onHydrate:_=>(o.add(_),()=>{o.delete(_)}),onFinishHydration:_=>(c.add(_),()=>{c.delete(_)})},w(),g||v},Bw=(e,t)=>(s,n,a)=>{let i={storage:Uw(()=>localStorage),partialize:w=>w,version:0,merge:(w,_)=>({..._,...w}),...t},l=!1;const o=new Set,c=new Set;let u=i.storage;if(!u)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),s(...w)},n,a);const d=()=>{const w=i.partialize({...n()});return u.setItem(i.name,{state:w,version:i.version})},f=a.setState;a.setState=(w,_)=>{f(w,_),d()};const h=e((...w)=>{s(...w),d()},n,a);a.getInitialState=()=>h;let v;const g=()=>{var w,_;if(!u)return;l=!1,o.forEach(m=>{var y;return m((y=n())!=null?y:h)});const p=((_=i.onRehydrateStorage)==null?void 0:_.call(i,(w=n())!=null?w:h))||void 0;return ki(u.getItem.bind(u))(i.name).then(m=>{if(m)if(typeof m.version=="number"&&m.version!==i.version){if(i.migrate)return[!0,i.migrate(m.state,m.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,m.state];return[!1,void 0]}).then(m=>{var y;const[j,k]=m;if(v=i.merge(k,(y=n())!=null?y:h),s(v,!0),j)return d()}).then(()=>{p==null||p(v,void 0),v=n(),l=!0,c.forEach(m=>m(v))}).catch(m=>{p==null||p(void 0,m)})};return a.persist={setOptions:w=>{i={...i,...w},w.storage&&(u=w.storage)},clearStorage:()=>{u==null||u.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>l,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},i.skipHydration||g(),v||h},Kw=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Fw?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),zw(e,t)):Bw(e,t),Ww=Kw,Gd=Dw()(Ww(e=>({user:null,isAuthenticated:!1,login:t=>e({user:t,isAuthenticated:!0}),logout:()=>e({user:null,isAuthenticated:!1})}),{name:"auth-storage"}));function pg(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=pg(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function xg(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=pg(e))&&(n&&(n+=" "),n+=t);return n}const Jd="-",Vw=e=>{const t=Qw(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:l=>{const o=l.split(Jd);return o[0]===""&&o.length!==1&&o.shift(),gg(o,t)||Hw(l)},getConflictingClassGroupIds:(l,o)=>{const c=s[l]||[];return o&&n[l]?[...c,...n[l]]:c}}},gg=(e,t)=>{var l;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?gg(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Jd);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},qm=/^\[(.+)\]$/,Hw=e=>{if(qm.test(e)){const t=qm.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},Qw=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return Jw(Object.entries(e.classGroups),s).forEach(([i,l])=>{Au(l,n,i,t)}),n},Au=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Mm(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(Gw(a)){Au(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,l])=>{Au(l,Mm(t,i),s,n)})})},Mm=(e,t)=>{let s=e;return t.split(Jd).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},Gw=e=>e.isThemeGetter,Jw=(e,t)=>t?e.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([l,o])=>[t+l,o])):i);return[s,a]}):e,Yw=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,l)=>{s.set(i,l),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let l=s.get(i);if(l!==void 0)return l;if((l=n.get(i))!==void 0)return a(i,l),l},set(i,l){s.has(i)?s.set(i,l):a(i,l)}}},yg="!",Xw=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],i=t.length,l=o=>{const c=[];let u=0,d=0,f;for(let _=0;_<o.length;_++){let p=o[_];if(u===0){if(p===a&&(n||o.slice(_,_+i)===t)){c.push(o.slice(d,_)),d=_+i;continue}if(p==="/"){f=_;continue}}p==="["?u++:p==="]"&&u--}const h=c.length===0?o:o.substring(d),v=h.startsWith(yg),g=v?h.substring(1):h,w=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:g,maybePostfixModifierPosition:w}};return s?o=>s({className:o,parseClassName:l}):l},Zw=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},e_=e=>({cache:Yw(e.cacheSize),parseClassName:Xw(e),...Vw(e)}),t_=/\s+/,s_=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],l=e.trim().split(t_);let o="";for(let c=l.length-1;c>=0;c-=1){const u=l[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:v}=s(u);let g=!!v,w=n(g?h.substring(0,v):h);if(!w){if(!g){o=u+(o.length>0?" "+o:o);continue}if(w=n(h),!w){o=u+(o.length>0?" "+o:o);continue}g=!1}const _=Zw(d).join(":"),p=f?_+yg:_,m=p+w;if(i.includes(m))continue;i.push(m);const y=a(w,g);for(let j=0;j<y.length;++j){const k=y[j];i.push(p+k)}o=u+(o.length>0?" "+o:o)}return o};function r_(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=vg(t))&&(n&&(n+=" "),n+=s);return n}const vg=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=vg(e[n]))&&(s&&(s+=" "),s+=t);return s};function n_(e,...t){let s,n,a,i=l;function l(c){const u=t.reduce((d,f)=>f(d),e());return s=e_(u),n=s.cache.get,a=s.cache.set,i=o,o(c)}function o(c){const u=n(c);if(u)return u;const d=s_(c,s);return a(c,d),d}return function(){return i(r_.apply(null,arguments))}}const Oe=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},jg=/^\[(?:([a-z-]+):)?(.+)\]$/i,a_=/^\d+\/\d+$/,i_=new Set(["px","full","screen"]),l_=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,o_=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c_=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u_=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d_=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rs=e=>Xn(e)||i_.has(e)||a_.test(e),Zs=e=>Ea(e,"length",v_),Xn=e=>!!e&&!Number.isNaN(Number(e)),hc=e=>Ea(e,"number",Xn),La=e=>!!e&&Number.isInteger(Number(e)),h_=e=>e.endsWith("%")&&Xn(e.slice(0,-1)),pe=e=>jg.test(e),er=e=>l_.test(e),m_=new Set(["length","size","percentage"]),f_=e=>Ea(e,m_,wg),p_=e=>Ea(e,"position",wg),x_=new Set(["image","url"]),g_=e=>Ea(e,x_,w_),y_=e=>Ea(e,"",j_),Da=()=>!0,Ea=(e,t,s)=>{const n=jg.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},v_=e=>o_.test(e)&&!c_.test(e),wg=()=>!1,j_=e=>u_.test(e),w_=e=>d_.test(e),__=()=>{const e=Oe("colors"),t=Oe("spacing"),s=Oe("blur"),n=Oe("brightness"),a=Oe("borderColor"),i=Oe("borderRadius"),l=Oe("borderSpacing"),o=Oe("borderWidth"),c=Oe("contrast"),u=Oe("grayscale"),d=Oe("hueRotate"),f=Oe("invert"),h=Oe("gap"),v=Oe("gradientColorStops"),g=Oe("gradientColorStopPositions"),w=Oe("inset"),_=Oe("margin"),p=Oe("opacity"),m=Oe("padding"),y=Oe("saturate"),j=Oe("scale"),k=Oe("sepia"),N=Oe("skew"),R=Oe("space"),x=Oe("translate"),I=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",pe,t],W=()=>[pe,t],X=()=>["",Rs,Zs],ie=()=>["auto",Xn,pe],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],he=()=>["solid","dashed","dotted","double","none"],me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],G=()=>["","0",pe],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Xn,pe];return{cacheSize:500,separator:":",theme:{colors:[Da],spacing:[Rs,Zs],blur:["none","",er,pe],brightness:$(),borderColor:[e],borderRadius:["none","","full",er,pe],borderSpacing:W(),borderWidth:X(),contrast:$(),grayscale:G(),hueRotate:$(),invert:G(),gap:W(),gradientColorStops:[e],gradientColorStopPositions:[h_,Zs],inset:z(),margin:z(),opacity:$(),padding:W(),saturate:$(),scale:$(),sepia:G(),skew:$(),space:W(),translate:W()},classGroups:{aspect:[{aspect:["auto","square","video",pe]}],container:["container"],columns:[{columns:[er]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),pe]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",La,pe]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pe]}],grow:[{grow:G()}],shrink:[{shrink:G()}],order:[{order:["first","last","none",La,pe]}],"grid-cols":[{"grid-cols":[Da]}],"col-start-end":[{col:["auto",{span:["full",La,pe]},pe]}],"col-start":[{"col-start":ie()}],"col-end":[{"col-end":ie()}],"grid-rows":[{"grid-rows":[Da]}],"row-start-end":[{row:["auto",{span:[La,pe]},pe]}],"row-start":[{"row-start":ie()}],"row-end":[{"row-end":ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[R]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[R]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pe,t]}],"min-w":[{"min-w":[pe,t,"min","max","fit"]}],"max-w":[{"max-w":[pe,t,"none","full","min","max","fit","prose",{screen:[er]},er]}],h:[{h:[pe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",er,Zs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hc]}],"font-family":[{font:[Da]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pe]}],"line-clamp":[{"line-clamp":["none",Xn,hc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Rs,pe]}],"list-image":[{"list-image":["none",pe]}],"list-style-type":[{list:["none","disc","decimal",pe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Rs,Zs]}],"underline-offset":[{"underline-offset":["auto",Rs,pe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:W()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),p_]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",f_]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},g_]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...he(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:he()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...he()]}],"outline-offset":[{"outline-offset":[Rs,pe]}],"outline-w":[{outline:[Rs,Zs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:X()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Rs,Zs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",er,y_]}],"shadow-color":[{shadow:[Da]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...me(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":me()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",er,pe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[y]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pe]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",pe]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",pe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[La,pe]}],"translate-x":[{"translate-x":[x]}],"translate-y":[{"translate-y":[x]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":W()}],"scroll-mx":[{"scroll-mx":W()}],"scroll-my":[{"scroll-my":W()}],"scroll-ms":[{"scroll-ms":W()}],"scroll-me":[{"scroll-me":W()}],"scroll-mt":[{"scroll-mt":W()}],"scroll-mr":[{"scroll-mr":W()}],"scroll-mb":[{"scroll-mb":W()}],"scroll-ml":[{"scroll-ml":W()}],"scroll-p":[{"scroll-p":W()}],"scroll-px":[{"scroll-px":W()}],"scroll-py":[{"scroll-py":W()}],"scroll-ps":[{"scroll-ps":W()}],"scroll-pe":[{"scroll-pe":W()}],"scroll-pt":[{"scroll-pt":W()}],"scroll-pr":[{"scroll-pr":W()}],"scroll-pb":[{"scroll-pb":W()}],"scroll-pl":[{"scroll-pl":W()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Rs,Zs,hc]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},b_=n_(__);function qt(...e){return b_(xg(e))}function D(e){return new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP"}).format(e)}function je(e){return new Intl.DateTimeFormat("ar-EG",{dateStyle:"short"}).format(new Date(e))}/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(e,t)=>{const s=C.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:o="",children:c,...u},d)=>C.createElement("svg",{ref:d,...N_,width:a,height:a,stroke:n,strokeWidth:l?Number(i)*24/Number(a):i,className:["lucide",`lucide-${k_(e)}`,o].join(" "),...u},[...t.map(([f,h])=>C.createElement(f,h)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=fe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=fe("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=fe("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=fe("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=fe("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=fe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=fe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=fe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=fe("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=fe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=fe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=fe("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=fe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=fe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=fe("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=fe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=fe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=fe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=fe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=fe("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=fe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B_=[{icon:A_,label:" ",path:"/dashboard"},{icon:q_,label:" ",path:"/pos"},{icon:bg,label:"",path:"/sales"},{icon:z_,label:"",path:"/purchases"},{icon:Oo,label:"",path:"/products"},{icon:P_,label:"",path:"/inventory"},{icon:M_,label:" ",path:"/stock-count"},{icon:ao,label:"",path:"/transfers"},{icon:Ci,label:"",path:"/returns"},{icon:Si,label:"",path:"/damaged"},{icon:wa,label:"",path:"/customers"},{icon:_g,label:"  ",path:"/customer-statement"},{icon:wa,label:"",path:"/suppliers"},{icon:D_,label:"",path:"/expenses"},{icon:Zn,label:" ",path:"/partner-withdrawals"},{icon:O_,label:"",path:"/reports"},{icon:Yd,label:"",path:"/settings"}];function K_(){var i,l,o;const e=Sa(),{user:t,logout:s}=Gd(),[n,a]=C.useState(!1);return r.jsxs(r.Fragment,{children:[!n&&r.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 bg-white border-b z-40 p-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("img",{src:"/el-fagr/logo.jpg",alt:" ",className:"w-10 h-10 rounded-lg object-contain"}),r.jsx("h1",{className:"text-base font-bold text-primary",children:" "})]}),r.jsx("button",{onClick:()=>a(!0),className:"p-2 hover:bg-muted rounded-md",children:r.jsx($_,{className:"h-6 w-6"})})]}),n&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-30",onClick:()=>a(!1)}),r.jsxs("aside",{className:qt("w-64 bg-white border-l h-screen flex flex-col fixed lg:static z-40 transition-transform duration-300 right-0",n?"translate-x-0":"translate-x-full lg:translate-x-0"),children:[r.jsxs("div",{className:"p-4 border-b relative",children:[r.jsx("button",{onClick:()=>a(!1),className:"lg:hidden absolute top-4 left-4 p-1 hover:bg-muted rounded-md",children:r.jsx(Xd,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:"/el-fagr/logo.jpg",alt:" ",className:"w-12 h-12 rounded-lg object-contain"}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-bold text-primary",children:" "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:((i=t==null?void 0:t.branch)==null?void 0:i.name_ar)||" "})]})]})]}),r.jsx("nav",{className:"flex-1 p-2 space-y-1 overflow-y-auto",children:B_.map(c=>r.jsxs(Pj,{to:c.path,onClick:()=>a(!1),className:qt("flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors",e.pathname===c.path?"bg-primary text-primary-foreground":"hover:bg-muted"),children:[r.jsx(c.icon,{className:"h-5 w-5"}),c.label]},c.path))}),r.jsxs("div",{className:"p-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:r.jsx("span",{className:"text-primary font-medium",children:(l=t==null?void 0:t.full_name)==null?void 0:l[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:t==null?void 0:t.full_name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(o=t==null?void 0:t.role)==null?void 0:o.name_ar})]})]}),r.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-2 text-sm text-destructive hover:underline w-full",children:[r.jsx(I_,{className:"h-4 w-4"})," "]})]})]})]})}function W_(){return Gd(t=>t.isAuthenticated)?r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(K_,{}),r.jsx("main",{className:"flex-1 overflow-auto p-3 sm:p-4 md:p-6 w-full lg:w-auto",children:r.jsx("div",{className:"pt-16 lg:pt-0",children:r.jsx(gj,{})})})]}):r.jsx(Yx,{to:"/login",replace:!0})}function Bm(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function V_(...e){return t=>{let s=!1;const n=e.map(a=>{const i=Bm(a,t);return!s&&typeof i=="function"&&(s=!0),i});if(s)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Bm(e[a],null)}}}}var H_=Symbol.for("react.lazy"),lo=Lf[" use ".trim().toString()];function Q_(e){return typeof e=="object"&&e!==null&&"then"in e}function kg(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===H_&&"_payload"in e&&Q_(e._payload)}function G_(e){const t=Y_(e),s=C.forwardRef((n,a)=>{let{children:i,...l}=n;kg(i)&&typeof lo=="function"&&(i=lo(i._payload));const o=C.Children.toArray(i),c=o.find(Z_);if(c){const u=c.props.children,d=o.map(f=>f===c?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:f);return r.jsx(t,{...l,ref:a,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return r.jsx(t,{...l,ref:a,children:i})});return s.displayName=`${e}.Slot`,s}var J_=G_("Slot");function Y_(e){const t=C.forwardRef((s,n)=>{let{children:a,...i}=s;if(kg(a)&&typeof lo=="function"&&(a=lo(a._payload)),C.isValidElement(a)){const l=tb(a),o=eb(i,a.props);return a.type!==C.Fragment&&(o.ref=n?V_(n,l):l),C.cloneElement(a,o)}return C.Children.count(a)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var X_=Symbol("radix.slottable");function Z_(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===X_}function eb(e,t){const s={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?s[n]=(...o)=>{const c=i(...o);return a(...o),c}:a&&(s[n]=a):n==="style"?s[n]={...a,...i}:n==="className"&&(s[n]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}function tb(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}const Km=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Wm=xg,sb=(e,t)=>s=>{var n;if((t==null?void 0:t.variants)==null)return Wm(e,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(u=>{const d=s==null?void 0:s[u],f=i==null?void 0:i[u];if(d===null)return null;const h=Km(d)||Km(f);return a[u][h]}),o=s&&Object.entries(s).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...v}=d;return Object.entries(v).every(g=>{let[w,_]=g;return Array.isArray(_)?_.includes({...i,...o}[w]):{...i,...o}[w]===_})?[...u,f,h]:u},[]);return Wm(e,l,c,s==null?void 0:s.class,s==null?void 0:s.className)},rb=sb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=C.forwardRef(({className:e,variant:t,size:s,asChild:n=!1,...a},i)=>{const l=n?J_:"button";return r.jsx(l,{className:qt(rb({variant:t,size:s,className:e})),ref:i,...a})});U.displayName="Button";const te=C.forwardRef(({className:e,type:t,...s},n)=>r.jsx("input",{type:t,className:qt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...s}));te.displayName="Input";const le=C.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:qt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));le.displayName="Card";const _e=C.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:qt("flex flex-col space-y-1.5 p-6",e),...t}));_e.displayName="CardHeader";const We=C.forwardRef(({className:e,...t},s)=>r.jsx("h3",{ref:s,className:qt("text-2xl font-semibold leading-none tracking-tight",e),...t}));We.displayName="CardTitle";const Sg=C.forwardRef(({className:e,...t},s)=>r.jsx("p",{ref:s,className:qt("text-sm text-muted-foreground",e),...t}));Sg.displayName="CardDescription";const be=C.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:qt("p-6 pt-0",e),...t}));be.displayName="CardContent";const nb=C.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:qt("flex items-center p-6 pt-0",e),...t}));nb.displayName="CardFooter";function Ao(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(s[n[a]]=e[n[a]]);return s}function ab(e,t,s,n){function a(i){return i instanceof s?i:new s(function(l){l(i)})}return new(s||(s=Promise))(function(i,l){function o(d){try{u(n.next(d))}catch(f){l(f)}}function c(d){try{u(n.throw(d))}catch(f){l(f)}}function u(d){d.done?i(d.value):a(d.value).then(o,c)}u((n=n.apply(e,t||[])).next())})}const ib=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Zd extends Error{constructor(t,s="FunctionsError",n){super(t),this.name=s,this.context=n}}class lb extends Zd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Vm extends Zd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Hm extends Zd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var $u;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})($u||($u={}));class ob{constructor(t,{headers:s={},customFetch:n,region:a=$u.Any}={}){this.url=t,this.headers=s,this.region=a,this.fetch=ib(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ab(this,arguments,void 0,function*(s,n={}){var a;let i,l;try{const{headers:o,method:c,body:u,signal:d,timeout:f}=n;let h={},{region:v}=n;v||(v=this.region);const g=new URL(`${this.url}/${s}`);v&&v!=="any"&&(h["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let w;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(h["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(h["Content-Type"]="application/json",w=JSON.stringify(u)):w=u;let _=d;f&&(l=new AbortController,i=setTimeout(()=>l.abort(),f),d?(_=l.signal,d.addEventListener("abort",()=>l.abort())):_=l.signal);const p=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),o),body:w,signal:_}).catch(k=>{throw new lb(k)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new Vm(p);if(!p.ok)throw new Hm(p);let y=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return y==="application/json"?j=yield p.json():y==="application/octet-stream"||y==="application/pdf"?j=yield p.blob():y==="text/event-stream"?j=p:y==="multipart/form-data"?j=yield p.formData():j=yield p.text(),{data:j,error:null,response:p}}catch(o){return{data:null,error:o,response:o instanceof Hm||o instanceof Vm?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var cb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ub=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let l=null,o=null,c=null,u=i.status,d=i.statusText;if(i.ok){var f,h;if(s.method!=="HEAD"){var v;const p=await i.text();p===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((v=s.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?o=p:o=JSON.parse(p))}const w=(f=s.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),_=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(c=parseInt(_[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(o)&&(o.length>1?(l={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var g;const w=await i.text();try{l=JSON.parse(w),Array.isArray(l)&&i.status===404&&(o=[],l=null,u=200,d="OK")}catch{i.status===404&&w===""?(u=204,d="No Content"):l={message:w}}if(l&&s.isMaybeSingle&&(!(l==null||(g=l.details)===null||g===void 0)&&g.includes("0 rows"))&&(l=null,u=200,d="OK"),l&&s.shouldThrowOnError)throw new cb(l)}return{error:l,data:o,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(a=a.catch(i=>{var l;let o="";const c=i==null?void 0:i.cause;if(c){var u,d,f,h;const g=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",w=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";o=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,o+=`

Caused by: ${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"Error"}: ${g}`,w&&(o+=` (${w})`),c!=null&&c.stack&&(o+=`
${c.stack}`)}else{var v;o=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},db=class extends ub{select(e){let t=!1;const s=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:n=s}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var l;const o=[e?"analyze":null,t?"verbose":null,s?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Qm=new RegExp("[,()]");var Tn=class extends db{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&Qm.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}notIn(e,t){const s=Array.from(new Set(t)).map(n=>typeof n=="string"&&Qm.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}},hb=class{constructor(e,{headers:t={},schema:s,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=n}select(e,t){const{head:s=!1,count:n}=t??{},a=s?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),n&&this.headers.append("Prefer",`count=${n}`),new Tn({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var n;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,o)=>l.concat(Object.keys(o)),[]);if(i.length>0){const l=[...new Set(i)].map(o=>`"${o}"`);this.url.searchParams.set("columns",l.join(","))}}return new Tn({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:n,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new Tn({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var s;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Tn({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Tn({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},mb=class Cg{constructor(t,{headers:s={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(s),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new hb(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Cg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,s={},{head:n=!1,get:a=!1,count:i}={}){var l;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(o=n?"HEAD":"GET",Object.entries(s).filter(([f,h])=>h!==void 0).map(([f,h])=>[f,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([f,h])=>{c.searchParams.append(f,h)})):(o="POST",u=s);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new Tn({method:o,url:c,headers:d,schema:this.schemaName,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class fb{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const n=this.getWebSocketConstructor();return new n(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const pb="2.89.0",xb=`realtime-js/${pb}`,Eg="1.0.0",gb="2.0.0",Gm=Eg,qu=1e4,yb=1e3,vb=100;var nr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(nr||(nr={}));var tt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(tt||(tt={}));var fs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fs||(fs={}));var Mu;(function(e){e.websocket="websocket"})(Mu||(Mu={}));var Wr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wr||(Wr={}));class jb{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,n;const a=(n=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var s,n;const a=(n=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,s,n){var a,i;const l=t.topic,o=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+l.length+u.length+f.length,v=new ArrayBuffer(this.HEADER_LENGTH+h);let g=new DataView(v),w=0;g.setUint8(w++,this.KINDS.userBroadcastPush),g.setUint8(w++,c.length),g.setUint8(w++,o.length),g.setUint8(w++,l.length),g.setUint8(w++,u.length),g.setUint8(w++,f.length),g.setUint8(w++,s),Array.from(c,p=>g.setUint8(w++,p.charCodeAt(0))),Array.from(o,p=>g.setUint8(w++,p.charCodeAt(0))),Array.from(l,p=>g.setUint8(w++,p.charCodeAt(0))),Array.from(u,p=>g.setUint8(w++,p.charCodeAt(0))),Array.from(f,p=>g.setUint8(w++,p.charCodeAt(0)));var _=new Uint8Array(v.byteLength+n.byteLength);return _.set(new Uint8Array(v),0),_.set(new Uint8Array(n),v.byteLength),_.buffer}decode(t,s){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return s(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,l,o,c]=n;return s({join_ref:a,ref:i,topic:l,event:o,payload:c})}return s({})}_binaryDecode(t){const s=new DataView(t),n=s.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,s,a)}}_decodeUserBroadcast(t,s,n){const a=s.getUint8(1),i=s.getUint8(2),l=s.getUint8(3),o=s.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const d=n.decode(t.slice(c,c+i));c=c+i;const f=n.decode(t.slice(c,c+l));c=c+l;const h=t.slice(c,t.byteLength),v=o===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,g={type:this.BROADCAST_EVENT,event:d,payload:v};return l>0&&(g.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>s.includes(n)))}}class Pg{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pe||(Pe={}));const Jm=(e,t,s={})=>{var n;const a=(n=s.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=wb(l,e,t,a),i),{}):{}},wb=(e,t,s,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=s[e];return i&&!n.includes(i)?Tg(i,l):Lu(l)},Tg=(e,t)=>{if(e.charAt(0)==="_"){const s=e.slice(1,e.length);return kb(t,s)}switch(e){case Pe.bool:return _b(t);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return bb(t);case Pe.json:case Pe.jsonb:return Nb(t);case Pe.timestamp:return Sb(t);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return Lu(t);default:return Lu(t)}},Lu=e=>e,_b=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},bb=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Nb=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},kb=(e,t)=>{if(typeof e!="string")return e;const s=e.length-1,n=e[s];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,s);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>Tg(t,o))}return e},Sb=e=>typeof e=="string"?e.replace(" ","T"):e,Rg=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class mc{constructor(t,s,n={},a=qu){this.channel=t,this.event=s,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var n;return this._hasReceived(t)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ym;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ym||(Ym={}));class ri{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ri.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=ri.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ri.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,n,a){const i=this.cloneDeep(t),l=this.transformState(s),o={},c={};return this.map(i,(u,d)=>{l[u]||(c[u]=d)}),this.map(l,(u,d)=>{const f=i[u];if(f){const h=d.map(_=>_.presence_ref),v=f.map(_=>_.presence_ref),g=d.filter(_=>v.indexOf(_.presence_ref)<0),w=f.filter(_=>h.indexOf(_.presence_ref)<0);g.length>0&&(o[u]=g),w.length>0&&(c[u]=w)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,s,n,a){const{joins:i,leaves:l}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const f=t[o].map(v=>v.presence_ref),h=d.filter(v=>f.indexOf(v.presence_ref)<0);t[o].unshift(...h)}n(o,d,c)}),this.map(l,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[o]=u,a(o,u,c),u.length===0&&delete t[o]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(n=>s(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,n)=>{const a=t[n];return"metas"in a?s[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=a,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xm;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Xm||(Xm={}));var ni;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ni||(ni={}));var Is;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Is||(Is={}));class Wn{constructor(t,s={config:{}},n){var a,i;if(this.topic=t,this.params=s,this.socket=n,this.bindings={},this.state=tt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new mc(this,fs.join,this.params,this.timeout),this.rejoinTimer=new Pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=tt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new ri(this),this.broadcastEndpointURL=Rg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==tt.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[ni.PRESENCE]&&this.bindings[ni.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Is.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Is.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(Is.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,p=[];for(let m=0;m<_;m++){const y=w[m],{filter:{event:j,schema:k,table:N,filter:R}}=y,x=v&&v[m];if(x&&x.event===j&&Wn.isFilterValueEqual(x.schema,k)&&Wn.isFilterValueEqual(x.table,N)&&Wn.isFilterValueEqual(x.filter,R))p.push(Object.assign(Object.assign({},y),{id:x.id}));else{this.unsubscribe(),this.state=tt.errored,t==null||t(Is.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(Is.SUBSCRIBED);return}}).receive("error",v=>{this.state=tt.errored,t==null||t(Is.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Is.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,n){return this.state===tt.joined&&t===ni.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,n)}async httpSend(t,s,n={}){var a;if(s==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,s={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const u=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=tt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new mc(this,fs.leave,{},t),n.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tt.closed,this.bindings={}}async _fetchWithTimeout(t,s,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(i),l}_push(t,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new mc(this,t,s,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>vb){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,n){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,n){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=fs;if(n&&[o,c,u,d].indexOf(l)>=0&&n!==this._joinRef())return;let h=this._onMessage(l,s,n);if(s&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var g,w,_;return((g=v.filter)===null||g===void 0?void 0:g.event)==="*"||((_=(w=v.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(v=>v.callback(h,n)):(i=this.bindings[l])===null||i===void 0||i.filter(v=>{var g,w,_,p,m,y;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const j=v.id,k=(g=v.filter)===null||g===void 0?void 0:g.event;return j&&((w=s.ids)===null||w===void 0?void 0:w.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((_=s.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const j=(m=(p=v==null?void 0:v.filter)===null||p===void 0?void 0:p.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return j==="*"||j===((y=s==null?void 0:s.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:w,table:_,commit_timestamp:p,type:m,errors:y}=g;h=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:p,eventType:m,new:{},old:{},errors:y}),this._getPayloadRecords(g))}v.callback(h,n)})}_isClosed(){return this.state===tt.closed}_isJoined(){return this.state===tt.joined}_isJoining(){return this.state===tt.joining}_isLeaving(){return this.state===tt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,n){const a=t.toLocaleLowerCase(),i={type:a,filter:s,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,s){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Wn.isEqual(a.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const n in t)if(t[n]!==s[n])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fs.close,{},t)}_onError(t){this._on(fs.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=Jm(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=Jm(t.columns,t.old_record)),s}}const fc=()=>{},ml={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Cb=[1e3,2e3,5e3,1e4],Eb=1e4,Pb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Tb{constructor(t,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qu,this.transport=null,this.heartbeatIntervalMs=ml.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fc,this.ref=0,this.reconnectTimer=null,this.vsn=Gm,this.logger=fc,this.conn=null,this.sendBuffer=[],this.serializer=new jb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${Mu.websocket}`,this.httpEndpoint=Rg(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fb.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,n){this.logger(t,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nr.connecting:return Wr.Connecting;case nr.open:return Wr.Open;case nr.closing:return Wr.Closing;default:return Wr.Closed}}isConnected(){return this.connectionState()===Wr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Wn(`realtime:${t}`,s,this);return this.channels.push(i),i}}push(t){const{topic:s,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${s} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yb,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},ml.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:l}=s,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,l)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===nr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===nr.open||this.conn.readyState===nr.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(fs.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(s);return`${t}${n}${a}`}_workerObjectUrl(t){let s;if(t)s=t;else{const n=new Blob([Pb],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,n=!1;if(t)s=t,n=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),s=this.accessTokenValue}else s=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const i={access_token:s,version:xb};s&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(fs.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(s)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Pg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ml.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,n,a,i,l,o,c,u,d,f,h,v;switch(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:qu,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:ml.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:fc,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Gm,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>Cb[g-1]||Eb,this.vsn){case Eg:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,w)=>w(JSON.stringify(g)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:(g,w)=>w(JSON.parse(g));break;case gb:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Ti=class extends Error{constructor(e,t){var s;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((s=t.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Rb(e,t,s){const n=new URL(t,e);if(s)for(const[a,i]of Object.entries(s))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function Ob(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Ab(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:s,path:n,query:a,body:i,headers:l}){const o=Rb(e.baseUrl,n,a),c=await Ob(e.auth),u=await t(o,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...c,...l},body:i?JSON.stringify(i):void 0}),d=await u.text(),f=(u.headers.get("content-type")||"").includes("application/json"),h=f&&d?JSON.parse(d):d;if(!u.ok){const v=f?h:void 0,g=v==null?void 0:v.error;throw new Ti((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:v})}return{status:u.status,headers:u.headers,data:h}}}}function fl(e){return e.join("")}var Ib=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:fl(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const s={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fl(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fl(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fl(e.namespace)}`}),!0}catch(t){if(t instanceof Ti&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(s){if(s instanceof Ti&&s.status===409)return;throw s}}};function _n(e){return e.join("")}var $b=class{constructor(e,t="",s){this.client=e,this.prefix=t,this.accessDelegation=s}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(e,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_n(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(s){if(s instanceof Ti&&s.status===404)return!1;throw s}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(s){if(s instanceof Ti&&s.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw s}}},qb=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const s=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Ab({baseUrl:s,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Ib(this.client,t),this.tableOps=new $b(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Io=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Mb=class extends Io{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Du=class extends Io{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const eh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Lb=()=>Response,Fu=e=>{if(Array.isArray(e))return e.map(s=>Fu(s));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([s,n])=>{const a=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Fu(n)}),t},Db=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Fb=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ri(e){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function Ub(e,t){if(Ri(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(Ri(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zb(e){var t=Ub(e,"string");return Ri(t)=="symbol"?t:t+""}function Bb(e,t,s){return(t=zb(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Zm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function de(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Zm(Object(s),!0).forEach(function(n){Bb(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zm(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}const pc=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Kb=async(e,t,s)=>{e instanceof await Lb()&&!(s!=null&&s.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";t(new Mb(pc(n),a,i))}).catch(n=>{t(new Du(pc(n),n))}):t(new Du(pc(e),e))},Wb=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Db(n)?(a.headers=de({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),de(de({},a),s))};async function Vi(e,t,s,n,a,i){return new Promise((l,o)=>{e(s,Wb(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>Kb(c,o,n))})}async function Oi(e,t,s,n){return Vi(e,"GET",t,s,n)}async function us(e,t,s,n,a){return Vi(e,"POST",t,n,a,s)}async function Uu(e,t,s,n,a){return Vi(e,"PUT",t,n,a,s)}async function Vb(e,t,s,n){return Vi(e,"HEAD",t,de(de({},s),{},{noResolveJson:!0}),n)}async function th(e,t,s,n,a){return Vi(e,"DELETE",t,n,a,s)}var Hb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}}};let Og;Og=Symbol.toStringTag;var Qb=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Og]="BlobDownloadBuilder",this.promise=null}asStream(){return new Hb(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(qe(t))return{data:null,error:t};throw t}}};const Gb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ef={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Jb=class{constructor(e,t={},s,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=eh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,s,n){var a=this;try{let i;const l=de(de({},ef),n);let o=de(de({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(o=de(de({},o),n.headers));const u=a._removeEmptyFolders(t),d=a._getFinalPath(u),f=await(e=="PUT"?Uu:us)(a.fetch,`${a.url}/object/${d}`,i,de({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}}async upload(e,t,s){return this.uploadOrUpdate("POST",e,t,s)}async uploadToSignedUrl(e,t,s,n){var a=this;const i=a._removeEmptyFolders(e),l=a._getFinalPath(i),o=new URL(a.url+`/object/upload/sign/${l}`);o.searchParams.set("token",t);try{let c;const u=de({upsert:ef.upsert},n),d=de(de({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:i,fullPath:(await Uu(a.fetch,o.toString(),c,{headers:d})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(qe(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var s=this;try{let n=s._getFinalPath(e);const a=de({},s.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await us(s.fetch,`${s.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(s.url+i.url),o=l.searchParams.get("token");if(!o)throw new Io("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}}async update(e,t,s){return this.uploadOrUpdate("PUT",e,t,s)}async move(e,t,s){var n=this;try{return{data:await us(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}}async copy(e,t,s){var n=this;try{return{data:{path:(await us(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,s){var n=this;try{let a=n._getFinalPath(e),i=await us(n.fetch,`${n.url}/object/sign/${a}`,de({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:n.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,s){var n=this;try{const a=await us(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(l=>de(de({},l),{},{signedUrl:l.signedURL?encodeURI(`${n.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}}download(e,t){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),l=()=>Oi(this.fetch,`${this.url}/${s}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Qb(l,this.shouldThrowOnError)}async info(e){var t=this;const s=t._getFinalPath(e);try{return{data:Fu(await Oi(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const s=t._getFinalPath(e);try{return await Vb(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(qe(n)&&n instanceof Du){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const s=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&n.push(l);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${s}${o}`)}}}async remove(e){var t=this;try{return{data:await th(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async list(e,t,s){var n=this;try{const a=de(de(de({},Gb),t),{},{prefix:e||""});return{data:await us(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},s),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(qe(a))return{data:null,error:a};throw a}}async listV2(e,t){var s=this;try{const n=de({},e);return{data:await us(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,n,{headers:s.headers},t),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ag="2.89.0",Ig={"X-Client-Info":`storage-js/${Ag}`};var Yb=class{constructor(e,t={},s,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=de(de({},Ig),t),this.fetch=eh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const s=t.listBucketOptionsToQueryString(e);return{data:await Oi(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async getBucket(e){var t=this;try{return{data:await Oi(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async createBucket(e,t={public:!1}){var s=this;try{return{data:await us(s.fetch,`${s.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var s=this;try{return{data:await Uu(s.fetch,`${s.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await us(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await th(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},Xb=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=de(de({},Ig),t),this.fetch=eh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await us(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async listBuckets(e){var t=this;try{const s=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&s.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&s.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&s.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&s.set("sortOrder",e.sortOrder),e!=null&&e.search&&s.set("search",e.search);const n=s.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await Oi(t.fetch,a,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await th(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}}from(e){var t=this;if(!Fb(e))throw new Io("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new qb({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(s,{get(a,i){const l=a[i];return typeof l!="function"?l:async(...o)=>{try{return{data:await l.apply(a,o),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const sh={"X-Client-Info":`storage-js/${Ag}`,"Content-Type":"application/json"};var $g=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var xc=class extends $g{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Zb=class extends $g{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const rh=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eN=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tN=async(e,t,s)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(s!=null&&s.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new xc(tf(i),n,l))}).catch(()=>{const i=n+"";t(new xc(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new xc(a.statusText||`HTTP ${n} error`,n,i))}}else t(new Zb(tf(e),e))},sN=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(eN(n)?(a.headers=de({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,de(de({},a),s)):a};async function rN(e,t,s,n,a,i){return new Promise((l,o)=>{e(s,sN(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>tN(c,o,n))})}async function zt(e,t,s,n,a){return rN(e,"POST",t,n,a,s)}var nN=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=de(de({},sh),t),this.fetch=rh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getIndex(e,t){var s=this;try{return{data:await zt(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteIndex(e,t){var s=this;try{return{data:await zt(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:s.headers})||{},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}},aN=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=de(de({},sh),t),this.fetch=rh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await zt(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getVectors(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await zt(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async queryVectors(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await zt(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}},iN=class{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=de(de({},sh),t),this.fetch=rh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async getBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async listBuckets(e={}){var t=this;try{return{data:await zt(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async deleteBucket(e){var t=this;try{return{data:await zt(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}},lN=class extends iN{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new oN(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,s=this;return t().call(s,e)}async getBucket(e){var t=()=>super.getBucket,s=this;return t().call(s,e)}async listBuckets(e={}){var t=()=>super.listBuckets,s=this;return t().call(s,e)}async deleteBucket(e){var t=()=>super.deleteBucket,s=this;return t().call(s,e)}},oN=class extends nN{constructor(e,t,s,n){super(e,t,n),this.vectorBucketName=s}async createIndex(e){var t=()=>super.createIndex,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,e)}index(e){return new cN(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},cN=class extends aN{constructor(e,t,s,n,a){super(e,t,a),this.vectorBucketName=s,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(e){var t=()=>super.getVectors,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,s=this;return t().call(s,de(de({},e),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},uN=class extends Yb{constructor(e,t={},s,n){super(e,t,s,n)}from(e){return new Jb(this.url,this.headers,e,this.fetch)}get vectors(){return new lN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Xb(this.url+"/iceberg",this.headers,this.fetch)}};const qg="2.89.0",Rn=30*1e3,zu=3,gc=zu*Rn,dN="http://localhost:9999",hN="supabase.auth.token",mN={"X-Client-Info":`gotrue-js/${qg}`},Bu="X-Supabase-Api-Version",Mg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},fN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,pN=10*60*1e3;class Ai extends Error{constructor(t,s,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class xN extends Ai{constructor(t,s,n){super(t,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function gN(e){return ne(e)&&e.name==="AuthApiError"}class Vr extends Ai{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class Js extends Ai{constructor(t,s,n,a){super(t,n,a),this.name=s,this.status=n}}class Dt extends Js{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yN(e){return ne(e)&&e.name==="AuthSessionMissingError"}class bn extends Js{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pl extends Js{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class xl extends Js{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vN(e){return ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class sf extends Js{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jN extends Js{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Ku extends Js{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function yc(e){return ne(e)&&e.name==="AuthRetryableFetchError"}class rf extends Js{constructor(t,s,n){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Wu extends Js{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nf=` 	
\r=`.split(""),wN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<nf.length;t+=1)e[nf[t].charCodeAt(0)]=-2;for(let t=0;t<oo.length;t+=1)e[oo[t].charCodeAt(0)]=t;return e})();function af(e,t,s){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(oo[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;s(oo[n]),t.queuedBits-=6}}function Lg(e,t,s){const n=wN[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lf(e){const t=[],s=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{NN(l,n,s)};for(let l=0;l<e.length;l+=1)Lg(e.charCodeAt(l),a,i);return t.join("")}function _N(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function bN(e,t){for(let s=0;s<e.length;s+=1){let n=e.charCodeAt(s);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(s+1)-56320&65535|a)+65536,s+=1}_N(n,t)}}function NN(e,t,s){if(t.utf8seq===0){if(e<=127){s(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function ea(e){const t=[],s={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Lg(e.charCodeAt(a),s,n);return new Uint8Array(t)}function kN(e){const t=[];return bN(e,s=>t.push(s)),new Uint8Array(t)}function Yr(e){const t=[],s={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>af(a,s,n)),af(null,s,n),t.join("")}function SN(e){return Math.round(Date.now()/1e3)+e}function CN(){return Symbol("auth-callback")}const ut=()=>typeof window<"u"&&typeof document<"u",Fr={tested:!1,writable:!1},Dg=()=>{if(!ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fr.tested)return Fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fr.tested=!0,Fr.writable=!0}catch{Fr.tested=!0,Fr.writable=!1}return Fr.writable};function EN(e){const t={},s=new URL(e);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return s.searchParams.forEach((n,a)=>{t[a]=n}),t}const Fg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),PN=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",On=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},Ur=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ct=async(e,t)=>{await e.removeItem(t)};class $o{constructor(){this.promise=new $o.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}$o.promiseConstructor=Promise;function vc(e){const t=e.split(".");if(t.length!==3)throw new Wu("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!fN.test(t[n]))throw new Wu("JWT not in base64url format");return{header:JSON.parse(lf(t[0])),payload:JSON.parse(lf(t[1])),signature:ea(t[2]),raw:{header:t[0],payload:t[1]}}}async function TN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function RN(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function ON(e){return("0"+e.toString(16)).substr(-2)}function AN(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let a="";for(let i=0;i<56;i++)a+=s.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ON).join("")}async function IN(e){const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function $N(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await IN(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nn(e,t,s=!1){const n=AN();let a=n;s&&(a+="/PASSWORD_RECOVERY"),await On(e,`${t}-code-verifier`,a);const i=await $N(n);return[i,n===i?"plain":"s256"]}const qN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MN(e){const t=e.headers.get(Bu);if(!t||!t.match(qN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function LN(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function DN(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FN=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kn(e){if(!FN.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jc(){const e={};return new Proxy(e,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function UN(e,t){return new Proxy(e,{get:(s,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,n,a)}})}function of(e){return JSON.parse(JSON.stringify(e))}const Kr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),zN=[502,503,504];async function cf(e){var t;if(!PN(e))throw new Ku(Kr(e),0);if(zN.includes(e.status))throw new Ku(Kr(e),e.status);let s;try{s=await e.json()}catch(i){throw new Vr(Kr(i),i)}let n;const a=MN(e);if(a&&a.getTime()>=Mg["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new rf(Kr(s),e.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Dt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new rf(Kr(s),e.status,s.weak_password.reasons);throw new xN(Kr(s),e.status||500,n)}const BN=(e,t,s,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),s))};async function ue(e,t,s,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Bu]||(i[Bu]=Mg["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await KN(e,t,s+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function KN(e,t,s,n,a,i){const l=BN(t,n,a,i);let o;try{o=await e(s,Object.assign({},l))}catch(c){throw console.error(c),new Ku(Kr(c),0)}if(o.ok||await cf(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await cf(c)}}function os(e){var t;let s=null;HN(e)&&(s=Object.assign({},e),e.expires_at||(s.expires_at=SN(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:s,user:n},error:null}}function uf(e){const t=os(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function lr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function WN(e){return{data:e,error:null}}function VN(e){const{action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i}=e,l=Ao(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:s,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function df(e){return e}function HN(e){return e.access_token&&e.refresh_token&&e.expires_in}const wc=["global","local","others"];class QN{constructor({url:t="",headers:s={},fetch:n}){this.url=t,this.headers=s,this.fetch=Fg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=wc[0]){if(wc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wc.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,s={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:lr})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:s}=t,n=Ao(t,["options"]),a=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:VN,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ne(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:lr})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,n,a,i,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:df});if(d.error)throw d.error;const f=await d.json(),h=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){kn(t);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:lr})}catch(s){if(ne(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){kn(t);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:lr})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,s=!1){kn(t);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:lr})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){kn(t.userId);try{const{data:s,error:n}=await ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:s,error:n}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _deleteFactor(t){kn(t.userId),kn(t.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,n,a,i,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:df});if(d.error)throw d.error;const f=await d.json(),h=(l=d.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);u[`${_}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ne(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ne(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ne(s))return{data:null,error:s};throw s}}}function hf(e={}){return{getItem:t=>e[t]||null,setItem:(t,s)=>{e[t]=s},removeItem:t=>{delete e[t]}}}const Sn={debug:!!(globalThis&&Dg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ug extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class GN extends Ug{}async function JN(e,t,s){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await s()}finally{Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new GN(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function YN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zg(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function XN(e){return parseInt(e,16)}function ZN(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function e1(e){var t;const{chainId:s,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:l,notBefore:o,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=zg(e.address),g=d?`${d}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${g} wants you to sign in with your Ethereum account:
${v}

${w}`;let p=`URI: ${f}
Version: ${h}
Chain ID: ${s}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),o&&(p+=`
Not Before: ${o.toISOString()}`),c&&(p+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);m+=`
- ${y}`}p+=m}return`${_}
${p}`}class Ye extends Error{constructor({message:t,code:s,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class co extends Ye{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function t1({error:e,options:t}){var s,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ye({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Ye({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ye({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ye({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ye({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Ye({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ye({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(Bg(l)){if(i.rp.id!==l)return new Ye({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ye({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function s1({error:e,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ye({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ye({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(Bg(n)){if(s.rpId!==n)return new Ye({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ye({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ye({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ye({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class r1{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const n1=new r1;function a1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:s,excludeCredentials:n}=e,a=Ao(e,["challenge","user","excludeCredentials"]),i=ea(t).buffer,l=Object.assign(Object.assign({},s),{id:ea(s.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:l});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ea(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function i1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:s}=e,n=Ao(e,["challenge","allowCredentials"]),a=ea(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let l=0;l<s.length;l++){const o=s[l];i.allowCredentials[l]=Object.assign(Object.assign({},o),{id:ea(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function l1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function o1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const s=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yr(new Uint8Array(a.authenticatorData)),clientDataJSON:Yr(new Uint8Array(a.clientDataJSON)),signature:Yr(new Uint8Array(a.signature)),userHandle:a.userHandle?Yr(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bg(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function mf(){var e,t;return!!(ut()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function c1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new co("Browser returned unexpected credential type",t)}:{data:null,error:new co("Empty credential response",t)}}catch(t){return{data:null,error:t1({error:t,options:e})}}}async function u1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new co("Browser returned unexpected credential type",t)}:{data:null,error:new co("Empty credential response",t)}}catch(t){return{data:null,error:s1({error:t,options:e})}}}const d1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},h1={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uo(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),s=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const l=a[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(s(l))n[i]=l;else if(t(l)){const o=n[i];t(o)?n[i]=uo(o,l):n[i]=uo(l)}else n[i]=l}return n}function m1(e,t){return uo(d1,e,t||{})}function f1(e,t){return uo(h1,e,t||{})}class p1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:n,signal:a},i){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!l)return{data:null,error:o};const c=a??n1.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=m1(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await c1({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=f1(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await u1(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Vr("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:s,webauthn:n}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!s)return{data:null,error:new Ai("rpId is required for WebAuthn authentication")};try{if(!mf())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:n},signal:a},{request:i});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:s,rpOrigins:n,credential_response:c.credential_response}})}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Vr("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!s)return{data:null,error:new Ai("rpId is required for WebAuthn registration")};try{if(!mf())return{data:null,error:new Vr("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:s,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:s,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(l){return ne(l)?{data:null,error:l}:{data:null,error:new Vr("Unexpected error in register",l)}}}}YN();const x1={url:dN,storageKey:hN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:mN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ff(e,t,s){return await s()}const Cn={};class Ii{get jwks(){var t,s;return(s=(t=Cn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){Cn[this.storageKey]=Object.assign(Object.assign({},Cn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=Cn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cn[this.storageKey]=Object.assign(Object.assign({},Cn[this.storageKey]),{cachedAt:t})}constructor(t){var s,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},x1),t);if(this.storageKey=i.storageKey,this.instanceID=(s=Ii.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Ii.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ut()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new QN({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Fg(i.fetch),this.lock=i.lock||ff,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JN:this.lock=ff,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new p1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Dg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=hf(this.memoryStorage)),ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qg}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},n="none";if(ut()&&(s=EN(window.location.href),this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce")),ut()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),vN(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ne(s)?this._returnResult({error:s}):this._returnResult({error:new Vr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,n,a;try{const i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:os}),{data:l,error:o}=i;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var s,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let v=null,g=null;this.flowType==="pkce"&&([v,g]=await Nn(this.storage,this.storageKey)),i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:v,code_challenge_method:g},xform:os})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:os})}else throw new pl("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return await ct(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let s;if("email"in t){const{email:i,password:l,options:o}=t;s=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:uf})}else if("phone"in t){const{phone:i,password:l,options:o}=t;s=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:uf})}else throw new pl("You must provide either an email or phone number and a password");const{data:n,error:a}=s;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new bn;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,n,a,i,l,o,c,u,d,f,h;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:w,wallet:_,statement:p,options:m}=t;let y;if(ut())if(typeof _=="object")y=_;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")y=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=_}const j=new URL((s=m==null?void 0:m.url)!==null&&s!==void 0?s:window.location.href),k=await y.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=zg(k[0]);let R=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const I=await y.request({method:"eth_chainId"});R=XN(I)}const x={domain:j.host,address:N,statement:p,uri:j.href,version:"1",chainId:R,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=m==null?void 0:m.signInWithEthereum)===null||d===void 0?void 0:d.resources};v=e1(x),g=await y.request({method:"personal_sign",params:[ZN(v),N]})}try{const{data:w,error:_}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:g},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:os});if(_)throw _;if(!w||!w.session||!w.user){const p=new bn;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(ne(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var s,n,a,i,l,o,c,u,d,f,h,v;let g,w;if("message"in t)g=t.message,w=t.signature;else{const{chain:_,wallet:p,statement:m,options:y}=t;let j;if(ut())if(typeof p=="object")j=p;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=p}const k=new URL((s=y==null?void 0:y.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let R;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")R=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)R=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)g=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=N}}try{const{data:_,error:p}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Yr(w)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:os});if(p)throw p;if(!_||!_.session||!_.user){const m=new bn;return this._returnResult({data:{user:null,session:null},error:m})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:p})}catch(_){if(ne(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const s=await Ur(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(s??"").split("/");try{if(!n&&this.flowType==="pkce")throw new jN;const{data:i,error:l}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:os});if(await ct(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const o=new bn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:s,provider:n,token:a,access_token:i,nonce:l}=t,o=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:os}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new bn;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,n,a,i,l;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Nn(this.storage,this.storageKey));const{error:f}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new pl("You must provide either an email or phone number.")}catch(o){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var s,n;try{let a,i;"options"in t&&(a=(s=t.options)===null||s===void 0?void 0:s.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:os});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var s,n,a,i,l;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Nn(this.storage,this.storageKey));const u=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:WN});return!((i=u.data)===null||i===void 0)&&i.url&&ut()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;if(n)throw n;if(!s)throw new Dt;const{error:a}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ne(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await ue(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:o}=await ue(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new pl("You must provide either an email or phone number and a type")}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Ur(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<gc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await Ur(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=jc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=UN(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:lr}):await this._useSession(async s=>{var n,a,i;const{data:l,error:o}=s;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dt}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:lr})})}catch(s){if(ne(s))return yN(s)&&(await this._removeSession(),await ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Dt;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Nn(this.storage,this.storageKey));const{data:u,error:d}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:lr});if(d)throw d;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Dt;const s=Date.now()/1e3;let n=s,a=!0,i=null;const{payload:l}=vc(t.access_token);if(l.exp&&(n=l.exp,a=n<=s),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(ne(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var n;if(!t){const{data:l,error:o}=s;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Dt;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(ne(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!ut())throw new xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new sf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sf("No code detected.");const{data:m,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=t;if(!i||!o||!l||!u)throw new xl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(o);let h=d+f;c&&(h=parseInt(c));const v=h-d;v*1e3<=Rn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:w,error:_}=await this._getUser(i);if(_)throw _;const p={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:l,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:t.type},error:null})}catch(n){if(ne(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Ur(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({error:i});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(gN(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=CN(),n={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async s=>{var n,a;try{const{data:{session:i},error:l}=s;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,s={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Nn(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,c,u,d;const{data:f,error:h}=i;if(h)throw h;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return ut()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ne(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var n;try{const{error:a,data:{session:i}}=s;if(a)throw a;const{options:l,provider:o,token:c,access_token:u,nonce:d}=t,f=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:os}),{data:h,error:v}=f;return v?this._returnResult({data:{user:null,session:null},error:v}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new bn}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:v}))}catch(a){if(await ct(this.storage,`${this.storageKey}-code-verifier`),ne(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)throw l;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await RN(async a=>(a>0&&await TN(200*Math.pow(2,a-1)),this._debug(s,"refreshing attempt",a),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:os})),(a,i)=>{const l=200*Math.pow(2,a);return i&&yc(i)&&Date.now()+l-n<Rn})}catch(n){if(this._debug(s,"error",n),ne(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",n),ut()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ur(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ur(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await On(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:jc()}else if(a&&!a.user&&!a.user){const l=await Ur(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await ct(this.storage,this.storageKey+"-user"),await On(this.storage,this.storageKey,a)):a.user=jc()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((s=a.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<gc;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${gc}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),yc(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var s,n;if(!t)throw new Dt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $o;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Dt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),ne(i)){const l={data:null,error:i};return yc(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,s,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:s});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,s)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ct(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await On(this.userStorage,this.storageKey+"-user",{user:s.user});const a=Object.assign({},s);delete a.user;const i=of(a);await On(this.storage,this.storageKey,i)}else{const a=of(s);await On(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ct(this.storage,this.storageKey),await ct(this.storage,this.storageKey+"-code-verifier"),await ct(this.storage,this.storageKey+"-user"),this.userStorage&&await ct(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Rn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Rn}ms, refresh threshold is ${zu} ticks`),a<=zu&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Ug)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,n){const a=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Nn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;return i?this._returnResult({data:null,error:i}):await ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var n,a;const{data:i,error:l}=s;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?l1(t.webauthn.credential_response):o1(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:a,error:i}=s;if(i)return this._returnResult({data:null,error:i});const l=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:a1(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:i1(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=s==null?void 0:s.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,s;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=vc(n.access_token);let l=null;i.aal&&(l=i.aal);let o=l;((s=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(o="aal2");const u=i.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;return a?this._returnResult({data:null,error:a}):n?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Dt});const l=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&ut()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(ne(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,s){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Dt});const l=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&ut()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(ne(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:n}=t;return n?this._returnResult({data:null,error:n}):s?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Dt})})}catch(t){if(ne(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;return a?this._returnResult({data:null,error:a}):n?(await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dt})})}catch(s){if(ne(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let n=s.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+pN>a)return n;const{data:i,error:l}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,s={}){try{let n=t;if(!n){const{data:v,error:g}=await this.getSession();if(g||!v.session)return this._returnResult({data:null,error:g});n=v.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=vc(n);s!=null&&s.allowExpired||LN(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:a,signature:l},error:null}}const d=DN(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,l,kN(`${o}.${c}`)))throw new Wu("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if(ne(n))return this._returnResult({data:null,error:n});throw n}}}Ii.nextInstanceID={};const g1=Ii,y1="2.89.0";let Wa="";typeof Deno<"u"?Wa="deno":typeof document<"u"?Wa="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wa="react-native":Wa="node";const v1={"X-Client-Info":`supabase-js-${Wa}/${y1}`},j1={headers:v1},w1={schema:"public"},_1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},b1={};function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}function N1(e,t){if($i(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if($i(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k1(e){var t=N1(e,"string");return $i(t)=="symbol"?t:t+""}function S1(e,t,s){return(t=k1(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function pf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Be(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?pf(Object(s),!0).forEach(function(n){S1(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pf(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}const C1=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),E1=()=>Headers,P1=(e,t,s)=>{const n=C1(s),a=E1();return async(i,l)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new a(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Be(Be({},l),{},{headers:u}))}};function T1(e){return e.endsWith("/")?e:e+"/"}function R1(e,t){var s,n;const{db:a,auth:i,realtime:l,global:o}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Be(Be({},c),a),auth:Be(Be({},u),i),realtime:Be(Be({},d),l),storage:{},global:Be(Be(Be({},f),o),{},{headers:Be(Be({},(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function O1(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(T1(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var A1=class extends g1{constructor(e){super(e)}},I1=class{constructor(e,t,s){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=O1(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:w1,realtime:b1,auth:Be(Be({},_1),{},{storageKey:l}),global:j1},c=R1(s??{},o);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=P1(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Be({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new mb(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new uN(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new ob(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,s;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,userStorage:a,storageKey:i,flowType:l,lock:o,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A1({url:this.authUrl.href,headers:Be(Be({},h),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:n,userStorage:a,flowType:l,lock:o,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Tb(this.realtimeUrl.href,Be(Be({},e),{},{params:Be(Be({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $1=(e,t,s)=>new I1(e,t,s);function q1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}q1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const M1="https://recvvlrcvowbzqpjyihk.supabase.co",L1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlY3Z2bHJjdm93YnpxcGp5aWhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0MDk3OTIsImV4cCI6MjA4MTk4NTc5Mn0.J-rYLEA1thxGfpLeNS6IAk_ahoRgIwx3RW9Soe5ZqBc",L=$1(M1,L1);function D1(){const[e,t]=C.useState(""),[s,n]=C.useState(""),[a,i]=C.useState(""),[l,o]=C.useState(!1),c=jn(),u=Gd(f=>f.login),d=async f=>{f.preventDefault(),i(""),o(!0);try{const{data:h,error:v}=await L.from("users").select("*, role:roles(*), branch:branches(*)").eq("username",e).eq("status","active").single();if(v||!h){i("      ");return}if(h.password_hash!==s){i("      ");return}u(h),c("/dashboard")}catch{i("    ")}finally{o(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4",children:r.jsxs(le,{className:"w-full max-w-md",children:[r.jsxs(_e,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"/el-fagr/logo.jpg",alt:" ",className:"w-24 h-24 rounded-xl object-contain"})}),r.jsx(We,{className:"text-2xl",children:" "}),r.jsx(Sg,{children:"  "})]}),r.jsx(be,{children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsx(te,{value:e,onChange:f=>t(f.target.value),placeholder:"  ",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsx(te,{type:"password",value:s,onChange:f=>n(f.target.value),placeholder:"  ",required:!0})]}),a&&r.jsx("p",{className:"text-sm text-destructive",children:a}),r.jsx(U,{type:"submit",className:"w-full",disabled:l,children:l?" ...":" "})]})})]})})}function F1(){const[e,t]=C.useState("all"),{data:s}=se({queryKey:["dashboard-branches"],queryFn:async()=>{const{data:i}=await L.from("branches").select("*").eq("status","active").order("name_ar");return i||[]}}),{data:n}=se({queryKey:["dashboard-stats",e],queryFn:async()=>{var _,p,m;let i=L.from("products").select("id",{count:"exact",head:!0}),l=L.from("customers").select("id",{count:"exact",head:!0}),o=L.from("sales").select("total_amount, cost_price:sale_items(cost_price, quantity)").eq("status","completed"),c=L.from("inventory").select("quantity, product_id");e!=="all"&&(l=l.eq("branch_id",e),o=o.eq("branch_id",e),c=c.eq("branch_id",e));const[u,d,f,h]=await Promise.all([i,l,o,c]),v=((_=f.data)==null?void 0:_.reduce((y,j)=>y+(j.total_amount||0),0))||0;let g=0;(p=f.data)==null||p.forEach(y=>{const j=y.total_amount||0;g+=j*.2});const w=((m=h.data)==null?void 0:m.filter(y=>(y.quantity||0)<10).length)||0;return{productsCount:u.count||0,customersCount:d.count||0,totalSales:v,totalProfit:g,lowStockCount:w}}}),a=[{title:" ",value:D((n==null?void 0:n.totalSales)||0),icon:Iu,color:"text-green-600"},{title:"",value:D((n==null?void 0:n.totalProfit)||0),icon:Iu,color:"text-emerald-600"},{title:"",value:(n==null?void 0:n.productsCount)||0,icon:Oo,color:"text-blue-600"},{title:"",value:(n==null?void 0:n.customersCount)||0,icon:wa,color:"text-purple-600"},{title:"  ",value:(n==null?void 0:n.lowStockCount)||0,icon:Si,color:"text-red-600"}];return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"     "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Or,{className:"h-5 w-5 text-muted-foreground"}),r.jsxs("select",{value:e,onChange:i=>t(i.target.value),className:"px-3 sm:px-4 py-2 border rounded-md bg-background text-sm w-full sm:w-auto",children:[r.jsx("option",{value:"all",children:" "}),s==null?void 0:s.map(i=>r.jsx("option",{value:i.id,children:i.name_ar},i.id))]})]})]}),r.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:a.map(i=>r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(We,{className:"text-sm font-medium",children:i.title}),r.jsx(i.icon,{className:`h-5 w-5 ${i.color}`})]}),r.jsx(be,{children:r.jsx("div",{className:"text-2xl font-bold",children:i.value})})]},i.title))}),r.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-2",children:[r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsx(be,{children:r.jsx(U1,{})})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsx(be,{children:r.jsx(z1,{})})]})]})]})}function U1(){const{data:e}=se({queryKey:["recent-sales"],queryFn:async()=>{const{data:t}=await L.from("sales").select("*, customer:customers(name)").order("created_at",{ascending:!1}).limit(5);return t||[]}});return e!=null&&e.length?r.jsx("div",{className:"space-y-3",children:e.map(t=>{var s;return r.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:t.invoice_number}),r.jsx("p",{className:"text-sm text-muted-foreground",children:((s=t.customer)==null?void 0:s.name)||t.customer_name||" "})]}),r.jsx("span",{className:"font-medium",children:D(t.total_amount||0)})]},t.id)})}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"    "})}function z1(){const{data:e}=se({queryKey:["low-stock"],queryFn:async()=>{const{data:t}=await L.from("inventory").select("quantity, product:products(name, name_ar, min_stock_level)").lt("quantity",10).limit(5);return t||[]}});return e!=null&&e.length?r.jsx("div",{className:"space-y-3",children:e.map((t,s)=>{var n,a;return r.jsxs("div",{className:"flex items-center justify-between border-b pb-2",children:[r.jsx("p",{className:"font-medium",children:((n=t.product)==null?void 0:n.name_ar)||((a=t.product)==null?void 0:a.name)}),r.jsxs("span",{className:"text-destructive font-medium",children:[t.quantity," "]})]},s)})}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"  "})}function Ge({open:e,onOpenChange:t,children:s}){return e?r.jsxs("div",{className:"fixed inset-0 z-50",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>t(!1)}),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-2 sm:p-4",children:s})]}):null}function Je({children:e,className:t,onClose:s}){return r.jsxs("div",{className:qt("relative bg-background rounded-lg shadow-lg max-h-[90vh] overflow-auto","w-full max-w-lg p-4 sm:p-6",t),children:[s&&r.jsx("button",{type:"button",onClick:s,className:"absolute left-2 sm:left-4 top-2 sm:top-4 rounded-sm opacity-70 hover:opacity-100 z-10",title:"","aria-label":"",children:r.jsx(Xd,{className:"h-5 w-5"})}),e]})}function Ze({children:e,className:t}){return r.jsx("div",{className:qt("mb-4",t),children:e})}function et({children:e,className:t}){return r.jsx("h2",{className:qt("text-base sm:text-lg font-semibold pr-8",t),children:e})}function Ps({children:e,className:t}){return r.jsx("div",{className:qt("mt-6 flex justify-end gap-2",t),children:e})}const _c={code:"",name:"",name_ar:"",barcode:"",category_id:"",brand_id:"",unit_id:"",purchase_price:0,selling_price:0};function B1(){const[e,t]=C.useState(""),[s,n]=C.useState(!1),[a,i]=C.useState(_c),[l,o]=C.useState(null),[c,u]=C.useState(1),d=10,f=ot(),{data:h,isLoading:v}=se({queryKey:["products",e,c],queryFn:async()=>{let x=L.from("products").select("*",{count:"exact",head:!0});e&&(x=x.or(`name.ilike.%${e}%,name_ar.ilike.%${e}%,code.ilike.%${e}%,barcode.ilike.%${e}%`));const{count:I}=await x;let T=L.from("products").select("*, category:categories(name_ar), brand:brands(name), unit:units(name_ar)").order("created_at",{ascending:!1});e&&(T=T.or(`name.ilike.%${e}%,name_ar.ilike.%${e}%,code.ilike.%${e}%,barcode.ilike.%${e}%`));const z=(c-1)*d,W=z+d-1,{data:X}=await T.range(z,W);return{products:X||[],totalCount:I||0,totalPages:Math.ceil((I||0)/d)}}}),g=(h==null?void 0:h.products)||[],w=(h==null?void 0:h.totalPages)||1,_=(h==null?void 0:h.totalCount)||0;ns.useEffect(()=>{u(1)},[e]);const{data:p}=se({queryKey:["categories-list"],queryFn:async()=>{const{data:x}=await L.from("categories").select("id, name_ar").eq("is_active",!0);return x||[]}}),{data:m}=se({queryKey:["brands-list"],queryFn:async()=>{const{data:x}=await L.from("brands").select("id, name").eq("is_active",!0);return x||[]}}),{data:y}=se({queryKey:["units-list"],queryFn:async()=>{const{data:x}=await L.from("units").select("id, name_ar").eq("is_active",!0);return x||[]}}),j=vt({mutationFn:async()=>{l?await L.from("products").update(a).eq("id",l):await L.from("products").insert({...a,status:"active"})},onSuccess:()=>{f.invalidateQueries({queryKey:["products"]}),n(!1),i(_c),o(null)}}),k=vt({mutationFn:async x=>{await L.from("products").delete().eq("id",x)},onSuccess:()=>f.invalidateQueries({queryKey:["products"]})}),N=x=>{o(x.id),i({code:x.code,name:x.name,name_ar:x.name_ar,barcode:x.barcode||"",category_id:x.category_id||"",brand_id:x.brand_id||"",unit_id:x.unit_id||"",purchase_price:x.purchase_price||0,selling_price:x.selling_price||0}),n(!0)},R=()=>{o(null),i(_c),n(!0)};return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs(U,{onClick:R,className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"})," "]})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{onClose:()=>n(!1),className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:l?" ":"  "})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" *"}),r.jsx(te,{value:a.code,onChange:x=>i({...a,code:x.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:""}),r.jsx(te,{value:a.barcode,onChange:x=>i({...a,barcode:x.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"  *"}),r.jsx(te,{value:a.name,onChange:x=>i({...a,name:x.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"  *"}),r.jsx(te,{value:a.name_ar,onChange:x=>i({...a,name_ar:x.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-select",className:"text-sm font-medium",children:""}),r.jsxs("select",{id:"category-select",title:"",className:"w-full h-10 border rounded-md px-3 text-sm",value:a.category_id,onChange:x=>i({...a,category_id:x.target.value}),children:[r.jsx("option",{value:"",children:" "}),p==null?void 0:p.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"brand-select",className:"text-sm font-medium",children:""}),r.jsxs("select",{id:"brand-select",title:"",className:"w-full h-10 border rounded-md px-3 text-sm",value:a.brand_id,onChange:x=>i({...a,brand_id:x.target.value}),children:[r.jsx("option",{value:"",children:" "}),m==null?void 0:m.map(x=>r.jsx("option",{value:x.id,children:x.name},x.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"unit-select",className:"text-sm font-medium",children:" *"}),r.jsxs("select",{id:"unit-select",title:"",className:"w-full h-10 border rounded-md px-3 text-sm",value:a.unit_id,onChange:x=>i({...a,unit_id:x.target.value}),children:[r.jsx("option",{value:"",children:" "}),y==null?void 0:y.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsx(te,{type:"number",value:a.purchase_price,onChange:x=>i({...a,purchase_price:parseFloat(x.target.value)||0})})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsx(te,{type:"number",value:a.selling_price,onChange:x=>i({...a,selling_price:parseFloat(x.target.value)||0})})]})]}),r.jsxs(Ps,{className:"flex-col sm:flex-row gap-2",children:[r.jsx(U,{variant:"outline",onClick:()=>n(!1),className:"w-full sm:w-auto",children:""}),r.jsx(U,{onClick:()=>j.mutate(),disabled:j.isPending,className:"w-full sm:w-auto",children:j.isPending?" ...":""})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"relative flex-1 max-w-full sm:max-w-sm",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"     ...",value:e,onChange:x=>t(x.target.value),className:"pr-10"})]})})}),r.jsx(be,{children:v?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):g!=null&&g.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-sm text-muted-foreground",children:[" ",(c-1)*d+1," - ",Math.min(c*d,_),"  ",_," "]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:g.map(x=>{var I,T;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:x.code}),r.jsx("td",{className:"py-3 px-2",children:x.name_ar}),r.jsx("td",{className:"py-3 px-2",children:((I=x.category)==null?void 0:I.name_ar)||"-"}),r.jsx("td",{className:"py-3 px-2",children:((T=x.brand)==null?void 0:T.name)||"-"}),r.jsx("td",{className:"py-3 px-2",children:D(x.purchase_price||0)}),r.jsx("td",{className:"py-3 px-2",children:D(x.selling_price||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:x.status==="active"?"":" "})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>N(x),title:"",children:r.jsx(Ei,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>k.mutate(x.id),title:"",children:r.jsx(Ar,{className:"h-4 w-4 text-destructive"})})]})})]},x.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:g.map(x=>{var I,T,z;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:x.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:x.code}),x.barcode&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:[": ",x.barcode]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${x.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:x.status==="active"?"":" "})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:((I=x.category)==null?void 0:I.name_ar)||"-"})]}),((T=x.brand)==null?void 0:T.name)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:x.brand.name})]}),((z=x.unit)==null?void 0:z.name_ar)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:x.unit.name_ar})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-bold text-blue-600",children:D(x.purchase_price||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-bold text-green-600",children:D(x.selling_price||0)})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(U,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>N(x),children:[r.jsx(Ei,{className:"h-4 w-4 ml-2"}),""]}),r.jsxs(U,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>k.mutate(x.id),children:[r.jsx(Ar,{className:"h-4 w-4 ml-2 text-destructive"}),""]})]})]})},x.id)})}),w>1&&r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(x=>Math.max(1,x-1)),disabled:c===1,className:"w-full sm:w-auto",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:r.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",c,"  ",w]})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(x=>Math.min(w,x+1)),disabled:c===w,className:"w-full sm:w-auto",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}function Kg(e){const t=window.open("","_blank","width=400,height=600");if(!t)return;const s=`
    <!DOCTYPE html>
    <html dir="rtl" lang="ar">
    <head>
      <meta charset="UTF-8">
      <title> ${e.invoice_number}</title>
      <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
          font-family: 'Segoe UI', Tahoma, Arial, sans-serif; 
          font-size: 12px; 
          padding: 10px;
          max-width: 80mm;
          margin: 0 auto;
        }
        .header { text-align: center; margin-bottom: 15px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
        .header h1 { font-size: 18px; margin-bottom: 5px; }
        .header p { font-size: 10px; color: #666; }
        .info { margin-bottom: 10px; }
        .info-row { display: flex; justify-content: space-between; margin-bottom: 3px; }
        .items { width: 100%; border-collapse: collapse; margin-bottom: 10px; }
        .items th, .items td { padding: 5px 3px; text-align: right; border-bottom: 1px solid #ddd; }
        .items th { background: #f5f5f5; font-size: 11px; }
        .totals { border-top: 1px dashed #000; padding-top: 10px; }
        .total-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .total-row.grand { font-size: 16px; font-weight: bold; border-top: 1px solid #000; padding-top: 5px; margin-top: 5px; }
        .footer { text-align: center; margin-top: 15px; border-top: 1px dashed #000; padding-top: 10px; font-size: 10px; }
        @media print {
          body { padding: 0; }
          @page { margin: 5mm; }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1> </h1>
      </div>
      
      <div class="info">
        <div class="info-row"><span> :</span><span>${e.invoice_number}</span></div>
        <div class="info-row"><span>:</span><span>${je(e.invoice_date)}</span></div>
        ${e.customer_name?`<div class="info-row"><span>:</span><span>${e.customer_name}</span></div>`:""}
        ${e.customer_phone?`<div class="info-row"><span>:</span><span>${e.customer_phone}</span></div>`:""}
        <div class="info-row"><span>:</span><span>${e.cashier_name}</span></div>
      </div>

      <table class="items">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          ${e.items.map(n=>`
            <tr>
              <td>${n.product_name}</td>
              <td>${n.quantity}</td>
              <td>${D(n.unit_price)}</td>
              <td>${D(n.total_price)}</td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="totals">
        ${e.customer_previous_balance&&e.customer_previous_balance>0?`
          <div class="total-row" style="color: #d97706; font-weight: bold; border-bottom: 1px dashed #ccc; padding-bottom: 5px; margin-bottom: 5px;">
            <span> :</span>
            <span>${D(e.customer_previous_balance)}</span>
          </div>
        `:""}
        <div class="total-row"><span> :</span><span>${D(e.subtotal)}</span></div>
        ${e.discount_amount>0?`<div class="total-row"><span>:</span><span>-${D(e.discount_amount)}</span></div>`:""}
        ${e.tax_amount>0?`<div class="total-row"><span>:</span><span>${D(e.tax_amount)}</span></div>`:""}
        <div class="total-row grand"><span>:</span><span>${D(e.total_amount)}</span></div>
        <div class="total-row"><span>:</span><span>${D(e.paid_amount)}</span></div>
        ${e.remaining_amount>0?`<div class="total-row"><span>:</span><span>${D(e.remaining_amount)}</span></div>`:""}
        ${e.customer_previous_balance&&e.customer_previous_balance>0?`
          <div class="total-row" style="color: #dc2626; font-weight: bold; font-size: 14px; border-top: 2px solid #000; padding-top: 5px; margin-top: 5px;">
            <span> :</span>
            <span>${D(e.customer_previous_balance+(e.remaining_amount||0))}</span>
          </div>
        `:""}
        <div class="total-row"><span> :</span><span>${e.payment_method==="cash"?"":""}</span></div>
      </div>

      <div class="footer">
        <p>  </p>
        <p>     </p>
      </div>

      <script>
        window.onload = function() { window.print(); }
      <\/script>
    </body>
    </html>
  `;t.document.write(s),t.document.close()}function K1(){var me,V,G,Z,$;const[e,t]=C.useState(""),[s,n]=C.useState(null),[a,i]=C.useState(!1),[l,o]=C.useState(!1),[c,u]=C.useState(""),[d,f]=C.useState("all"),[h,v]=C.useState("all"),[g,w]=C.useState("all"),[_,p]=C.useState("all"),[m,y]=C.useState(1),j=10,k=jn(),N=ot(),{data:R}=se({queryKey:["sales-branches"],queryFn:async()=>{const{data:b}=await L.from("branches").select("*").eq("status","active").eq("branch_type","outlet").order("name_ar");return b||[]}}),{data:x,isLoading:I}=se({queryKey:["sales",e,d,h,g,_,m],queryFn:async()=>{let b=L.from("sales").select("*",{count:"exact",head:!0});e&&(b=b.or(`invoice_number.ilike.%${e}%,customer_name.ilike.%${e}%`)),_!=="all"&&(b=b.eq("branch_id",_)),d==="with_tax"?b=b.eq("has_tax",!0):d==="without_tax"&&(b=b.eq("has_tax",!1)),h==="paid"?b=b.eq("payment_status","paid"):h==="credit"&&(b=b.eq("payment_status","credit")),g==="lifted"?b=b.eq("is_lifted",!0):g==="not_lifted"&&(b=b.eq("is_lifted",!1));const{count:P}=await b;let q=L.from("sales").select("*, customer:customers(name, name_ar), branch:branches(name_ar)").order("created_at",{ascending:!1});e&&(q=q.or(`invoice_number.ilike.%${e}%,customer_name.ilike.%${e}%`)),_!=="all"&&(q=q.eq("branch_id",_)),d==="with_tax"?q=q.eq("has_tax",!0):d==="without_tax"&&(q=q.eq("has_tax",!1)),h==="paid"?q=q.eq("payment_status","paid"):h==="credit"&&(q=q.eq("payment_status","credit")),g==="lifted"?q=q.eq("is_lifted",!0):g==="not_lifted"&&(q=q.eq("is_lifted",!1));const H=(m-1)*j,K=H+j-1,{data:ce}=await q.range(H,K);return{sales:ce||[],totalCount:P||0,totalPages:Math.ceil((P||0)/j)}}}),T=(x==null?void 0:x.sales)||[],z=(x==null?void 0:x.totalPages)||1,W=(x==null?void 0:x.totalCount)||0;ns.useEffect(()=>{y(1)},[e,d,h,g,_]);const X=async(b,P)=>{try{const{error:q}=await L.from("sales").update({is_lifted:P}).eq("id",b);if(q)throw q;N.invalidateQueries({queryKey:["sales"]}),alert(P?"   :  ":"   :   ")}catch(q){console.error("Error updating lifted status:",q),alert("     ")}},ie=async b=>{try{const{data:P,error:q}=await L.from("sales").select(`
          *,
          customer:customers(name_ar, phone),
          branch:branches(name_ar)
        `).eq("id",b).single();if(q){console.error("Error fetching sale:",q),alert("     : "+q.message);return}if(P){let H="";const K=P;if(K.cashier_id){const{data:F}=await L.from("users").select("full_name_ar, full_name").eq("id",K.cashier_id).single(),M=F||null;H=(M==null?void 0:M.full_name_ar)||(M==null?void 0:M.full_name)||""}const{data:ce,error:Ne}=await L.from("sale_items").select("*, product:products(name_ar, code)").eq("sale_id",b);Ne&&console.error("Error fetching items:",Ne),n({...P,items:ce||[],cashier:{full_name_ar:H,full_name:H}}),i(!0)}}catch(P){console.error("Error:",P),alert("   ")}},re=async b=>{var P,q,H;try{const{data:K,error:ce}=await L.from("sales").select(`
          *,
          customer:customers(name_ar, phone),
          branch:branches(name_ar)
        `).eq("id",b).single();if(ce){console.error("Error fetching sale for print:",ce),alert("      : "+ce.message);return}if(K){let Ne="";const O=K;if(O.cashier_id){const{data:A}=await L.from("users").select("full_name_ar, full_name").eq("id",O.cashier_id).single(),B=A||null;Ne=(B==null?void 0:B.full_name_ar)||(B==null?void 0:B.full_name)||""}const{data:F}=await L.from("sale_items").select("*, product:products(name_ar)").eq("sale_id",b);let M=0;if(O.customer_id){const{data:A}=await L.from("customers").select("current_balance").eq("id",O.customer_id).single();if(A){const B=A,J=K;M=(B.current_balance||0)-(J.remaining_amount||0)}}const S=K;Kg({invoice_number:S.invoice_number,invoice_date:S.invoice_date||S.created_at||"",customer_name:((P=O.customer)==null?void 0:P.name_ar)||O.customer_name,customer_phone:(q=O.customer)==null?void 0:q.phone,customer_previous_balance:M>0?M:void 0,items:(F||[]).map(A=>{var B;return{product_name:((B=A.product)==null?void 0:B.name_ar)||"",quantity:A.quantity,unit_price:A.unit_price,total_price:A.total_price}}),subtotal:S.subtotal||S.total_amount,discount_amount:S.discount_amount||0,tax_amount:S.tax_amount||0,total_amount:S.total_amount,paid_amount:S.paid_amount||0,remaining_amount:S.remaining_amount||0,payment_method:S.payment_method||"cash",cashier_name:Ne,branch_name:((H=O.branch)==null?void 0:H.name_ar)||""})}}catch(K){console.error("Error:",K),alert("   ")}};return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs(U,{onClick:()=>k("/pos"),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"     ...",value:e,onChange:b=>t(b.target.value),className:"pr-10"})]}),r.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"with_tax",children:""}),r.jsx("option",{value:"without_tax",children:" "})]}),r.jsxs("select",{value:h,onChange:b=>v(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"paid",children:""}),r.jsx("option",{value:"credit",children:""})]}),r.jsxs("select",{value:g,onChange:b=>w(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]}),r.jsxs("select",{value:_,onChange:b=>p(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" "}),R==null?void 0:R.map(b=>r.jsx("option",{value:b.id,children:b.name_ar},b.id))]})]})}),r.jsx(be,{children:I?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):T!=null&&T.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-xs sm:text-sm text-muted-foreground",children:[" ",(m-1)*j+1," - ",Math.min(m*j,W),"  ",W," "]}),r.jsx("div",{className:"block md:hidden space-y-3",children:T.map(b=>{var P,q;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm font-mono",children:b.invoice_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(b.invoice_date||b.created_at)})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>ie(b.id),title:"",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>re(b.id),title:"",children:r.jsx(ys,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:((P=b.customer)==null?void 0:P.name_ar)||b.customer_name||" "})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:(q=b.branch)==null?void 0:q.name_ar})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:D(b.total_amount||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:D(b.paid_amount||0)})]}),(b.remaining_amount||0)>0&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold text-orange-600",children:D(b.remaining_amount||0)})]})]})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:b.has_tax?"":""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:b.payment_status==="paid"?"":""}),r.jsxs("select",{value:b.is_lifted?"lifted":"not_lifted",onChange:H=>X(b.id,H.target.value==="lifted"),className:`px-2 py-1 rounded-md text-xs border ${b.is_lifted?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]})]})]})},b.id)})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:T.map(b=>{var P,q;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:b.invoice_number}),r.jsx("td",{className:"py-3 px-2 text-sm",children:je(b.invoice_date||b.created_at)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:((P=b.customer)==null?void 0:P.name_ar)||b.customer_name||" "}),r.jsx("td",{className:"py-3 px-2 text-sm",children:(q=b.branch)==null?void 0:q.name_ar}),r.jsx("td",{className:"py-3 px-2 text-sm",children:D(b.total_amount||0)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:D(b.paid_amount||0)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:(b.remaining_amount||0)>0?r.jsx("span",{className:"text-orange-600 font-semibold",children:D(b.remaining_amount||0)}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:b.has_tax?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:b.payment_status==="paid"?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("select",{value:b.is_lifted?"lifted":"not_lifted",onChange:H=>X(b.id,H.target.value==="lifted"),className:`px-2 py-1 rounded-md text-xs border ${b.is_lifted?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>ie(b.id),title:" ",className:"h-8 w-8",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>re(b.id),title:"",className:"h-8 w-8",children:r.jsx(ys,{className:"h-4 w-4"})})]})})]},b.id)})})]})}),z>1&&r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4 pt-4 border-t",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y(b=>Math.max(1,b-1)),disabled:m===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,z)},(b,P)=>{let q;return z<=5||m<=3?q=P+1:m>=z-2?q=z-4+P:q=m-2+P,r.jsx(U,{variant:m===q?"default":"outline",size:"sm",onClick:()=>y(q),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:q},q)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y(b=>Math.min(z,b+1)),disabled:m===z,className:"text-xs sm:text-sm",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]}),r.jsx(Ge,{open:a,onOpenChange:i,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",onClose:()=>i(!1),children:[r.jsx(Ze,{children:r.jsxs(et,{className:"text-base sm:text-lg",children:["  - ",s==null?void 0:s.invoice_number]})}),s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",je(s.invoice_date)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",((me=s.customer)==null?void 0:me.name_ar)||s.customer_name||" "]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",(V=s.branch)==null?void 0:V.name_ar]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",((G=s.cashier)==null?void 0:G.full_name_ar)||((Z=s.cashier)==null?void 0:Z.full_name)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:" :"})," ",r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:s.has_tax?"":" "})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:" :"})," ",r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:s.payment_status==="paid"?"":""})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm min-w-[400px]",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""})]})}),r.jsx("tbody",{children:($=s.items)==null?void 0:$.map(b=>{var P;return r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"py-2 px-2 sm:px-3",children:(P=b.product)==null?void 0:P.name_ar}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:b.quantity}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:D(b.unit_price)}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:D(b.total_price)})]},b.id)})})]})}),r.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),r.jsx("span",{children:D(s.subtotal||s.total_amount)})]}),s.discount_amount>0&&r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:":"}),r.jsxs("span",{children:["-",D(s.discount_amount)]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-base sm:text-lg",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.total_amount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.paid_amount)})]}),s.remaining_amount>0&&r.jsxs("div",{className:"flex justify-between text-orange-600",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.remaining_amount)})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 pt-4 border-t",children:[s.remaining_amount>0&&r.jsx(U,{variant:"outline",onClick:()=>o(!0),className:"bg-green-50 hover:bg-green-100 w-full sm:w-auto",children:" "}),r.jsx(U,{variant:"outline",onClick:()=>i(!1),className:"w-full sm:w-auto",children:""}),r.jsxs(U,{onClick:()=>re(s.id),className:"w-full sm:w-auto",children:[r.jsx(ys,{className:"h-4 w-4 ml-2"}),""]})]})]})]})}),r.jsx(Ge,{open:l,onOpenChange:o,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:" "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold text-destructive",children:D((s==null?void 0:s.remaining_amount)||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),r.jsx(te,{type:"number",value:c,onChange:b=>u(b.target.value),placeholder:" ",autoFocus:!0})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-end",children:[r.jsx(U,{variant:"outline",onClick:()=>{o(!1),u("")},className:"w-full sm:w-auto",children:""}),r.jsx(U,{onClick:he,disabled:!c||parseFloat(c)<=0,className:"w-full sm:w-auto",children:" "})]})]})]})})]});async function he(){if(!s)return;const b=parseFloat(c);if(!b||b<=0){alert("   ");return}const P=s.remaining_amount||0;if(b>P){alert("     ");return}try{const q=(s.paid_amount||0)+b,H=(s.total_amount||0)-q,K=H<=0?"paid":"credit",{error:ce}=await L.from("sales").update({paid_amount:q,remaining_amount:H,payment_status:K}).eq("id",s.id);if(ce)throw ce;alert("   "),o(!1),u(""),await ie(s.id),N.invalidateQueries({queryKey:["sales"]})}catch(q){console.error("Error adding payment:",q),alert("    ")}}}function W1(){var me,V,G,Z,$;const[e,t]=C.useState(""),[s,n]=C.useState(null),[a,i]=C.useState(!1),[l,o]=C.useState(!1),[c,u]=C.useState(""),[d,f]=C.useState("all"),[h,v]=C.useState("all"),[g,w]=C.useState("all"),[_,p]=C.useState("all"),[m,y]=C.useState(1),j=10,k=jn(),N=ot(),{data:R}=se({queryKey:["sales-branches"],queryFn:async()=>{const{data:b}=await L.from("branches").select("*").eq("status","active").eq("branch_type","outlet").order("name_ar");return b||[]}}),{data:x,isLoading:I}=se({queryKey:["sales",e,d,h,g,_,m],queryFn:async()=>{let b=L.from("sales").select("*",{count:"exact",head:!0});e&&(b=b.or(`invoice_number.ilike.%${e}%,customer_name.ilike.%${e}%`)),_!=="all"&&(b=b.eq("branch_id",_)),d==="with_tax"?b=b.eq("has_tax",!0):d==="without_tax"&&(b=b.eq("has_tax",!1)),h==="paid"?b=b.eq("payment_status","paid"):h==="credit"&&(b=b.eq("payment_status","credit")),g==="lifted"?b=b.eq("is_lifted",!0):g==="not_lifted"&&(b=b.eq("is_lifted",!1));const{count:P}=await b;let q=L.from("sales").select("*, customer:customers(name, name_ar), branch:branches(name_ar)").order("created_at",{ascending:!1});e&&(q=q.or(`invoice_number.ilike.%${e}%,customer_name.ilike.%${e}%`)),_!=="all"&&(q=q.eq("branch_id",_)),d==="with_tax"?q=q.eq("has_tax",!0):d==="without_tax"&&(q=q.eq("has_tax",!1)),h==="paid"?q=q.eq("payment_status","paid"):h==="credit"&&(q=q.eq("payment_status","credit")),g==="lifted"?q=q.eq("is_lifted",!0):g==="not_lifted"&&(q=q.eq("is_lifted",!1));const H=(m-1)*j,K=H+j-1,{data:ce}=await q.range(H,K);return{sales:ce||[],totalCount:P||0,totalPages:Math.ceil((P||0)/j)}}}),T=(x==null?void 0:x.sales)||[],z=(x==null?void 0:x.totalPages)||1,W=(x==null?void 0:x.totalCount)||0;ns.useEffect(()=>{y(1)},[e,d,h,g,_]);const X=async(b,P)=>{try{const{error:q}=await L.from("sales").update({is_lifted:P}).eq("id",b);if(q)throw q;N.invalidateQueries({queryKey:["sales"]}),alert(P?"   :  ":"   :   ")}catch(q){console.error("Error updating lifted status:",q),alert("     ")}},ie=async b=>{try{const{data:P,error:q}=await L.from("sales").select(`
          *,
          customer:customers(name_ar, phone),
          branch:branches(name_ar)
        `).eq("id",b).single();if(q){console.error("Error fetching sale:",q),alert("     : "+q.message);return}if(P){let H="";const K=P;if(K.cashier_id){const{data:F}=await L.from("users").select("full_name_ar, full_name").eq("id",K.cashier_id).single(),M=F||null;H=(M==null?void 0:M.full_name_ar)||(M==null?void 0:M.full_name)||""}const{data:ce,error:Ne}=await L.from("sale_items").select("*, product:products(name_ar, code)").eq("sale_id",b);Ne&&console.error("Error fetching items:",Ne),n({...P,items:ce||[],cashier:{full_name_ar:H,full_name:H}}),i(!0)}}catch(P){console.error("Error:",P),alert("   ")}},re=async b=>{var P,q,H;try{const{data:K,error:ce}=await L.from("sales").select(`
          *,
          customer:customers(name_ar, phone),
          branch:branches(name_ar)
        `).eq("id",b).single();if(ce){console.error("Error fetching sale for print:",ce),alert("      : "+ce.message);return}if(K){let Ne="";const O=K;if(O.cashier_id){const{data:A}=await L.from("users").select("full_name_ar, full_name").eq("id",O.cashier_id).single(),B=A||null;Ne=(B==null?void 0:B.full_name_ar)||(B==null?void 0:B.full_name)||""}const{data:F}=await L.from("sale_items").select("*, product:products(name_ar)").eq("sale_id",b);let M=0;if(O.customer_id){const{data:A}=await L.from("customers").select("current_balance").eq("id",O.customer_id).single();if(A){const B=A,J=K;M=(B.current_balance||0)-(J.remaining_amount||0)}}const S=K;Kg({invoice_number:S.invoice_number,invoice_date:S.invoice_date||S.created_at||"",customer_name:((P=O.customer)==null?void 0:P.name_ar)||O.customer_name,customer_phone:(q=O.customer)==null?void 0:q.phone,customer_previous_balance:M>0?M:void 0,items:(F||[]).map(A=>{var B;return{product_name:((B=A.product)==null?void 0:B.name_ar)||"",quantity:A.quantity,unit_price:A.unit_price,total_price:A.total_price}}),subtotal:S.subtotal||S.total_amount,discount_amount:S.discount_amount||0,tax_amount:S.tax_amount||0,total_amount:S.total_amount,paid_amount:S.paid_amount||0,remaining_amount:S.remaining_amount||0,payment_method:S.payment_method||"cash",cashier_name:Ne,branch_name:((H=O.branch)==null?void 0:H.name_ar)||""})}}catch(K){console.error("Error:",K),alert("   ")}};return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs(U,{onClick:()=>k("/pos"),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"     ...",value:e,onChange:b=>t(b.target.value),className:"pr-10"})]}),r.jsxs("select",{value:d,onChange:b=>f(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"with_tax",children:""}),r.jsx("option",{value:"without_tax",children:" "})]}),r.jsxs("select",{value:h,onChange:b=>v(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"paid",children:""}),r.jsx("option",{value:"credit",children:""})]}),r.jsxs("select",{value:g,onChange:b=>w(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]}),r.jsxs("select",{value:_,onChange:b=>p(b.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" "}),R==null?void 0:R.map(b=>r.jsx("option",{value:b.id,children:b.name_ar},b.id))]})]})}),r.jsx(be,{children:I?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):T!=null&&T.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-xs sm:text-sm text-muted-foreground",children:[" ",(m-1)*j+1," - ",Math.min(m*j,W),"  ",W," "]}),r.jsx("div",{className:"block md:hidden space-y-3",children:T.map(b=>{var P,q;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm font-mono",children:b.invoice_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(b.invoice_date||b.created_at)})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>ie(b.id),title:"",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>re(b.id),title:"",children:r.jsx(ys,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:((P=b.customer)==null?void 0:P.name_ar)||b.customer_name||" "})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:(q=b.branch)==null?void 0:q.name_ar})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:D(b.total_amount||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:D(b.paid_amount||0)})]}),(b.remaining_amount||0)>0&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold text-orange-600",children:D(b.remaining_amount||0)})]})]})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:b.has_tax?"":""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:b.payment_status==="paid"?"":""}),r.jsxs("select",{value:b.is_lifted?"lifted":"not_lifted",onChange:H=>X(b.id,H.target.value==="lifted"),className:`px-2 py-1 rounded-md text-xs border ${b.is_lifted?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]})]})]})},b.id)})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:T.map(b=>{var P,q;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:b.invoice_number}),r.jsx("td",{className:"py-3 px-2 text-sm",children:je(b.invoice_date||b.created_at)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:((P=b.customer)==null?void 0:P.name_ar)||b.customer_name||" "}),r.jsx("td",{className:"py-3 px-2 text-sm",children:(q=b.branch)==null?void 0:q.name_ar}),r.jsx("td",{className:"py-3 px-2 text-sm",children:D(b.total_amount||0)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:D(b.paid_amount||0)}),r.jsx("td",{className:"py-3 px-2 text-sm",children:(b.remaining_amount||0)>0?r.jsx("span",{className:"text-orange-600 font-semibold",children:D(b.remaining_amount||0)}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:b.has_tax?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:b.payment_status==="paid"?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("select",{value:b.is_lifted?"lifted":"not_lifted",onChange:H=>X(b.id,H.target.value==="lifted"),className:`px-2 py-1 rounded-md text-xs border ${b.is_lifted?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:[r.jsx("option",{value:"lifted",children:" "}),r.jsx("option",{value:"not_lifted",children:"  "})]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>ie(b.id),title:" ",className:"h-8 w-8",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>re(b.id),title:"",className:"h-8 w-8",children:r.jsx(ys,{className:"h-4 w-4"})})]})})]},b.id)})})]})}),z>1&&r.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4 pt-4 border-t",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y(b=>Math.max(1,b-1)),disabled:m===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,z)},(b,P)=>{let q;return z<=5||m<=3?q=P+1:m>=z-2?q=z-4+P:q=m-2+P,r.jsx(U,{variant:m===q?"default":"outline",size:"sm",onClick:()=>y(q),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:q},q)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y(b=>Math.min(z,b+1)),disabled:m===z,className:"text-xs sm:text-sm",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]}),r.jsx(Ge,{open:a,onOpenChange:i,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",onClose:()=>i(!1),children:[r.jsx(Ze,{children:r.jsxs(et,{className:"text-base sm:text-lg",children:["  - ",s==null?void 0:s.invoice_number]})}),s&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",je(s.invoice_date)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",((me=s.customer)==null?void 0:me.name_ar)||s.customer_name||" "]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",(V=s.branch)==null?void 0:V.name_ar]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:":"})," ",((G=s.cashier)==null?void 0:G.full_name_ar)||((Z=s.cashier)==null?void 0:Z.full_name)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:" :"})," ",r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:s.has_tax?"":" "})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:" :"})," ",r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:s.payment_status==="paid"?"":""})]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm min-w-[400px]",children:[r.jsx("thead",{className:"bg-muted",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-2 sm:px-3",children:""})]})}),r.jsx("tbody",{children:($=s.items)==null?void 0:$.map(b=>{var P;return r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"py-2 px-2 sm:px-3",children:(P=b.product)==null?void 0:P.name_ar}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:b.quantity}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:D(b.unit_price)}),r.jsx("td",{className:"py-2 px-2 sm:px-3",children:D(b.total_price)})]},b.id)})})]})}),r.jsxs("div",{className:"border-t pt-4 space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" :"}),r.jsx("span",{children:D(s.subtotal||s.total_amount)})]}),s.discount_amount>0&&r.jsxs("div",{className:"flex justify-between text-red-600",children:[r.jsx("span",{children:":"}),r.jsxs("span",{children:["-",D(s.discount_amount)]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-base sm:text-lg",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.total_amount)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.paid_amount)})]}),s.remaining_amount>0&&r.jsxs("div",{className:"flex justify-between text-orange-600",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(s.remaining_amount)})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 pt-4 border-t",children:[s.remaining_amount>0&&r.jsx(U,{variant:"outline",onClick:()=>o(!0),className:"bg-green-50 hover:bg-green-100 w-full sm:w-auto",children:" "}),r.jsx(U,{variant:"outline",onClick:()=>i(!1),className:"w-full sm:w-auto",children:""}),r.jsxs(U,{onClick:()=>re(s.id),className:"w-full sm:w-auto",children:[r.jsx(ys,{className:"h-4 w-4 ml-2"}),""]})]})]})]})}),r.jsx(Ge,{open:l,onOpenChange:o,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:" "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold text-destructive",children:D((s==null?void 0:s.remaining_amount)||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),r.jsx(te,{type:"number",value:c,onChange:b=>u(b.target.value),placeholder:" ",autoFocus:!0})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-end",children:[r.jsx(U,{variant:"outline",onClick:()=>{o(!1),u("")},className:"w-full sm:w-auto",children:""}),r.jsx(U,{onClick:he,disabled:!c||parseFloat(c)<=0,className:"w-full sm:w-auto",children:" "})]})]})]})})]});async function he(){if(!s)return;const b=parseFloat(c);if(!b||b<=0){alert("   ");return}const P=s.remaining_amount||0;if(b>P){alert("     ");return}try{const q=(s.paid_amount||0)+b,H=(s.total_amount||0)-q,K=H<=0?"paid":"credit",{error:ce}=await L.from("sales").update({paid_amount:q,remaining_amount:H,payment_status:K}).eq("id",s.id);if(ce)throw ce;alert("   "),o(!1),u(""),await ie(s.id),N.invalidateQueries({queryKey:["sales"]})}catch(q){console.error("Error adding payment:",q),alert("    ")}}}function V1(){const[e,t]=C.useState(""),[s,n]=C.useState(""),[a,i]=C.useState(1),l=10,o=jn(),{data:c}=se({queryKey:["branches"],queryFn:async()=>{const{data:g}=await L.from("branches").select("id, name_ar").eq("status","active");return g||[]}}),{data:u,isLoading:d}=se({queryKey:["inventory",e,s,a],queryFn:async()=>{let g=L.from("inventory").select("*, product:products!inner(code, name, name_ar)",{count:"exact",head:!0});s&&(g=g.eq("branch_id",s)),e&&(g=g.or(`code.ilike.%${e}%,name.ilike.%${e}%,name_ar.ilike.%${e}%`,{foreignTable:"products"}));const{count:w}=await g;let _=L.from("inventory").select("*, product:products!inner(code, name, name_ar, min_stock_level), branch:branches(name_ar)");s&&(_=_.eq("branch_id",s)),e&&(_=_.or(`code.ilike.%${e}%,name.ilike.%${e}%,name_ar.ilike.%${e}%`,{foreignTable:"products"}));const p=(a-1)*l,m=p+l-1,{data:y}=await _.order("quantity",{ascending:!0}).range(p,m);return{inventory:y||[],totalCount:w||0,totalPages:Math.ceil((w||0)/l)}}}),f=(u==null?void 0:u.inventory)||[],h=(u==null?void 0:u.totalPages)||1,v=(u==null?void 0:u.totalCount)||0;return ns.useEffect(()=>{i(1)},[e,s]),r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs(U,{variant:"outline",onClick:()=>o("/transfers"),className:"w-full sm:w-auto",children:[r.jsx(ao,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"   ...",value:e,onChange:g=>t(g.target.value),className:"pr-10"})]}),r.jsxs("select",{id:"branch-filter",title:"  ",value:s,onChange:g=>n(g.target.value),className:"h-10 px-3 rounded-md border border-input bg-background text-sm",children:[r.jsx("option",{value:"",children:" "}),c==null?void 0:c.map(g=>r.jsx("option",{value:g.id,children:g.name_ar},g.id))]})]})}),r.jsx(be,{children:d?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):f!=null&&f.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-xs sm:text-sm text-muted-foreground",children:[" ",(a-1)*l+1," - ",Math.min(a*l,v),"  ",v," "]}),r.jsx("div",{className:"block md:hidden space-y-3",children:f.map(g=>{var _,p,m,y,j;const w=(g.quantity||0)<(((_=g.product)==null?void 0:_.min_stock_level)||10);return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-sm",children:(p=g.product)==null?void 0:p.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:(m=g.product)==null?void 0:m.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${w?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:w?"":""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:(y=g.branch)==null?void 0:y.name_ar})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:g.quantity})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:" : "}),r.jsx("span",{children:((j=g.product)==null?void 0:j.min_stock_level)||10})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{children:D(g.avg_cost||0)})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:D((g.quantity||0)*(g.avg_cost||0))})]})]})]})},g.id)})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:f.map(g=>{var _,p,m,y,j;const w=(g.quantity||0)<(((_=g.product)==null?void 0:_.min_stock_level)||10);return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:(p=g.product)==null?void 0:p.code}),r.jsx("td",{className:"py-3 px-2",children:(m=g.product)==null?void 0:m.name_ar}),r.jsx("td",{className:"py-3 px-2",children:(y=g.branch)==null?void 0:y.name_ar}),r.jsx("td",{className:"py-3 px-2 font-medium",children:g.quantity}),r.jsx("td",{className:"py-3 px-2",children:((j=g.product)==null?void 0:j.min_stock_level)||10}),r.jsx("td",{className:"py-3 px-2",children:D(g.avg_cost||0)}),r.jsx("td",{className:"py-3 px-2",children:D((g.quantity||0)*(g.avg_cost||0))}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${w?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:w?"":""})})]},g.id)})})]})}),h>1&&r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>i(g=>Math.max(1,g-1)),disabled:a===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,h)},(g,w)=>{let _=h<=5||a<=3?w+1:a>=h-2?h-4+w:a-2+w;return r.jsx(U,{variant:a===_?"default":"outline",size:"sm",onClick:()=>i(_),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:_},_)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>i(g=>Math.min(h,g+1)),disabled:a===h,className:"text-xs sm:text-sm",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}var Wg={exports:{}};(function(e,t){(function(s,n){e.exports=n(C,Ux)})(typeof self<"u"?self:Zg,function(s,n){return function(){var a={328:function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.PrintContextConsumer=u.PrintContext=void 0;var f=d(496),h=Object.prototype.hasOwnProperty.call(f,"createContext");u.PrintContext=h?f.createContext({}):null,u.PrintContextConsumer=u.PrintContext?u.PrintContext.Consumer:function(){return null}},428:function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.ReactToPrint=void 0;var f=d(316),h=d(496),v=d(190),g=d(328),w=d(940),_=function(p){function m(){var y=p.apply(this,f.__spreadArray([],f.__read(arguments),!1))||this;return y.startPrint=function(j){var k=y.props,N=k.onAfterPrint,R=k.onPrintError,x=k.print,I=k.documentTitle;setTimeout(function(){var T,z;if(j.contentWindow)if(j.contentWindow.focus(),x)x(j).then(function(){return N==null?void 0:N()}).then(function(){return y.handleRemoveIframe()}).catch(function(ie){R?R("print",ie):y.logMessages(["An error was thrown by the specified `print` function"])});else{if(j.contentWindow.print){var W=(z=(T=j.contentDocument)===null||T===void 0?void 0:T.title)!==null&&z!==void 0?z:"",X=j.ownerDocument.title;I&&(j.ownerDocument.title=I,j.contentDocument&&(j.contentDocument.title=I)),j.contentWindow.print(),I&&(j.ownerDocument.title=X,j.contentDocument&&(j.contentDocument.title=W))}else y.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);N==null||N(),y.handleRemoveIframe()}else y.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},y.triggerPrint=function(j){var k=y.props,N=k.onBeforePrint,R=k.onPrintError;if(N){var x=N();x&&typeof x.then=="function"?x.then(function(){y.startPrint(j)}).catch(function(I){R&&R("onBeforePrint",I)}):y.startPrint(j)}else y.startPrint(j)},y.handlePrint=function(j){var k=y.props,N=k.bodyClass,R=k.content,x=k.copyStyles,I=k.fonts,T=k.pageStyle,z=k.nonce,W=typeof j=="function"?j():null;if(W&&typeof R=="function"&&y.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),W||typeof R!="function"||(W=R()),W!==void 0)if(W!==null){var X=document.createElement("iframe");X.width="".concat(document.documentElement.clientWidth,"px"),X.height="".concat(document.documentElement.clientHeight,"px"),X.style.position="absolute",X.style.top="-".concat(document.documentElement.clientHeight+100,"px"),X.style.left="-".concat(document.documentElement.clientWidth+100,"px"),X.id="printWindow",X.srcdoc="<!DOCTYPE html>";var ie=(0,v.findDOMNode)(W);if(ie){var re=ie.cloneNode(!0),he=re instanceof Text,me=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),V=he?[]:re.querySelectorAll("img"),G=he?[]:re.querySelectorAll("video"),Z=I?I.length:0;y.numResourcesToLoad=me.length+V.length+G.length+Z,y.resourcesLoaded=[],y.resourcesErrored=[];var $=function(b,P){y.resourcesLoaded.includes(b)?y.logMessages(["Tried to mark a resource that has already been handled",b],"debug"):(P?(y.logMessages(f.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],f.__read(P),!1)),y.resourcesErrored.push(b)):y.resourcesLoaded.push(b),y.resourcesLoaded.length+y.resourcesErrored.length===y.numResourcesToLoad&&y.triggerPrint(X))};X.onload=function(){var b,P,q,H;X.onload=null;var K=X.contentDocument||((P=X.contentWindow)===null||P===void 0?void 0:P.document);if(K){K.body.appendChild(re),I&&(!((q=X.contentDocument)===null||q===void 0)&&q.fonts&&(!((H=X.contentWindow)===null||H===void 0)&&H.FontFace)?I.forEach(function(Lt){var Ce=new FontFace(Lt.family,Lt.source,{weight:Lt.weight,style:Lt.style});X.contentDocument.fonts.add(Ce),Ce.loaded.then(function(){$(Ce)}).catch(function(Fe){$(Ce,["Failed loading the font:",Ce,"Load error:",Fe])})}):(I.forEach(function(Lt){return $(Lt)}),y.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var ce=typeof T=="function"?T():T;if(typeof ce!="string")y.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof ce,'". Styles from `pageStyle` will not be applied.')]);else{var Ne=K.createElement("style");z&&(Ne.setAttribute("nonce",z),K.head.setAttribute("nonce",z)),Ne.appendChild(K.createTextNode(ce)),K.head.appendChild(Ne)}if(N&&(b=K.body.classList).add.apply(b,f.__spreadArray([],f.__read(N.split(" ")),!1)),!he){for(var O=he?[]:ie.querySelectorAll("canvas"),F=K.querySelectorAll("canvas"),M=0;M<O.length;++M){var S=O[M],A=F[M].getContext("2d");A&&A.drawImage(S,0,0)}var B=function(Lt){var Ce=V[Lt],Fe=Ce.getAttribute("src");if(Fe){var Gt=new Image;Gt.onload=function(){return $(Ce)},Gt.onerror=function(Dr,Pa,Hi,is,Et){return $(Ce,["Error loading <img>",Ce,"Error",Et])},Gt.src=Fe}else $(Ce,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',Ce])};for(M=0;M<V.length;M++)B(M);var J=function(Lt){var Ce=G[Lt];Ce.preload="auto";var Fe=Ce.getAttribute("poster");if(Fe){var Gt=new Image;Gt.onload=function(){return $(Ce)},Gt.onerror=function(Dr,Pa,Hi,is,Et){return $(Ce,["Error loading video poster",Fe,"for video",Ce,"Error:",Et])},Gt.src=Fe}else Ce.readyState>=2?$(Ce):(Ce.onloadeddata=function(){return $(Ce)},Ce.onerror=function(Dr,Pa,Hi,is,Et){return $(Ce,["Error loading video",Ce,"Error",Et])},Ce.onstalled=function(){return $(Ce,["Loading video stalled, skipping",Ce])})};for(M=0;M<G.length;M++)J(M);var ge="input",Re=ie.querySelectorAll(ge),Ve=K.querySelectorAll(ge);for(M=0;M<Re.length;M++)Ve[M].value=Re[M].value;var oe="input[type=checkbox],input[type=radio]",Se=ie.querySelectorAll(oe),Mt=K.querySelectorAll(oe);for(M=0;M<Se.length;M++)Mt[M].checked=Se[M].checked;var Qt="select",as=ie.querySelectorAll(Qt),Ys=K.querySelectorAll(Qt);for(M=0;M<as.length;M++)Ys[M].value=as[M].value}if(x)for(var js=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),Lr=function(Lt,Ce){var Fe=js[Lt];if(Fe.tagName.toLowerCase()==="style"){var Gt=K.createElement(Fe.tagName),Dr=Fe.sheet;if(Dr){var Pa="";try{for(var Hi=Dr.cssRules.length,is=0;is<Hi;++is)typeof Dr.cssRules[is].cssText=="string"&&(Pa+="".concat(Dr.cssRules[is].cssText,`\r
`))}catch{y.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",Fe],"warning")}Gt.setAttribute("id","react-to-print-".concat(Lt)),z&&Gt.setAttribute("nonce",z),Gt.appendChild(K.createTextNode(Pa)),K.head.appendChild(Gt)}}else if(Fe.getAttribute("href"))if(Fe.hasAttribute("disabled"))y.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",Fe],"warning"),$(Fe);else{for(var Et=K.createElement(Fe.tagName),Gg=(is=0,Fe.attributes.length);is<Gg;++is){var qo=Fe.attributes[is];qo&&Et.setAttribute(qo.nodeName,qo.nodeValue||"")}Et.onload=function(){return $(Et)},Et.onerror=function(Jg,C2,E2,P2,Yg){return $(Et,["Failed to load",Et,"Error:",Yg])},z&&Et.setAttribute("nonce",z),K.head.appendChild(Et)}else y.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",Fe],"warning"),$(Fe)},Qg=(M=0,js.length);M<Qg;++M)Lr(M)}y.numResourcesToLoad!==0&&x||y.triggerPrint(X)},y.handleRemoveIframe(!0),document.body.appendChild(X)}else y.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else y.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else y.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},y.handleRemoveIframe=function(j){var k=y.props.removeAfterPrint;if(j||k){var N=document.getElementById("printWindow");N&&document.body.removeChild(N)}},y.logMessages=function(j,k){k===void 0&&(k="error"),y.props.suppressErrors||(k==="error"?console.error(j):k==="warning"?console.warn(j):k==="debug"&&console.debug(j))},y}return f.__extends(m,p),m.prototype.handleClick=function(y,j){var k=this,N=this.props,R=N.onBeforeGetContent,x=N.onPrintError;if(R){var I=R();I&&typeof I.then=="function"?I.then(function(){return k.handlePrint(j)}).catch(function(T){x&&x("onBeforeGetContent",T)}):this.handlePrint(j)}else this.handlePrint(j)},m.prototype.render=function(){var y=this.props,j=y.children,k=y.trigger;if(k)return h.cloneElement(k(),{onClick:this.handleClick.bind(this)});if(!g.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var N={handlePrint:this.handleClick.bind(this)};return h.createElement(g.PrintContext.Provider,{value:N},j)},m.defaultProps=w.defaultProps,m}(h.Component);u.ReactToPrint=_},940:function(c,u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultProps=void 0,u.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.useReactToPrint=void 0;var f=d(316),h=d(496),v=d(428),g=d(940),w=d(860),_=Object.prototype.hasOwnProperty.call(h,"useMemo")&&Object.prototype.hasOwnProperty.call(h,"useCallback");u.useReactToPrint=function(p){if(!_)return p.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var m=h.useMemo(function(){return new v.ReactToPrint(f.__assign(f.__assign({},g.defaultProps),p))},[p]);return h.useCallback(function(y,j){return(0,w.wrapCallbackWithArgs)(m,m.handleClick,j)(y)},[m])}},860:function(c,u,d){Object.defineProperty(u,"__esModule",{value:!0}),u.wrapCallbackWithArgs=void 0;var f=d(316);u.wrapCallbackWithArgs=function(h,v){for(var g=[],w=2;w<arguments.length;w++)g[w-2]=arguments[w];return function(){for(var _=[],p=0;p<arguments.length;p++)_[p]=arguments[p];return v.apply(h,f.__spreadArray(f.__spreadArray([],f.__read(_),!1),f.__read(g),!1))}}},496:function(c){c.exports=s},190:function(c){c.exports=n},316:function(c,u,d){d.r(u),d.d(u,{__addDisposableResource:function(){return K},__assign:function(){return v},__asyncDelegator:function(){return me},__asyncGenerator:function(){return he},__asyncValues:function(){return V},__await:function(){return re},__awaiter:function(){return N},__classPrivateFieldGet:function(){return P},__classPrivateFieldIn:function(){return H},__classPrivateFieldSet:function(){return q},__createBinding:function(){return x},__decorate:function(){return w},__disposeResources:function(){return Ne},__esDecorate:function(){return p},__exportStar:function(){return I},__extends:function(){return h},__generator:function(){return R},__importDefault:function(){return b},__importStar:function(){return $},__makeTemplateObject:function(){return G},__metadata:function(){return k},__param:function(){return _},__propKey:function(){return y},__read:function(){return z},__rest:function(){return g},__runInitializers:function(){return m},__setFunctionName:function(){return j},__spread:function(){return W},__spreadArray:function(){return ie},__spreadArrays:function(){return X},__values:function(){return T}});var f=function(O,F){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,S){M.__proto__=S}||function(M,S){for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(M[A]=S[A])},f(O,F)};function h(O,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");function M(){this.constructor=O}f(O,F),O.prototype=F===null?Object.create(F):(M.prototype=F.prototype,new M)}var v=function(){return v=Object.assign||function(O){for(var F,M=1,S=arguments.length;M<S;M++)for(var A in F=arguments[M])Object.prototype.hasOwnProperty.call(F,A)&&(O[A]=F[A]);return O},v.apply(this,arguments)};function g(O,F){var M={};for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&F.indexOf(S)<0&&(M[S]=O[S]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function"){var A=0;for(S=Object.getOwnPropertySymbols(O);A<S.length;A++)F.indexOf(S[A])<0&&Object.prototype.propertyIsEnumerable.call(O,S[A])&&(M[S[A]]=O[S[A]])}return M}function w(O,F,M,S){var A,B=arguments.length,J=B<3?F:S===null?S=Object.getOwnPropertyDescriptor(F,M):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")J=Reflect.decorate(O,F,M,S);else for(var ge=O.length-1;ge>=0;ge--)(A=O[ge])&&(J=(B<3?A(J):B>3?A(F,M,J):A(F,M))||J);return B>3&&J&&Object.defineProperty(F,M,J),J}function _(O,F){return function(M,S){F(M,S,O)}}function p(O,F,M,S,A,B){function J(Lr){if(Lr!==void 0&&typeof Lr!="function")throw new TypeError("Function expected");return Lr}for(var ge,Re=S.kind,Ve=Re==="getter"?"get":Re==="setter"?"set":"value",oe=!F&&O?S.static?O:O.prototype:null,Se=F||(oe?Object.getOwnPropertyDescriptor(oe,S.name):{}),Mt=!1,Qt=M.length-1;Qt>=0;Qt--){var as={};for(var Ys in S)as[Ys]=Ys==="access"?{}:S[Ys];for(var Ys in S.access)as.access[Ys]=S.access[Ys];as.addInitializer=function(Lr){if(Mt)throw new TypeError("Cannot add initializers after decoration has completed");B.push(J(Lr||null))};var js=(0,M[Qt])(Re==="accessor"?{get:Se.get,set:Se.set}:Se[Ve],as);if(Re==="accessor"){if(js===void 0)continue;if(js===null||typeof js!="object")throw new TypeError("Object expected");(ge=J(js.get))&&(Se.get=ge),(ge=J(js.set))&&(Se.set=ge),(ge=J(js.init))&&A.unshift(ge)}else(ge=J(js))&&(Re==="field"?A.unshift(ge):Se[Ve]=ge)}oe&&Object.defineProperty(oe,S.name,Se),Mt=!0}function m(O,F,M){for(var S=arguments.length>2,A=0;A<F.length;A++)M=S?F[A].call(O,M):F[A].call(O);return S?M:void 0}function y(O){return typeof O=="symbol"?O:"".concat(O)}function j(O,F,M){return typeof F=="symbol"&&(F=F.description?"[".concat(F.description,"]"):""),Object.defineProperty(O,"name",{configurable:!0,value:M?"".concat(M," ",F):F})}function k(O,F){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,F)}function N(O,F,M,S){return new(M||(M=Promise))(function(A,B){function J(Ve){try{Re(S.next(Ve))}catch(oe){B(oe)}}function ge(Ve){try{Re(S.throw(Ve))}catch(oe){B(oe)}}function Re(Ve){var oe;Ve.done?A(Ve.value):(oe=Ve.value,oe instanceof M?oe:new M(function(Se){Se(oe)})).then(J,ge)}Re((S=S.apply(O,F||[])).next())})}function R(O,F){var M,S,A,B,J={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return B={next:ge(0),throw:ge(1),return:ge(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B;function ge(Re){return function(Ve){return function(oe){if(M)throw new TypeError("Generator is already executing.");for(;B&&(B=0,oe[0]&&(J=0)),J;)try{if(M=1,S&&(A=2&oe[0]?S.return:oe[0]?S.throw||((A=S.return)&&A.call(S),0):S.next)&&!(A=A.call(S,oe[1])).done)return A;switch(S=0,A&&(oe=[2&oe[0],A.value]),oe[0]){case 0:case 1:A=oe;break;case 4:return J.label++,{value:oe[1],done:!1};case 5:J.label++,S=oe[1],oe=[0];continue;case 7:oe=J.ops.pop(),J.trys.pop();continue;default:if(!((A=(A=J.trys).length>0&&A[A.length-1])||oe[0]!==6&&oe[0]!==2)){J=0;continue}if(oe[0]===3&&(!A||oe[1]>A[0]&&oe[1]<A[3])){J.label=oe[1];break}if(oe[0]===6&&J.label<A[1]){J.label=A[1],A=oe;break}if(A&&J.label<A[2]){J.label=A[2],J.ops.push(oe);break}A[2]&&J.ops.pop(),J.trys.pop();continue}oe=F.call(O,J)}catch(Se){oe=[6,Se],S=0}finally{M=A=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([Re,Ve])}}}var x=Object.create?function(O,F,M,S){S===void 0&&(S=M);var A=Object.getOwnPropertyDescriptor(F,M);A&&!("get"in A?!F.__esModule:A.writable||A.configurable)||(A={enumerable:!0,get:function(){return F[M]}}),Object.defineProperty(O,S,A)}:function(O,F,M,S){S===void 0&&(S=M),O[S]=F[M]};function I(O,F){for(var M in O)M==="default"||Object.prototype.hasOwnProperty.call(F,M)||x(F,O,M)}function T(O){var F=typeof Symbol=="function"&&Symbol.iterator,M=F&&O[F],S=0;if(M)return M.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&S>=O.length&&(O=void 0),{value:O&&O[S++],done:!O}}};throw new TypeError(F?"Object is not iterable.":"Symbol.iterator is not defined.")}function z(O,F){var M=typeof Symbol=="function"&&O[Symbol.iterator];if(!M)return O;var S,A,B=M.call(O),J=[];try{for(;(F===void 0||F-- >0)&&!(S=B.next()).done;)J.push(S.value)}catch(ge){A={error:ge}}finally{try{S&&!S.done&&(M=B.return)&&M.call(B)}finally{if(A)throw A.error}}return J}function W(){for(var O=[],F=0;F<arguments.length;F++)O=O.concat(z(arguments[F]));return O}function X(){for(var O=0,F=0,M=arguments.length;F<M;F++)O+=arguments[F].length;var S=Array(O),A=0;for(F=0;F<M;F++)for(var B=arguments[F],J=0,ge=B.length;J<ge;J++,A++)S[A]=B[J];return S}function ie(O,F,M){if(M||arguments.length===2)for(var S,A=0,B=F.length;A<B;A++)!S&&A in F||(S||(S=Array.prototype.slice.call(F,0,A)),S[A]=F[A]);return O.concat(S||Array.prototype.slice.call(F))}function re(O){return this instanceof re?(this.v=O,this):new re(O)}function he(O,F,M){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,A=M.apply(O,F||[]),B=[];return S={},J("next"),J("throw"),J("return"),S[Symbol.asyncIterator]=function(){return this},S;function J(Se){A[Se]&&(S[Se]=function(Mt){return new Promise(function(Qt,as){B.push([Se,Mt,Qt,as])>1||ge(Se,Mt)})})}function ge(Se,Mt){try{(Qt=A[Se](Mt)).value instanceof re?Promise.resolve(Qt.value.v).then(Re,Ve):oe(B[0][2],Qt)}catch(as){oe(B[0][3],as)}var Qt}function Re(Se){ge("next",Se)}function Ve(Se){ge("throw",Se)}function oe(Se,Mt){Se(Mt),B.shift(),B.length&&ge(B[0][0],B[0][1])}}function me(O){var F,M;return F={},S("next"),S("throw",function(A){throw A}),S("return"),F[Symbol.iterator]=function(){return this},F;function S(A,B){F[A]=O[A]?function(J){return(M=!M)?{value:re(O[A](J)),done:!1}:B?B(J):J}:B}}function V(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F,M=O[Symbol.asyncIterator];return M?M.call(O):(O=T(O),F={},S("next"),S("throw"),S("return"),F[Symbol.asyncIterator]=function(){return this},F);function S(A){F[A]=O[A]&&function(B){return new Promise(function(J,ge){(function(Re,Ve,oe,Se){Promise.resolve(Se).then(function(Mt){Re({value:Mt,done:oe})},Ve)})(J,ge,(B=O[A](B)).done,B.value)})}}}function G(O,F){return Object.defineProperty?Object.defineProperty(O,"raw",{value:F}):O.raw=F,O}var Z=Object.create?function(O,F){Object.defineProperty(O,"default",{enumerable:!0,value:F})}:function(O,F){O.default=F};function $(O){if(O&&O.__esModule)return O;var F={};if(O!=null)for(var M in O)M!=="default"&&Object.prototype.hasOwnProperty.call(O,M)&&x(F,O,M);return Z(F,O),F}function b(O){return O&&O.__esModule?O:{default:O}}function P(O,F,M,S){if(M==="a"&&!S)throw new TypeError("Private accessor was defined without a getter");if(typeof F=="function"?O!==F||!S:!F.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return M==="m"?S:M==="a"?S.call(O):S?S.value:F.get(O)}function q(O,F,M,S,A){if(S==="m")throw new TypeError("Private method is not writable");if(S==="a"&&!A)throw new TypeError("Private accessor was defined without a setter");if(typeof F=="function"?O!==F||!A:!F.has(O))throw new TypeError("Cannot write private member to an object whose class did not declare it");return S==="a"?A.call(O,M):A?A.value=M:F.set(O,M),M}function H(O,F){if(F===null||typeof F!="object"&&typeof F!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof O=="function"?F===O:O.has(F)}function K(O,F,M){if(F!=null){if(typeof F!="object"&&typeof F!="function")throw new TypeError("Object expected.");var S;if(M){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");S=F[Symbol.asyncDispose]}if(S===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");S=F[Symbol.dispose]}if(typeof S!="function")throw new TypeError("Object not disposable.");O.stack.push({value:F,dispose:S,async:M})}else M&&O.stack.push({async:!0});return F}var ce=typeof SuppressedError=="function"?SuppressedError:function(O,F,M){var S=new Error(M);return S.name="SuppressedError",S.error=O,S.suppressed=F,S};function Ne(O){function F(M){O.error=O.hasError?new ce(M,O.error,"An error was suppressed during disposal."):M,O.hasError=!0}return function M(){for(;O.stack.length;){var S=O.stack.pop();try{var A=S.dispose&&S.dispose.call(S.value);if(S.async)return Promise.resolve(A).then(M,function(B){return F(B),M()})}catch(B){F(B)}}if(O.hasError)throw O.error}()}u.default={__extends:h,__assign:v,__rest:g,__decorate:w,__param:_,__metadata:k,__awaiter:N,__generator:R,__createBinding:x,__exportStar:I,__values:T,__read:z,__spread:W,__spreadArrays:X,__spreadArray:ie,__await:re,__asyncGenerator:he,__asyncDelegator:me,__asyncValues:V,__makeTemplateObject:G,__importStar:$,__importDefault:b,__classPrivateFieldGet:P,__classPrivateFieldSet:q,__classPrivateFieldIn:H,__addDisposableResource:K,__disposeResources:Ne}}},i={};function l(c){var u=i[c];if(u!==void 0)return u.exports;var d=i[c]={exports:{}};return a[c](d,d.exports,l),d.exports}l.d=function(c,u){for(var d in u)l.o(u,d)&&!l.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:u[d]})},l.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},l.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var o={};return function(){var c=o;Object.defineProperty(c,"__esModule",{value:!0}),c.useReactToPrint=c.ReactToPrint=c.PrintContextConsumer=void 0;var u=l(328);Object.defineProperty(c,"PrintContextConsumer",{enumerable:!0,get:function(){return u.PrintContextConsumer}});var d=l(428);Object.defineProperty(c,"ReactToPrint",{enumerable:!0,get:function(){return d.ReactToPrint}});var f=l(892);Object.defineProperty(c,"useReactToPrint",{enumerable:!0,get:function(){return f.useReactToPrint}});var h=l(428);c.default=h.ReactToPrint}(),o}()})})(Wg);var Vg=Wg.exports;const Hg=C.forwardRef(({purchase:e,items:t,supplier:s,branch:n},a)=>r.jsxs("div",{ref:a,className:"p-8 bg-white text-black",dir:"rtl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 border-b-2 pb-4",children:[r.jsx("div",{children:r.jsx("img",{src:"/el-fagr/logo.jpg",alt:" ",className:"w-24 h-24 object-contain"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),r.jsx("p",{className:"text-lg",children:" "}),r.jsx("p",{className:"text-sm",children:"73     "}),r.jsx("p",{className:"text-sm",children:": 02-24156242 / 02-24142417"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("h2",{className:"text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-sm",children:"Purchase Invoice"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:" :"})," ",e.invoice_number]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",je(e.invoice_date)]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",n==null?void 0:n.name_ar]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",(s==null?void 0:s.name_ar)||(s==null?void 0:s.name)]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",s==null?void 0:s.phone]}),(s==null?void 0:s.address)&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",s.address]})]})]}),r.jsxs("table",{className:"w-full border-collapse mb-6",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-200",children:[r.jsx("th",{className:"border p-2 text-right",children:"#"}),r.jsx("th",{className:"border p-2 text-right",children:""}),r.jsx("th",{className:"border p-2 text-center",children:""}),r.jsx("th",{className:"border p-2 text-right",children:" "}),r.jsx("th",{className:"border p-2 text-right",children:""})]})}),r.jsx("tbody",{children:t.map((i,l)=>{var o,c;return r.jsxs("tr",{children:[r.jsx("td",{className:"border p-2",children:l+1}),r.jsx("td",{className:"border p-2",children:((o=i.product)==null?void 0:o.name_ar)||((c=i.product)==null?void 0:c.name)}),r.jsx("td",{className:"border p-2 text-center",children:i.quantity}),r.jsx("td",{className:"border p-2",children:D(i.unit_price)}),r.jsx("td",{className:"border p-2",children:D(i.total_price)})]},i.id)})})]}),r.jsx("div",{className:"flex justify-end mb-6",children:r.jsxs("div",{className:"w-64",children:[r.jsxs("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{children:" :"}),r.jsx("span",{children:D(e.subtotal||0)})]}),e.discount_amount>0&&r.jsxs("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{children:":"}),r.jsxs("span",{children:["(",D(e.discount_amount),")"]})]}),e.tax_amount>0&&r.jsxs("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(e.tax_amount)})]}),e.expenses_egp>0&&r.jsxs("div",{className:"flex justify-between py-2 border-b",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(e.expenses_egp)})]}),r.jsxs("div",{className:"flex justify-between py-2 font-bold text-lg border-t-2",children:[r.jsx("span",{children:":"}),r.jsx("span",{className:"text-primary",children:D(e.total_amount||0)})]}),r.jsxs("div",{className:"flex justify-between py-2",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(e.paid_amount||0)})]}),e.remaining_amount>0&&r.jsxs("div",{className:"flex justify-between py-2 text-red-600 font-bold",children:[r.jsx("span",{children:":"}),r.jsx("span",{children:D(e.remaining_amount)})]})]})}),e.notes&&r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{children:r.jsx("strong",{children:":"})}),r.jsx("p",{className:"text-sm",children:e.notes})]}),r.jsx("div",{className:"border-t-2 pt-4 mt-8",children:r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"mb-8",children:"_______________"}),r.jsx("p",{children:""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"mb-8",children:"_______________"}),r.jsx("p",{children:""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"mb-8",children:"_______________"}),r.jsx("p",{children:""})]})]})}),r.jsx("div",{className:"text-center text-xs text-gray-500 mt-4",children:r.jsxs("p",{children:[" : ",je(new Date().toISOString())]})})]}));Hg.displayName="PurchaseInvoicePrint";function H1(){const[e,t]=C.useState(""),[s,n]=C.useState(!1),[a,i]=C.useState(null),[l,o]=C.useState(null),[c,u]=C.useState("all"),[d,f]=C.useState("all"),[h,v]=C.useState(1),g=10,w=ot();C.useRef(null);const{data:_}=se({queryKey:["purchases",e,c,d,h],queryFn:async()=>{let j=L.from("purchases").select("*",{count:"exact",head:!0});e&&(j=j.or(`invoice_number.ilike.%${e}%`)),c==="with_tax"?j=j.eq("has_tax",!0):c==="without_tax"&&(j=j.eq("has_tax",!1)),d==="paid"?j=j.eq("payment_status","paid"):d==="credit"&&(j=j.eq("payment_status","credit"));const{count:k}=await j;let N=L.from("purchases").select("*, supplier:suppliers(name, name_ar), branch:branches(name_ar)").order("created_at",{ascending:!1});e&&(N=N.or(`invoice_number.ilike.%${e}%`)),c==="with_tax"?N=N.eq("has_tax",!0):c==="without_tax"&&(N=N.eq("has_tax",!1)),d==="paid"?N=N.eq("payment_status","paid"):d==="credit"&&(N=N.eq("payment_status","credit"));const R=(h-1)*g,x=R+g-1,{data:I}=await N.range(R,x);return{purchases:I||[],totalCount:k||0,totalPages:Math.ceil((k||0)/g)}}}),p=(_==null?void 0:_.purchases)||[],m=(_==null?void 0:_.totalPages)||1,y=(_==null?void 0:_.totalCount)||0;return ns.useEffect(()=>{v(1)},[e,c,d]),r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4 md:mb-6",children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsxs(U,{onClick:()=>n(!0),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"ml-2 h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"  "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ts,{className:"absolute right-3 top-3 h-4 w-4 text-gray-400"}),r.jsx(te,{placeholder:"  ...",value:e,onChange:j=>t(j.target.value),className:"pr-10"})]}),r.jsxs("select",{value:c,onChange:j=>u(j.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"with_tax",children:""}),r.jsx("option",{value:"without_tax",children:" "})]}),r.jsxs("select",{value:d,onChange:j=>f(j.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm","aria-label":" ",children:[r.jsx("option",{value:"all",children:" ()"}),r.jsx("option",{value:"paid",children:""}),r.jsx("option",{value:"credit",children:""})]})]})}),r.jsx(be,{children:!p||p.length===0?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"   "}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-xs sm:text-sm text-muted-foreground",children:[" ",(h-1)*g+1," - ",Math.min(h*g,y),"  ",y," "]}),r.jsx("div",{className:"block md:hidden space-y-3",children:p.map(j=>{var k,N,R;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:j.invoice_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(j.invoice_date||j.created_at||"")})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>i(j.id),title:"",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>o(j.id),title:"",children:r.jsx(ys,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:((k=j.supplier)==null?void 0:k.name_ar)||((N=j.supplier)==null?void 0:N.name)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:(R=j.branch)==null?void 0:R.name_ar})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:D(j.total_amount||0)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:D(j.paid_amount||0)})]})]}),r.jsxs("div",{className:"flex gap-2 flex-wrap",children:[r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:j.has_tax?"":""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:j.payment_status==="paid"?"":""})]})]})},j.id)})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-center py-3 px-2",children:""})]})}),r.jsx("tbody",{children:p.map(j=>{var k,N,R;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2",children:j.invoice_number}),r.jsx("td",{className:"py-3 px-2",children:je(j.invoice_date||j.created_at||"")}),r.jsx("td",{className:"py-3 px-2",children:((k=j.supplier)==null?void 0:k.name_ar)||((N=j.supplier)==null?void 0:N.name)}),r.jsx("td",{className:"py-3 px-2",children:(R=j.branch)==null?void 0:R.name_ar}),r.jsx("td",{className:"py-3 px-2",children:D(j.total_amount||0)}),r.jsx("td",{className:"py-3 px-2",children:D(j.paid_amount||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:j.has_tax?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${j.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:j.payment_status==="paid"?"":""})}),r.jsx("td",{className:"py-3 px-2 text-center",children:r.jsxs("div",{className:"flex gap-1 justify-center",children:[r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>i(j.id),title:" ",children:r.jsx(gt,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>o(j.id),title:"",children:r.jsx(ys,{className:"h-4 w-4"})})]})})]},j.id)})})]})}),m>1&&r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>v(j=>Math.max(1,j-1)),disabled:h===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,m)},(j,k)=>{let N;return m<=5||h<=3?N=k+1:h>=m-2?N=m-4+k:N=h-2+k,r.jsx(U,{variant:h===N?"default":"outline",size:"sm",onClick:()=>v(N),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:N},N)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>v(j=>Math.min(m,j+1)),disabled:h===m,className:"text-xs sm:text-sm",children:""})]})]})})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-6xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsx(Q1,{onClose:()=>n(!1),onSuccess:()=>{n(!1),w.invalidateQueries({queryKey:["purchases"]})}})]})}),a&&r.jsx(Ge,{open:!!a,onOpenChange:()=>i(null),children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsx(G1,{purchaseId:a,onClose:()=>i(null)})]})}),l&&r.jsx(J1,{purchaseId:l,onClose:()=>o(null)})]})}function Q1({onClose:e,onSuccess:t}){const[s,n]=C.useState(""),[a,i]=C.useState(""),[l,o]=C.useState(""),[c,u]=C.useState(""),[d,f]=C.useState([]),[h,v]=C.useState(""),[g,w]=C.useState(""),[_,p]=C.useState(!1),[m,y]=C.useState(!1),[j,k]=C.useState(!1),{data:N}=se({queryKey:["usd-rate"],queryFn:async()=>{const{data:P}=await L.from("system_settings").select("value").eq("key","usd_exchange_rate").single(),q=P?P.value:"50";return parseFloat(q||"50")}}),{data:R}=se({queryKey:["purchase-branches"],queryFn:async()=>{const{data:P}=await L.from("branches").select("*").eq("status","active").order("name_ar");return P||[]}}),{data:x}=se({queryKey:["purchase-suppliers"],queryFn:async()=>{const{data:P}=await L.from("suppliers").select("*").eq("status","active").order("name_ar");return P||[]}}),{data:I}=se({queryKey:["purchase-products",c],queryFn:async()=>{let P=L.from("products").select("*").eq("status","active").order("name_ar");c&&(P=P.or(`code.ilike.%${c}%,name_ar.ilike.%${c}%`));const{data:q}=await P.limit(20);return q||[]}}),T=R==null?void 0:R.find(P=>P.id===s),z=x==null?void 0:x.find(P=>P.id===a),W=d.reduce((P,q)=>P+q.total,0),X=parseFloat(g)||0,ie=X*(N||50),re=W+ie,he=parseFloat(h)||0,me=re-he,V=P=>{if(d.find(H=>H.product.id===P.id))f(d.map(H=>H.product.id===P.id?{...H,quantity:H.quantity+1,total:(H.quantity+1)*H.unit_price}:H));else{const H={id:crypto.randomUUID(),product:P,quantity:1,unit_price:P.purchase_price||0,total:P.purchase_price||0};f([...d,H])}u("")},G=(P,q)=>{f(d.map(H=>{if(H.id===P){const K=Math.max(1,H.quantity+q);return{...H,quantity:K,total:K*H.unit_price}}return H}))},Z=(P,q)=>{f(d.map(H=>H.id===P?{...H,unit_price:q,total:H.quantity*q}:H))},$=P=>{f(d.filter(q=>q.id!==P))},b=vt({mutationFn:async()=>{var S;if(!s||!a)throw new Error("   ");if(d.length===0)throw new Error("  ");const{data:P}=await L.from("users").select("id").limit(1),q=(S=P==null?void 0:P[0])==null?void 0:S.id;if(!q)throw new Error("  ");const H=`PUR-${Date.now()}`,K=me>0?"credit":"paid",ce={invoice_number:H,invoice_date:new Date().toISOString(),supplier_invoice_number:l||null,branch_id:s,supplier_id:a,received_by:q,subtotal:W,expenses_usd:X||null,expenses_egp:ie||null,has_tax:_,payment_status:K,total_amount:re,paid_amount:he,remaining_amount:me>0?me:0,status:"received"},{data:Ne,error:O}=await L.from("purchases").insert(ce).select().single();if(O)throw O;const F=d.map(A=>({purchase_id:Ne.id,product_id:A.product.id,quantity:A.quantity,received_quantity:A.quantity,unit_price:A.unit_price,total_price:A.total})),{error:M}=await L.from("purchase_items").insert(F);if(M)throw M;for(const A of d){const{data:B}=await L.from("inventory").select("id, quantity").eq("product_id",A.product.id).eq("branch_id",s).single();B?await L.from("inventory").update({quantity:(B.quantity||0)+A.quantity}).eq("id",B.id):await L.from("inventory").insert({product_id:A.product.id,branch_id:s,quantity:A.quantity})}return Ne},onSuccess:()=>{alert("    !"),t()},onError:P=>{alert(" : "+P.message)}});return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),r.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-md cursor-pointer hover:bg-muted",onClick:()=>y(!m),children:[r.jsx(Or,{className:"h-4 w-4"}),r.jsx("span",{className:"flex-1",children:T?T.name_ar:" "})]}),m&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 max-h-60 overflow-auto",children:R==null?void 0:R.map(P=>r.jsxs("button",{type:"button",className:"w-full p-3 text-right hover:bg-muted",onClick:()=>{n(P.id),y(!1)},children:[r.jsx("p",{className:"font-medium",children:P.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground",children:P.branch_type==="warehouse"?"":" "})]},P.id))})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:""}),r.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-md cursor-pointer hover:bg-muted",onClick:()=>k(!j),children:[r.jsx(Pi,{className:"h-4 w-4"}),r.jsx("span",{className:"flex-1",children:z?z.name_ar||z.name:" "})]}),j&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 max-h-60 overflow-auto",children:x==null?void 0:x.map(P=>r.jsxs("button",{type:"button",className:"w-full p-3 text-right hover:bg-muted",onClick:()=>{i(P.id),k(!1)},children:[r.jsx("p",{className:"font-medium",children:P.name_ar||P.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:P.phone})]},P.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"   ()"}),r.jsx(te,{value:l,onChange:P=>o(P.target.value),placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),r.jsxs("div",{className:"flex items-center gap-4 h-10",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:!_,onChange:()=>p(!1),className:"w-4 h-4"}),r.jsx("span",{children:" "})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",checked:_,onChange:()=>p(!0),className:"w-4 h-4"}),r.jsx("span",{children:""})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),r.jsx(te,{value:c,onChange:P=>u(P.target.value),placeholder:"  ...",disabled:!s}),c&&I&&I.length>0&&r.jsx("div",{className:"mt-2 border rounded-md max-h-40 overflow-auto",children:I.map(P=>r.jsxs("button",{type:"button",className:"w-full p-2 text-right hover:bg-muted flex justify-between items-center",onClick:()=>V(P),children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:P.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground",children:P.code})]}),r.jsx("p",{className:"text-sm",children:D(P.purchase_price||0)})]},P.id))})]}),r.jsxs("div",{className:"border rounded-md p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:""}),d.length===0?r.jsx("p",{className:"text-center text-muted-foreground py-4",children:"    "}):r.jsx("div",{className:"space-y-2",children:d.map(P=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:P.product.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground",children:P.product.code})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>G(P.id,-1),children:r.jsx(Ro,{className:"h-3 w-3"})}),r.jsx(te,{type:"number",value:P.quantity,onChange:q=>{const H=parseInt(q.target.value)||1;H<1||f(d.map(K=>K.id===P.id?{...K,quantity:H,total:H*K.unit_price}:K))},className:"w-16 h-7 text-center font-bold p-1",min:1}),r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>G(P.id,1),children:r.jsx(jt,{className:"h-3 w-3"})})]}),r.jsx(te,{type:"number",value:P.unit_price,onChange:q=>Z(P.id,parseFloat(q.target.value)||0),className:"w-24 h-8 text-center"}),r.jsx("span",{className:"font-bold w-24 text-left",children:D(P.total)}),r.jsx(U,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>$(P.id),children:r.jsx(Ar,{className:"h-3 w-3 text-destructive"})})]},P.id))})]}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold",children:D(W)})]}),r.jsxs("div",{className:"border rounded-lg p-3 bg-blue-50",children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"  ()"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{type:"number",step:"0.01",value:g,onChange:P=>w(P.target.value),className:"flex-1 h-10",placeholder:"0.00"}),r.jsx("span",{className:"text-sm font-medium",children:"$"})]}),X>0&&r.jsxs("div",{className:"mt-2 flex justify-between text-sm",children:[r.jsxs("span",{className:"text-muted-foreground",children:["  ( : ",N||50," )"]}),r.jsx("span",{className:"font-bold text-blue-700",children:D(ie)})]})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"text-primary",children:D(re)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm",children:""}),r.jsx(te,{type:"number",value:h,onChange:P=>v(P.target.value),className:"flex-1 h-10",placeholder:"0"})]}),me>0&&r.jsxs("div",{className:"flex justify-between text-destructive",children:[r.jsx("span",{children:""}),r.jsx("span",{children:D(me)})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(U,{variant:"outline",onClick:e,children:""}),r.jsxs(U,{onClick:()=>b.mutate(),disabled:b.isPending||d.length===0,children:[r.jsx(U_,{className:"h-4 w-4 ml-2"})," "]})]})]})}function G1({purchaseId:e,onClose:t}){var u,d,f,h,v,g;const[s,n]=C.useState(!1),[a,i]=C.useState(""),l=ot(),{data:o}=se({queryKey:["purchase-details",e],queryFn:async()=>{const{data:w}=await L.from("purchases").select(`
          *,
          supplier:suppliers(name, name_ar, phone),
          branch:branches(name_ar),
          items:purchase_items(
            *,
            product:products(code, name_ar)
          )
        `).eq("id",e).single();return w}});if(!o)return r.jsx("div",{className:"text-center py-8",children:" ..."});return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-md",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-bold",children:o.invoice_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold",children:je(o.invoice_date||"")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold",children:((u=o.supplier)==null?void 0:u.name_ar)||((d=o.supplier)==null?void 0:d.name)}),((f=o.supplier)==null?void 0:f.phone)&&r.jsx("p",{className:"text-xs text-muted-foreground",children:o.supplier.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold",children:(h=o.branch)==null?void 0:h.name_ar})]}),o.supplier_invoice_number&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "}),r.jsx("p",{className:"font-bold",children:o.supplier_invoice_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.has_tax?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:o.has_tax?"":" "})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o.payment_status==="paid"?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:o.payment_status==="paid"?"":""})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold mb-3",children:""}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-center py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""})]})}),r.jsx("tbody",{children:(v=o.items)==null?void 0:v.map(w=>{var _,p;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2",children:(_=w.product)==null?void 0:_.code}),r.jsx("td",{className:"py-2",children:(p=w.product)==null?void 0:p.name_ar}),r.jsx("td",{className:"py-2 text-center",children:w.quantity}),r.jsx("td",{className:"py-2",children:D(w.unit_price)}),r.jsx("td",{className:"py-2",children:D(w.total_price)})]},w.id)})})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold",children:D(o.subtotal||0)})]}),(o.expenses_usd||0)>0&&r.jsx("div",{className:"bg-blue-50 p-2 rounded",children:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"font-bold text-blue-700",children:["$",(g=o.expenses_usd)==null?void 0:g.toFixed(2)," (",D(o.expenses_egp||0),")"]})]})}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"text-primary",children:D(o.total_amount||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"font-bold text-green-600",children:D(o.paid_amount||0)})]}),(o.remaining_amount||0)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"font-bold text-destructive",children:D(o.remaining_amount||0)})]})]}),r.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[(o.remaining_amount||0)>0&&r.jsx(U,{variant:"outline",onClick:()=>n(!0),className:"bg-green-50 hover:bg-green-100",children:" "}),r.jsx(U,{onClick:t,className:"mr-auto",children:""})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{children:[r.jsx(Ze,{children:r.jsx(et,{children:" "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:" "}),r.jsx("p",{className:"text-2xl font-bold text-destructive",children:D(o.remaining_amount||0)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),r.jsx(te,{type:"number",value:a,onChange:w=>i(w.target.value),placeholder:" ",autoFocus:!0})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(U,{variant:"outline",onClick:()=>{n(!1),i("")},children:""}),r.jsx(U,{onClick:()=>c(),disabled:!a||parseFloat(a)<=0,children:" "})]})]})]})})]});async function c(){if(!o){alert("   ");return}const w=parseFloat(a);if(!w||w<=0){alert("   ");return}const _=o.remaining_amount||0;if(w>_){alert("     ");return}try{const p=(o.paid_amount||0)+w,m=(o.total_amount||0)-p,y=m<=0?"paid":"credit",{error:j}=await L.from("purchases").update({paid_amount:p,remaining_amount:m,payment_status:y}).eq("id",e);if(j)throw j;alert("   "),n(!1),i(""),l.invalidateQueries({queryKey:["purchase-details",e]}),l.invalidateQueries({queryKey:["purchases"]})}catch(p){console.error("Error adding payment:",p),alert("    ")}}}function J1({purchaseId:e,onClose:t}){const s=C.useRef(null),{data:n}=se({queryKey:["purchase-print",e],queryFn:async()=>{const{data:l}=await L.from("purchases").select("*, supplier:suppliers(*), branch:branches(*)").eq("id",e).single();return l}}),{data:a}=se({queryKey:["purchase-items-print",e],queryFn:async()=>{const{data:l}=await L.from("purchase_items").select("*, product:products(*)").eq("purchase_id",e);return l||[]}}),i=Vg.useReactToPrint({content:()=>s.current,onAfterPrint:t});return!n||!a?r.jsx(Ge,{open:!0,onOpenChange:t,children:r.jsx(Je,{children:r.jsx("div",{className:"text-center py-8",children:" ..."})})}):r.jsx(Ge,{open:!0,onOpenChange:t,children:r.jsxs(Je,{className:"max-w-4xl",children:[r.jsx(Ze,{children:r.jsx(et,{children:"  "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"max-h-[60vh] overflow-auto border rounded",children:r.jsx(Hg,{ref:s,purchase:n,items:a,supplier:n.supplier,branch:n.branch})}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(U,{variant:"outline",onClick:t,children:""}),r.jsxs(U,{onClick:i,children:[r.jsx(ys,{className:"ml-2 h-4 w-4"}),""]})]})]})]})})}const gl={active:{label:"",color:"bg-green-100 text-green-700"},inactive:{label:" ",color:"bg-gray-100 text-gray-700"},blocked:{label:"",color:"bg-red-100 text-red-700"}};function Y1(){const[e,t]=C.useState(""),[s,n]=C.useState(!1),[a,i]=C.useState(1),l=10,[o,c]=C.useState({name_ar:"",phone:"",email:"",address:"",credit_limit:0}),u=ot(),{data:d,isLoading:f}=se({queryKey:["suppliers",e,a],queryFn:async()=>{let p=L.from("suppliers").select("*",{count:"exact",head:!0});e&&(p=p.or(`name.ilike.%${e}%,name_ar.ilike.%${e}%,code.ilike.%${e}%,phone.ilike.%${e}%`));const{count:m}=await p;let y=L.from("suppliers").select("*").order("created_at",{ascending:!1});e&&(y=y.or(`name.ilike.%${e}%,name_ar.ilike.%${e}%,code.ilike.%${e}%,phone.ilike.%${e}%`));const j=(a-1)*l,k=j+l-1,{data:N}=await y.range(j,k);return{suppliers:N||[],totalCount:m||0,totalPages:Math.ceil((m||0)/l)}}}),h=(d==null?void 0:d.suppliers)||[],v=(d==null?void 0:d.totalPages)||1,g=(d==null?void 0:d.totalCount)||0;ns.useEffect(()=>{i(1)},[e]);const w=vt({mutationFn:async p=>{await L.from("suppliers").delete().eq("id",p)},onSuccess:()=>u.invalidateQueries({queryKey:["suppliers"]})}),_=vt({mutationFn:async()=>{const p=`SUP-${Date.now()}`,{error:m}=await L.from("suppliers").insert({code:p,name_ar:o.name_ar,name:o.name_ar,phone:o.phone,email:o.email||null,address:o.address||null,credit_limit:o.credit_limit,current_balance:0,status:"active",rating:0});if(m)throw m},onSuccess:()=>{u.invalidateQueries({queryKey:["suppliers"]}),n(!1),c({name_ar:"",phone:"",email:"",address:"",credit_limit:0}),alert("   !")},onError:p=>alert(": "+p.message)});return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs(U,{onClick:()=>n(!0),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"})," "]})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{onClose:()=>n(!1),className:"max-w-[95vw] sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"  *"}),r.jsx(te,{id:"name",value:o.name_ar,onChange:p=>c({...o,name_ar:p.target.value}),placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"text-sm font-medium",children:"  *"}),r.jsx(te,{id:"phone",value:o.phone,onChange:p=>c({...o,phone:p.target.value}),placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:" "}),r.jsx(te,{id:"email",type:"email",value:o.email,onChange:p=>c({...o,email:p.target.value}),placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"address",className:"text-sm font-medium",children:""}),r.jsx(te,{id:"address",value:o.address,onChange:p=>c({...o,address:p.target.value}),placeholder:" "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"credit",className:"text-sm font-medium",children:" "}),r.jsx(te,{id:"credit",type:"number",value:o.credit_limit,onChange:p=>c({...o,credit_limit:parseFloat(p.target.value)||0}),placeholder:"0"})]})]}),r.jsxs(Ps,{className:"flex-col sm:flex-row gap-2",children:[r.jsx(U,{variant:"outline",onClick:()=>n(!1),className:"w-full sm:w-auto",children:""}),r.jsx(U,{onClick:()=>_.mutate(),disabled:!o.name_ar||!o.phone||_.isPending,className:"w-full sm:w-auto",children:_.isPending?" ...":""})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"     ...",value:e,onChange:p=>t(p.target.value),className:"pr-10"})]})}),r.jsx(be,{children:f?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):h!=null&&h.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-sm text-muted-foreground",children:[" ",(a-1)*l+1," - ",Math.min(a*l,g),"  ",g," "]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:h.map(p=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:p.code}),r.jsx("td",{className:"py-3 px-2",children:p.name_ar||p.name}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Fm,{className:"h-3 w-3"}),p.phone]}),p.email&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Dm,{className:"h-3 w-3"}),p.email]})]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:p.current_balance&&p.current_balance>0?"text-destructive":"",children:D(p.current_balance||0)})}),r.jsx("td",{className:"py-3 px-2",children:D(p.credit_limit||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(m=>r.jsx(Um,{className:`h-4 w-4 ${m<=(p.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},m))})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${gl[p.status||"active"].color}`,children:gl[p.status||"active"].label})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(U,{variant:"ghost",size:"icon",children:r.jsx(Ei,{className:"h-4 w-4"})}),r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>w.mutate(p.id),children:r.jsx(Ar,{className:"h-4 w-4 text-destructive"})})]})})]},p.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:h.map(p=>r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:p.name_ar||p.name}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:p.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${gl[p.status||"active"].color}`,children:gl[p.status||"active"].label})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fm,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:p.phone})]}),p.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dm,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-xs",children:p.email})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:`font-bold ${p.current_balance&&p.current_balance>0?"text-destructive":""}`,children:D(p.current_balance||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:D(p.credit_limit||0)})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(m=>r.jsx(Um,{className:`h-4 w-4 ${m<=(p.rating||0)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},m))})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(U,{variant:"outline",size:"sm",className:"flex-1",children:[r.jsx(Ei,{className:"h-4 w-4 ml-2"}),""]}),r.jsxs(U,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>w.mutate(p.id),children:[r.jsx(Ar,{className:"h-4 w-4 ml-2 text-destructive"}),""]})]})]})},p.id))}),v>1&&r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>i(p=>Math.max(1,p-1)),disabled:a===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,v)},(p,m)=>{let y=v<=5||a<=3?m+1:a>=v-2?v-4+m:a-2+m;return r.jsx(U,{variant:a===y?"default":"outline",size:"sm",onClick:()=>i(y),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:y},y)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>i(p=>Math.min(v,p+1)),disabled:a===v,className:"text-xs sm:text-sm",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}const Va={pending:{label:"",color:"bg-yellow-100 text-yellow-700"},approved:{label:" ",color:"bg-green-100 text-green-700"},rejected:{label:"",color:"bg-red-100 text-red-700"},completed:{label:"",color:"bg-green-100 text-green-700"}},Ha={draft:{label:"",color:"bg-gray-100 text-gray-700"},approved:{label:" ",color:"bg-blue-100 text-blue-700"},completed:{label:"",color:"bg-green-100 text-green-700"}};function X1(){const[e,t]=C.useState(""),[s,n]=C.useState("sales"),[a,i]=C.useState(!1),[l,o]=C.useState(null),[c,u]=C.useState(1),[d,f]=C.useState(1),h=10,v=ot(),{data:g,isLoading:w}=se({queryKey:["sales-returns",e,c],queryFn:async()=>{let x=L.from("sales_returns").select("*",{count:"exact",head:!0});e&&(x=x.ilike("return_number",`%${e}%`));const{count:I}=await x;let T=L.from("sales_returns").select("*, customer:customers(name, name_ar), branch:branches(name_ar), sale:sales(invoice_number)").order("created_at",{ascending:!1});e&&(T=T.ilike("return_number",`%${e}%`));const z=(c-1)*h,W=z+h-1,{data:X}=await T.range(z,W);return{returns:X||[],totalCount:I||0,totalPages:Math.ceil((I||0)/h)}},enabled:s==="sales"}),{data:_,isLoading:p}=se({queryKey:["purchase-returns",e,d],queryFn:async()=>{let x=L.from("purchase_returns").select("*",{count:"exact",head:!0});e&&(x=x.ilike("return_number",`%${e}%`));const{count:I}=await x;let T=L.from("purchase_returns").select("*, supplier:suppliers(name, name_ar), branch:branches(name_ar), purchase:purchases(invoice_number)").order("created_at",{ascending:!1});e&&(T=T.ilike("return_number",`%${e}%`));const z=(d-1)*h,W=z+h-1,{data:X}=await T.range(z,W);return{returns:X||[],totalCount:I||0,totalPages:Math.ceil((I||0)/h)}},enabled:s==="purchases"}),m=(g==null?void 0:g.returns)||[],y=(g==null?void 0:g.totalPages)||1,j=(g==null?void 0:g.totalCount)||0,k=(_==null?void 0:_.returns)||[],N=(_==null?void 0:_.totalPages)||1,R=(_==null?void 0:_.totalCount)||0;return ns.useEffect(()=>{u(1),f(1)},[e]),r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"   "})]}),r.jsxs(U,{onClick:()=>i(!0),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsxs("div",{className:"flex gap-2 border-b",children:[r.jsxs("button",{onClick:()=>n("sales"),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${s==="sales"?"border-primary text-primary":"border-transparent hover:text-primary"}`,children:[r.jsx(Ci,{className:"h-4 w-4"})," "]}),r.jsxs("button",{onClick:()=>n("purchases"),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${s==="purchases"?"border-primary text-primary":"border-transparent hover:text-primary"}`,children:[r.jsx(Ci,{className:"h-4 w-4"})," "]})]}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"  ...",value:e,onChange:x=>t(x.target.value),className:"pr-10"})]})}),r.jsx(be,{children:s==="sales"?w?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):m!=null&&m.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:m.map(x=>{var I,T,z;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:x.return_number}),r.jsx("td",{className:"py-3 px-2",children:je(x.return_date||x.created_at)}),r.jsx("td",{className:"py-3 px-2",children:(I=x.sale)==null?void 0:I.invoice_number}),r.jsx("td",{className:"py-3 px-2",children:((T=x.customer)==null?void 0:T.name_ar)||((z=x.customer)==null?void 0:z.name)||"-"}),r.jsx("td",{className:"py-3 px-2",children:D(x.total_amount||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Va[x.status||"pending"].color}`,children:Va[x.status||"pending"].label})}),r.jsxs("td",{className:"py-3 px-2 flex gap-1",children:[r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>o(x.id),children:r.jsx(gt,{className:"h-4 w-4"})}),x.status==="pending"&&r.jsx(U,{variant:"ghost",size:"sm",onClick:async()=>{const{error:W}=await L.from("sales_returns").update({status:"completed"}).eq("id",x.id);W||(alert("  !"),v.invalidateQueries({queryKey:["sales-returns"]}))},children:""})]})]},x.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:m.map(x=>{var I,T,z;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:x.return_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(x.return_date||x.created_at)})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Va[x.status||"pending"].color}`,children:Va[x.status||"pending"].label})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:(I=x.sale)==null?void 0:I.invoice_number})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:((T=x.customer)==null?void 0:T.name_ar)||((z=x.customer)==null?void 0:z.name)||"-"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-primary",children:D(x.total_amount||0)})]})]}),r.jsxs("div",{className:"flex gap-2 pt-2",children:[r.jsxs(U,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>o(x.id),children:[r.jsx(gt,{className:"h-4 w-4 ml-2"}),""]}),x.status==="pending"&&r.jsx(U,{size:"sm",className:"flex-1",onClick:async()=>{const{error:W}=await L.from("sales_returns").update({status:"completed"}).eq("id",x.id);W||(alert("  !"),v.invalidateQueries({queryKey:["sales-returns"]}))},children:""})]})]})},x.id)})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(c-1)*h+1,"-",Math.min(c*h,j),"  ",j]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(x=>Math.max(1,x-1)),disabled:c===1,className:"text-xs sm:text-sm",children:""}),Array.from({length:Math.min(5,y)},(x,I)=>{let T;return y<=5||c<=3?T=I+1:c>=y-2?T=y-4+I:T=c-2+I,r.jsx(U,{variant:c===T?"default":"outline",size:"sm",onClick:()=>u(T),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:T},T)}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>u(x=>Math.min(y,x+1)),disabled:c===y,className:"text-xs sm:text-sm",children:""})]})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "}):p?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):k!=null&&k.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:k.map(x=>{var I,T,z;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:x.return_number}),r.jsx("td",{className:"py-3 px-2",children:je(x.return_date||x.created_at)}),r.jsx("td",{className:"py-3 px-2",children:(I=x.purchase)==null?void 0:I.invoice_number}),r.jsx("td",{className:"py-3 px-2",children:((T=x.supplier)==null?void 0:T.name_ar)||((z=x.supplier)==null?void 0:z.name)}),r.jsx("td",{className:"py-3 px-2",children:D(x.total_amount||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Ha[x.status||"draft"].color}`,children:Ha[x.status||"draft"].label})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>o(x.id),children:r.jsx(gt,{className:"h-4 w-4"})})})]},x.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:k.map(x=>{var I,T,z;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:x.return_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(x.return_date||x.created_at)})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Ha[x.status||"draft"].color}`,children:Ha[x.status||"draft"].label})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:(I=x.purchase)==null?void 0:I.invoice_number})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:((T=x.supplier)==null?void 0:T.name_ar)||((z=x.supplier)==null?void 0:z.name)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-primary",children:D(x.total_amount||0)})]})]}),r.jsxs(U,{variant:"outline",size:"sm",className:"w-full",onClick:()=>o(x.id),children:[r.jsx(gt,{className:"h-4 w-4 ml-2"})," "]})]})},x.id)})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(d-1)*h+1,"-",Math.min(d*h,R),"  ",R]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>f(x=>Math.max(1,x-1)),disabled:d===1,className:"text-xs sm:text-sm",children:""}),Array.from({length:Math.min(5,N)},(x,I)=>{let T;return N<=5||d<=3?T=I+1:d>=N-2?T=N-4+I:T=d-2+I,r.jsx(U,{variant:d===T?"default":"outline",size:"sm",onClick:()=>f(T),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:T},T)}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>f(x=>Math.min(N,x+1)),disabled:d===N,className:"text-xs sm:text-sm",children:""})]})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]}),r.jsx(Ge,{open:a,onOpenChange:i,children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-6xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:s==="sales"?"  ":"  "})}),s==="sales"?r.jsx(Z1,{onClose:()=>i(!1),onSuccess:()=>i(!1)}):r.jsx(e2,{onClose:()=>i(!1),onSuccess:()=>i(!1)})]})}),l&&r.jsx(Ge,{open:!!l,onOpenChange:()=>o(null),children:r.jsxs(Je,{className:"max-w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:" "})}),r.jsx(t2,{returnId:l,returnType:s,onClose:()=>o(null)})]})})]})}function Z1({onClose:e,onSuccess:t}){const[s,n]=C.useState(""),[a,i]=C.useState(null),[l,o]=C.useState([]),[c,u]=C.useState([]),[d,f]=C.useState(""),h=ot(),{data:v}=se({queryKey:["return-sales-search",s],queryFn:async()=>{if(!s)return[];const{data:j}=await L.from("sales").select("*, branch:branches(name_ar)").or(`invoice_number.ilike.%${s}%`).eq("status","paid").order("created_at",{ascending:!1}).limit(10);return j||[]},enabled:s.length>0}),g=async j=>{const{data:k}=await L.from("sale_items").select("*, product:products(code, name_ar)").eq("sale_id",j);k&&(o(k),u(k.map(N=>{var R,x;return{id:crypto.randomUUID(),sale_item_id:N.id,product_id:N.product_id,product_name:((R=N.product)==null?void 0:R.name_ar)||"",product_code:((x=N.product)==null?void 0:x.code)||"",original_quantity:N.quantity,return_quantity:0,unit_price:N.unit_price,total:0}})))},w=j=>{i(j),g(j.id),n("")},_=(j,k)=>{u(c.map(N=>{if(N.id===j){const R=Math.max(0,Math.min(k,N.original_quantity));return{...N,return_quantity:R,total:R*N.unit_price}}return N}))},p=c.reduce((j,k)=>j+k.total,0),m=c.filter(j=>j.return_quantity>0).length,y=vt({mutationFn:async()=>{var re,he;if(!a)throw new Error("  ");const j=c.filter(me=>me.return_quantity>0);if(j.length===0)throw new Error("   ");const{data:k}=await L.from("users").select("id").limit(1),N=(re=k==null?void 0:k[0])==null?void 0:re.id;if(!N)throw new Error("  ");const x={return_number:`SR-${Date.now()}`,return_date:new Date().toISOString(),sale_id:a.id,branch_id:((he=a.branch)!=null&&he.name_ar,null),customer_id:null,requested_by:N,total_amount:p,refund_amount:p,status:"pending"},{data:I}=await L.from("sales").select("branch_id, customer_id").eq("id",a.id).single();I&&(x.branch_id=I.branch_id,x.customer_id=I.customer_id);const{data:T,error:z}=await L.from("sales_returns").insert(x).select().single();if(z)throw z;const W=j.map(me=>({return_id:T.id,sale_item_id:me.sale_item_id,product_id:me.product_id,quantity:me.return_quantity,unit_price:me.unit_price,total_price:me.total})),{error:X}=await L.from("sales_return_items").insert(W);if(X)throw X;const ie=x.branch_id;if(ie)for(const me of j){const{data:V}=await L.from("inventory").select("id, quantity").eq("product_id",me.product_id).eq("branch_id",ie).single();V&&await L.from("inventory").update({quantity:(V.quantity||0)+me.return_quantity}).eq("id",V.id)}return T},onSuccess:()=>{alert("   !"),h.invalidateQueries({queryKey:["sales-returns"]}),t()},onError:j=>{alert(" : "+j.message)}});return r.jsx("div",{className:"space-y-4",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-muted p-4 rounded-md",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-lg",children:a.invoice_number}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[je(a.invoice_date)," - ",a.customer_name||" "]})]}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{i(null),u([])},children:" "})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"  ()"}),r.jsx(te,{value:d,onChange:j=>f(j.target.value),placeholder:" ..."})]}),r.jsxs("div",{className:"border rounded-md p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:""}),r.jsx("div",{className:"space-y-2",children:c.map(j=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:j.product_name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.product_code," -  : ",j.original_quantity]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>_(j.id,j.return_quantity-1),children:r.jsx(Ro,{className:"h-3 w-3"})}),r.jsx(te,{type:"number",value:j.return_quantity,onChange:k=>_(j.id,parseInt(k.target.value)||0),className:"w-16 h-8 text-center",min:0,max:j.original_quantity}),r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>_(j.id,j.return_quantity+1),children:r.jsx(jt,{className:"h-3 w-3"})})]}),r.jsx("span",{className:"font-bold w-24 text-left",children:D(j.total)})]},j.id))})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"font-bold",children:m})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"text-primary",children:D(p)})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(U,{variant:"outline",onClick:e,children:""}),r.jsxs(U,{onClick:()=>y.mutate(),disabled:y.isPending||m===0,children:[r.jsx(Ci,{className:"h-4 w-4 ml-2"})," "]})]})]}):r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"  "}),r.jsx(te,{value:s,onChange:j=>n(j.target.value),placeholder:" ...",autoFocus:!0}),v&&v.length>0&&r.jsx("div",{className:"mt-2 border rounded-md max-h-60 overflow-auto",children:v.map(j=>r.jsxs("button",{type:"button",className:"w-full p-3 text-right hover:bg-muted flex justify-between items-center border-b",onClick:()=>w(j),children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:j.invoice_number}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[je(j.invoice_date)," - ",j.customer_name||" "]})]}),r.jsx("p",{className:"font-bold",children:D(j.total_amount||0)})]},j.id))})]})})}function e2({onClose:e,onSuccess:t}){var j,k;const[s,n]=C.useState(""),[a,i]=C.useState(null),[l,o]=C.useState([]),[c,u]=C.useState([]),[d,f]=C.useState(""),h=ot(),{data:v}=se({queryKey:["return-purchases-search",s],queryFn:async()=>{if(!s)return[];const{data:N}=await L.from("purchases").select("*, supplier:suppliers(name, name_ar), branch:branches(name_ar)").or(`invoice_number.ilike.%${s}%,supplier_invoice_number.ilike.%${s}%`).eq("status","received").order("created_at",{ascending:!1}).limit(10);return N||[]},enabled:s.length>0}),g=async N=>{const{data:R}=await L.from("purchase_items").select("*, product:products(code, name_ar)").eq("purchase_id",N);R&&(o(R),u(R.map(x=>{var I,T;return{id:crypto.randomUUID(),purchase_item_id:x.id,product_id:x.product_id,product_name:((I=x.product)==null?void 0:I.name_ar)||"",product_code:((T=x.product)==null?void 0:T.code)||"",original_quantity:x.quantity,return_quantity:0,unit_price:x.unit_price,total:0}})))},w=N=>{i(N),g(N.id),n("")},_=(N,R)=>{u(c.map(x=>{if(x.id===N){const I=Math.max(0,Math.min(R,x.original_quantity));return{...x,return_quantity:I,total:I*x.unit_price}}return x}))},p=c.reduce((N,R)=>N+R.total,0),m=c.filter(N=>N.return_quantity>0).length,y=vt({mutationFn:async()=>{if(!a)throw new Error("   ");const N=c.filter(re=>re.return_quantity>0);if(N.length===0)throw new Error("   ");const R=`PR-${Date.now()}`,{data:x}=await L.from("purchases").select("branch_id, supplier_id").eq("id",a.id).single();if(!x)throw new Error("   ");const I={return_number:R,return_date:new Date().toISOString(),purchase_id:a.id,branch_id:x.branch_id,supplier_id:x.supplier_id,total_amount:p,credit_amount:p,status:"draft"},{data:T,error:z}=await L.from("purchase_returns").insert(I).select().single();if(z)throw z;const W=N.map(re=>({purchase_return_id:T.id,purchase_item_id:re.purchase_item_id,product_id:re.product_id,quantity:re.return_quantity,unit_price:re.unit_price,total_price:re.total})),{error:X}=await L.from("purchase_return_items").insert(W);if(X)throw X;const ie=x.branch_id;for(const re of N){const{data:he}=await L.from("inventory").select("id, quantity").eq("product_id",re.product_id).eq("branch_id",ie).single();he&&await L.from("inventory").update({quantity:Math.max(0,(he.quantity||0)-re.return_quantity)}).eq("id",he.id)}return T},onSuccess:()=>{alert("    !"),h.invalidateQueries({queryKey:["purchase-returns"]}),t()},onError:N=>{alert(" : "+N.message)}});return r.jsx("div",{className:"space-y-4",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-muted p-4 rounded-md",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-lg",children:a.invoice_number}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[je(a.invoice_date)," - ",((j=a.supplier)==null?void 0:j.name_ar)||((k=a.supplier)==null?void 0:k.name)]}),a.supplier_invoice_number&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:[" : ",a.supplier_invoice_number]})]}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>{i(null),u([])},children:" "})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"  ()"}),r.jsx(te,{value:d,onChange:N=>f(N.target.value),placeholder:"  ..."})]}),r.jsxs("div",{className:"border rounded-md p-4",children:[r.jsx("h3",{className:"font-medium mb-3",children:""}),r.jsx("div",{className:"space-y-2",children:c.map(N=>r.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:N.product_name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[N.product_code," -  : ",N.original_quantity]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>_(N.id,N.return_quantity-1),children:r.jsx(Ro,{className:"h-3 w-3"})}),r.jsx(te,{type:"number",value:N.return_quantity,onChange:R=>_(N.id,parseInt(R.target.value)||0),className:"w-16 h-8 text-center",min:0,max:N.original_quantity}),r.jsx(U,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>_(N.id,N.return_quantity+1),children:r.jsx(jt,{className:"h-3 w-3"})})]}),r.jsx("span",{className:"font-bold w-24 text-left",children:D(N.total)})]},N.id))})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"font-bold",children:m})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"text-primary",children:D(p)})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[r.jsx(U,{variant:"outline",onClick:e,children:""}),r.jsxs(U,{onClick:()=>y.mutate(),disabled:y.isPending||m===0,children:[r.jsx(Ci,{className:"h-4 w-4 ml-2"})," "]})]})]}):r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"   "}),r.jsx(te,{value:s,onChange:N=>n(N.target.value),placeholder:"     ...",autoFocus:!0}),v&&v.length>0&&r.jsx("div",{className:"mt-2 border rounded-md max-h-60 overflow-auto",children:v.map(N=>{var R,x;return r.jsxs("button",{type:"button",className:"w-full p-3 text-right hover:bg-muted flex justify-between items-center border-b",onClick:()=>w(N),children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:N.invoice_number}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[je(N.invoice_date)," - ",((R=N.supplier)==null?void 0:R.name_ar)||((x=N.supplier)==null?void 0:x.name)]}),N.supplier_invoice_number&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:[" : ",N.supplier_invoice_number]})]}),r.jsx("p",{className:"font-bold",children:D(N.total_amount||0)})]},N.id)})})]})})}function t2({returnId:e,returnType:t,onClose:s}){var c,u,d,f,h;const n=t==="sales"?"sales_returns":"purchase_returns",a=t==="sales"?"sales_return_items":"purchase_return_items",{data:i}=se({queryKey:["return-details",e,t],queryFn:async()=>{const{data:v}=await L.from(n).select(`
          *,
          ${t==="sales"?"sale:sales(invoice_number), customer:customers(name_ar, phone)":"purchase:purchases(invoice_number), supplier:suppliers(name_ar, phone)"},
          branch:branches(name_ar)
        `).eq("id",e).single();return v}}),{data:l}=se({queryKey:["return-items",e,t],queryFn:async()=>{const{data:v}=await L.from(a).select(`
          *,
          product:products(code, name_ar)
        `).eq("return_id",e);return v}});if(!i)return r.jsx("div",{className:"text-center py-8",children:" ..."});const o=t==="sales"?Va:Ha;return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted rounded-md",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-bold",children:i.return_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold",children:je(i.return_date)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:t==="sales"?" ":"  "}),r.jsx("p",{className:"font-bold",children:t==="sales"?(c=i.sale)==null?void 0:c.invoice_number:(u=i.purchase)==null?void 0:u.invoice_number})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:t==="sales"?"":""}),r.jsx("p",{className:"font-bold",children:t==="sales"?((d=i.customer)==null?void 0:d.name_ar)||" ":(f=i.supplier)==null?void 0:f.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold",children:(h=i.branch)==null?void 0:h.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${o[i.status||"pending"].color}`,children:o[i.status||"pending"].label})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold mb-3",children:" "}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-center py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""}),r.jsx("th",{className:"text-right py-2",children:""})]})}),r.jsx("tbody",{children:l==null?void 0:l.map(v=>{var g,w;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2",children:(g=v.product)==null?void 0:g.code}),r.jsx("td",{className:"py-2",children:(w=v.product)==null?void 0:w.name_ar}),r.jsx("td",{className:"py-2 text-center",children:v.quantity}),r.jsx("td",{className:"py-2",children:D(v.unit_price)}),r.jsx("td",{className:"py-2",children:D(v.total_price)})]},v.id)})})]})]}),r.jsxs("div",{className:"border-t pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:"  "}),r.jsx("span",{className:"text-primary",children:D(i.total_amount||0)})]}),t==="sales"&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold text-green-600",children:D(i.refund_amount||0)})]}),t==="purchases"&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:" "}),r.jsx("span",{className:"font-bold text-green-600",children:D(i.credit_amount||0)})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(U,{onClick:s,children:""})})]})}const En={pending:{label:"  ",color:"bg-yellow-100 text-yellow-700"},approved:{label:" ",color:"bg-blue-100 text-blue-700"},rejected:{label:"",color:"bg-red-100 text-red-700"},preparing:{label:" ",color:"bg-purple-100 text-purple-700"},in_transit:{label:" ",color:"bg-orange-100 text-orange-700"},partially_received:{label:" ",color:"bg-orange-100 text-orange-700"},received:{label:" ",color:"bg-green-100 text-green-700"},completed:{label:"",color:"bg-green-100 text-green-700"},cancelled:{label:"",color:"bg-gray-100 text-gray-700"}};function s2(){var G,Z;const[e,t]=C.useState(""),[s,n]=C.useState(!1),[a,i]=C.useState(!1),[l,o]=C.useState(null),[c,u]=C.useState(""),[d,f]=C.useState(""),[h,v]=C.useState([]),[g,w]=C.useState(""),[_,p]=C.useState(1),[m,y]=C.useState(1),j=10,k=ot(),{data:N,isLoading:R}=se({queryKey:["transfers",e,m],queryFn:async()=>{let $=L.from("stock_transfers").select("*",{count:"exact",head:!0});e&&($=$.ilike("transfer_number",`%${e}%`));const{count:b}=await $;let P=L.from("stock_transfers").select("*, from_branch:branches!stock_transfers_from_branch_id_fkey(name_ar), to_branch:branches!stock_transfers_to_branch_id_fkey(name_ar)").order("created_at",{ascending:!1});e&&(P=P.ilike("transfer_number",`%${e}%`));const q=(m-1)*j,H=q+j-1,{data:K}=await P.range(q,H);return{transfers:K||[],totalCount:b||0,totalPages:Math.ceil((b||0)/j)}}}),x=(N==null?void 0:N.transfers)||[],I=(N==null?void 0:N.totalPages)||1,T=(N==null?void 0:N.totalCount)||0;ns.useEffect(()=>{y(1)},[e]);const{data:z}=se({queryKey:["branches-list"],queryFn:async()=>{const{data:$}=await L.from("branches").select("id, name_ar").eq("status","active");return $||[]}}),{data:W}=se({queryKey:["products-list"],queryFn:async()=>{const{data:$}=await L.from("products").select("id, code, name_ar, selling_price").eq("status","active");return $||[]}}),X=vt({mutationFn:async()=>{const{data:$}=await L.from("users").select("id").limit(1).single(),b=`TRF-${Date.now()}`,P=h.reduce((K,ce)=>K+ce.quantity*ce.unit_cost,0),{data:q,error:H}=await L.from("stock_transfers").insert({transfer_number:b,transfer_date:new Date().toISOString(),from_branch_id:c,to_branch_id:d,total_items:h.length,total_value:P,status:"completed",requested_by:$==null?void 0:$.id,approved_by:$==null?void 0:$.id}).select().single();if(H)throw H;for(const K of h){await L.from("stock_transfer_items").insert({transfer_id:q.id,product_id:K.product_id,requested_quantity:K.quantity,approved_quantity:K.quantity,shipped_quantity:K.quantity,received_quantity:K.quantity,unit_cost:K.unit_cost,total_value:K.quantity*K.unit_cost});const{data:ce}=await L.from("inventory").select("id, quantity").eq("product_id",K.product_id).eq("branch_id",c).single();if(ce){const O=ce;await L.from("inventory").update({quantity:(O.quantity||0)-K.quantity}).eq("id",O.id)}const{data:Ne}=await L.from("inventory").select("id, quantity").eq("product_id",K.product_id).eq("branch_id",d).single();if(Ne){const O=Ne;await L.from("inventory").update({quantity:(O.quantity||0)+K.quantity}).eq("id",O.id)}else await L.from("inventory").insert({product_id:K.product_id,branch_id:d,quantity:K.quantity,avg_cost:K.unit_cost})}return q},onSuccess:()=>{k.invalidateQueries({queryKey:["transfers"]}),k.invalidateQueries({queryKey:["inventory"]}),n(!1),ie(),alert("   !")},onError:$=>alert(": "+$.message)}),ie=()=>{u(""),f(""),v([]),w(""),p(1)},re=()=>{const $=W==null?void 0:W.find(b=>b.id===g);!$||_<=0||(v([...h,{product_id:$.id,product_name:$.name_ar,quantity:_,unit_cost:$.selling_price||0}]),w(""),p(1))},he=$=>v(h.filter((b,P)=>P!==$)),{data:me}=se({queryKey:["transfer-items",l==null?void 0:l.id],queryFn:async()=>{if(!(l!=null&&l.id))return[];const{data:$}=await L.from("stock_transfer_items").select("*, product:products(name_ar, code)").eq("transfer_id",l.id);return $||[]},enabled:!!(l!=null&&l.id)&&a}),V=$=>{o($),i(!0)};return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"    "})]}),r.jsxs(U,{onClick:()=>n(!0),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{onClose:()=>n(!1),className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"from-branch",className:"text-sm font-medium",children:"  *"}),r.jsxs("select",{id:"from-branch",title:" ",className:"w-full h-10 border rounded-md px-3",value:c,onChange:$=>u($.target.value),children:[r.jsx("option",{value:"",children:" "}),z==null?void 0:z.filter($=>$.id!==d).map($=>r.jsx("option",{value:$.id,children:$.name_ar},$.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"to-branch",className:"text-sm font-medium",children:"  *"}),r.jsxs("select",{id:"to-branch",title:" ",className:"w-full h-10 border rounded-md px-3",value:d,onChange:$=>f($.target.value),children:[r.jsx("option",{value:"",children:" "}),z==null?void 0:z.filter($=>$.id!==c).map($=>r.jsx("option",{value:$.id,children:$.name_ar},$.id))]})]})]}),r.jsxs("div",{className:"border rounded-md p-4",children:[r.jsx("h4",{className:"font-medium mb-3",children:" "}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{title:"",className:"flex-1 h-10 border rounded-md px-3",value:g,onChange:$=>w($.target.value),children:[r.jsx("option",{value:"",children:" "}),W==null?void 0:W.map($=>r.jsxs("option",{value:$.id,children:[$.code," - ",$.name_ar]},$.id))]}),r.jsx(te,{type:"number",value:_,onChange:$=>p(parseInt($.target.value)||1),className:"w-24",min:1,placeholder:""}),r.jsx(U,{type:"button",onClick:re,children:""})]})]}),h.length>0&&r.jsx("div",{className:"border rounded-md",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-muted/50",children:[r.jsx("th",{className:"text-right py-2 px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-3",children:""}),r.jsx("th",{className:"py-2 px-3"})]})}),r.jsx("tbody",{children:h.map(($,b)=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-3",children:$.product_name}),r.jsx("td",{className:"py-2 px-3",children:$.quantity}),r.jsx("td",{className:"py-2 px-3",children:D($.quantity*$.unit_cost)}),r.jsx("td",{className:"py-2 px-3",children:r.jsx(U,{type:"button",variant:"ghost",size:"icon",onClick:()=>he(b),children:r.jsx(Xd,{className:"h-4 w-4 text-destructive"})})})]},b))})]})})]}),r.jsxs(Ps,{children:[r.jsx(U,{variant:"outline",onClick:()=>n(!1),children:""}),r.jsx(U,{onClick:()=>X.mutate(),disabled:!c||!d||h.length===0||X.isPending,children:X.isPending?" ...":" "})]})]})}),r.jsx(Ge,{open:a,onOpenChange:i,children:r.jsxs(Je,{onClose:()=>i(!1),className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsxs(et,{className:"text-base sm:text-lg",children:["  - ",l==null?void 0:l.transfer_number]})}),l&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:(G=l.from_branch)==null?void 0:G.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:(Z=l.to_branch)==null?void 0:Z.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:je(l.transfer_date||l.created_at)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${En[l.status||"pending"].color}`,children:En[l.status||"pending"].label})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:l.total_items||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:D(l.total_value||0)})]})]}),r.jsxs("div",{className:"border rounded-md",children:[r.jsx("h4",{className:"font-medium p-3 border-b bg-muted/30",children:" "}),r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b bg-muted/50",children:[r.jsx("th",{className:"text-right py-2 px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-3",children:""}),r.jsx("th",{className:"text-right py-2 px-3",children:" "}),r.jsx("th",{className:"text-right py-2 px-3",children:""})]})}),r.jsxs("tbody",{children:[me==null?void 0:me.map($=>{var b,P;return r.jsxs("tr",{className:"border-b",children:[r.jsxs("td",{className:"py-2 px-3",children:[(b=$.product)==null?void 0:b.code," - ",(P=$.product)==null?void 0:P.name_ar]}),r.jsx("td",{className:"py-2 px-3",children:$.received_quantity||0}),r.jsx("td",{className:"py-2 px-3",children:D($.unit_cost||0)}),r.jsx("td",{className:"py-2 px-3",children:D($.total_value||0)})]},$.id)}),(!me||me.length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"py-4 text-center text-muted-foreground",children:"  "})})]})]})]})]}),r.jsx(Ps,{children:r.jsx(U,{variant:"outline",onClick:()=>i(!1),children:""})})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"  ...",value:e,onChange:$=>t($.target.value),className:"pr-10"})]})}),r.jsx(be,{children:R?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):x!=null&&x.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 text-xs sm:text-sm text-muted-foreground",children:[" ",(m-1)*j+1," - ",Math.min(m*j,T),"  ",T," "]}),r.jsx("div",{className:"block md:hidden space-y-3",children:x.map($=>{var b,P;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm font-mono",children:$.transfer_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je($.transfer_date||$.created_at)})]}),r.jsx(U,{variant:"ghost",size:"sm",onClick:()=>V($),children:r.jsx(gt,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-1 text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(b=$.from_branch)==null?void 0:b.name_ar})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ao,{className:"h-3 w-3 text-muted-foreground"}),r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(P=$.to_branch)==null?void 0:P.name_ar})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-medium",children:$.total_items||0})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:": "}),r.jsx("span",{className:"font-bold",children:D($.total_value||0)})]})]})]}),r.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs ${En[$.status||"pending"].color}`,children:En[$.status||"pending"].label})]})},$.id)})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:x.map($=>{var b,P;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:$.transfer_number}),r.jsx("td",{className:"py-3 px-2",children:je($.transfer_date||$.created_at)}),r.jsx("td",{className:"py-3 px-2",children:(b=$.from_branch)==null?void 0:b.name_ar}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ao,{className:"h-4 w-4 text-muted-foreground"}),(P=$.to_branch)==null?void 0:P.name_ar]})}),r.jsx("td",{className:"py-3 px-2",children:$.total_items||0}),r.jsx("td",{className:"py-3 px-2",children:D($.total_value||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${En[$.status||"pending"].color}`,children:En[$.status||"pending"].label})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx(U,{variant:"ghost",size:"icon",title:"",onClick:()=>V($),children:r.jsx(gt,{className:"h-4 w-4"})})})]},$.id)})})]})}),I>1&&r.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y($=>Math.max(1,$-1)),disabled:m===1,className:"text-xs sm:text-sm",children:""}),r.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:Array.from({length:Math.min(5,I)},($,b)=>{let P=I<=5||m<=3?b+1:m>=I-2?I-4+b:m-2+b;return r.jsx(U,{variant:m===P?"default":"outline",size:"sm",onClick:()=>y(P),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:P},P)})}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>y($=>Math.min(I,$+1)),disabled:m===I,className:"text-xs sm:text-sm",children:""})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}const Pn={discovered:{label:" ",color:"bg-yellow-100 text-yellow-700"},reported:{label:" ",color:"bg-blue-100 text-blue-700"},approved:{label:" ",color:"bg-green-100 text-green-700"},completed:{label:"",color:"bg-green-100 text-green-700"}},yl={physical_damage:" ",water_damage:"  ",expired:" ",manufacturing_defect:" ",storage_damage:"  ",transit_damage:"  ",other:""};function r2(){var Ne,O,F,M;const[e,t]=C.useState(""),[s,n]=C.useState("damaged"),[a,i]=C.useState(!1),[l,o]=C.useState(!1),[c,u]=C.useState(null),[d,f]=C.useState(null),[h,v]=C.useState(""),[g,w]=C.useState(""),[_,p]=C.useState(1),[m,y]=C.useState("physical_damage"),[j,k]=C.useState(""),[N,R]=C.useState(1),[x,I]=C.useState(1),T=10,z=ot(),{data:W,isLoading:X}=se({queryKey:["damaged-items",e,N],queryFn:async()=>{let S=L.from("damaged_items").select("*",{count:"exact",head:!0});e&&(S=S.ilike("damage_number",`%${e}%`));const{count:A}=await S;let B=L.from("damaged_items").select("*, product:products(code, name, name_ar), branch:branches(name_ar)").order("created_at",{ascending:!1});e&&(B=B.ilike("damage_number",`%${e}%`));const J=(N-1)*T,ge=J+T-1,{data:Re}=await B.range(J,ge);return{items:Re||[],totalCount:A||0,totalPages:Math.ceil((A||0)/T)}},enabled:s==="damaged"}),{data:ie,isLoading:re}=se({queryKey:["write-offs",e,x],queryFn:async()=>{let S=L.from("write_offs").select("*",{count:"exact",head:!0});e&&(S=S.ilike("writeoff_number",`%${e}%`));const{count:A}=await S;let B=L.from("write_offs").select("*, branch:branches(name_ar)").order("created_at",{ascending:!1});e&&(B=B.ilike("writeoff_number",`%${e}%`));const J=(x-1)*T,ge=J+T-1,{data:Re}=await B.range(J,ge);return{items:Re||[],totalCount:A||0,totalPages:Math.ceil((A||0)/T)}},enabled:s==="writeoffs"}),he=(W==null?void 0:W.items)||[],me=(W==null?void 0:W.totalPages)||1,V=(W==null?void 0:W.totalCount)||0,G=(ie==null?void 0:ie.items)||[],Z=(ie==null?void 0:ie.totalPages)||1,$=(ie==null?void 0:ie.totalCount)||0;ns.useEffect(()=>{R(1),I(1)},[e]);const{data:b}=se({queryKey:["branches-list"],queryFn:async()=>{const{data:S}=await L.from("branches").select("id, name_ar").eq("status","active");return S||[]}}),{data:P}=se({queryKey:["products-list"],queryFn:async()=>{const{data:S}=await L.from("products").select("id, code, name_ar, purchase_price").eq("status","active");return S||[]}}),q=vt({mutationFn:async()=>{const{data:S}=await L.from("users").select("id").limit(1).single(),A=S?S.id:null,B=P==null?void 0:P.find(oe=>oe.id===g);if(!B)throw new Error("  ");const J=`DMG-${Date.now()}`,ge=_*(B.purchase_price||0),{error:Re}=await L.from("damaged_items").insert({damage_number:J,damage_date:new Date().toISOString(),product_id:g,branch_id:h,quantity:_,damage_type:m,unit_cost:B.purchase_price||0,total_cost:ge,status:"approved",discovered_by:A,reported_by:A,approved_by:A,notes:j});if(Re)throw Re;const{data:Ve}=await L.from("inventory").select("id, quantity").eq("product_id",g).eq("branch_id",h).single();if(Ve){const oe=Ve;await L.from("inventory").update({quantity:Math.max(0,(oe.quantity||0)-_)}).eq("id",oe.id)}},onSuccess:()=>{z.invalidateQueries({queryKey:["damaged-items"]}),z.invalidateQueries({queryKey:["inventory"]}),i(!1),H(),alert("     !")},onError:S=>alert(": "+S.message)}),H=()=>{v(""),w(""),p(1),y("physical_damage"),k("")},K=S=>{u(S),f(null),o(!0)},ce=S=>{f(S),u(null),o(!0)};return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"    "})]}),r.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:r.jsxs(U,{onClick:()=>i(!0),className:"flex-1 sm:flex-none",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),r.jsx("span",{className:"hidden sm:inline",children:" "}),r.jsx("span",{className:"sm:hidden",children:""})]})})]}),r.jsx(Ge,{open:a,onOpenChange:i,children:r.jsxs(Je,{onClose:()=>i(!1),className:"max-w-[95vw] sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"branch",className:"text-sm font-medium",children:" *"}),r.jsxs("select",{id:"branch",title:"",className:"w-full h-10 border rounded-md px-3",value:h,onChange:S=>v(S.target.value),children:[r.jsx("option",{value:"",children:" "}),b==null?void 0:b.map(S=>r.jsx("option",{value:S.id,children:S.name_ar},S.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"product",className:"text-sm font-medium",children:" *"}),r.jsxs("select",{id:"product",title:"",className:"w-full h-10 border rounded-md px-3",value:g,onChange:S=>w(S.target.value),children:[r.jsx("option",{value:"",children:" "}),P==null?void 0:P.map(S=>r.jsxs("option",{value:S.id,children:[S.code," - ",S.name_ar]},S.id))]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"quantity",className:"text-sm font-medium",children:" *"}),r.jsx(te,{id:"quantity",type:"number",value:_,min:1,onChange:S=>p(parseInt(S.target.value)||1)})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"damage-type",className:"text-sm font-medium",children:"  *"}),r.jsx("select",{id:"damage-type",title:" ",className:"w-full h-10 border rounded-md px-3",value:m,onChange:S=>y(S.target.value),children:Object.entries(yl).map(([S,A])=>r.jsx("option",{value:S,children:A},S))})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"text-sm font-medium",children:""}),r.jsx(te,{id:"notes",value:j,onChange:S=>k(S.target.value),placeholder:"  ..."})]})]}),r.jsxs(Ps,{children:[r.jsx(U,{variant:"outline",onClick:()=>i(!1),children:""}),r.jsx(U,{onClick:()=>q.mutate(),disabled:!h||!g||_<=0||q.isPending,children:q.isPending?" ...":""})]})]})}),r.jsx(Ge,{open:l,onOpenChange:o,children:r.jsxs(Je,{onClose:()=>o(!1),className:"max-w-[95vw] sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:c?`  - ${c.damage_number}`:d?`  - ${d.writeoff_number}`:""})}),c&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:((Ne=c.product)==null?void 0:Ne.name_ar)||((O=c.product)==null?void 0:O.name)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:(F=c.branch)==null?void 0:F.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:je(c.damage_date||c.created_at)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:c.quantity})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:yl[c.damage_type||"other"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:D(c.total_cost||0)})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Pn[c.status||"discovered"].color}`,children:Pn[c.status||"discovered"].label})]})]})}),d&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:(M=d.branch)==null?void 0:M.name_ar})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:je(d.writeoff_date||d.created_at)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-medium",children:d.writeoff_reason||"-"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:d.total_items||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-medium",children:D(d.total_value||0)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${d.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:d.status==="completed"?"":""})]})]})}),r.jsx(Ps,{children:r.jsx(U,{variant:"outline",onClick:()=>o(!1),children:""})})]})}),r.jsx("div",{className:"flex gap-2 border-b",children:r.jsxs("button",{type:"button",onClick:()=>n("damaged"),className:`flex items-center gap-2 px-4 py-2 border-b-2 transition-colors ${s==="damaged"?"border-primary text-primary":"border-transparent hover:text-primary"}`,children:[r.jsx(Si,{className:"h-4 w-4"})," "]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Ts,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(te,{placeholder:"...",value:e,onChange:S=>t(S.target.value),className:"pr-10"})]})}),r.jsx(be,{children:s==="damaged"?X?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):he!=null&&he.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:he.map(S=>{var A,B,J;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:S.damage_number}),r.jsx("td",{className:"py-3 px-2",children:je(S.damage_date||S.created_at)}),r.jsx("td",{className:"py-3 px-2",children:((A=S.product)==null?void 0:A.name_ar)||((B=S.product)==null?void 0:B.name)}),r.jsx("td",{className:"py-3 px-2",children:(J=S.branch)==null?void 0:J.name_ar}),r.jsx("td",{className:"py-3 px-2",children:S.quantity}),r.jsx("td",{className:"py-3 px-2",children:yl[S.damage_type||"other"]}),r.jsx("td",{className:"py-3 px-2",children:D(S.total_cost||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Pn[S.status||"discovered"].color}`,children:Pn[S.status||"discovered"].label})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx(U,{variant:"ghost",size:"icon",title:"",onClick:()=>K(S),children:r.jsx(gt,{className:"h-4 w-4"})})})]},S.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:he.map(S=>{var A,B,J;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:S.damage_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(S.damage_date||S.created_at)})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${Pn[S.status||"discovered"].color}`,children:Pn[S.status||"discovered"].label})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:((A=S.product)==null?void 0:A.name_ar)||((B=S.product)==null?void 0:B.name)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(J=S.branch)==null?void 0:J.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:S.quantity})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:yl[S.damage_type||"other"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-destructive",children:D(S.total_cost||0)})]})]}),r.jsxs(U,{variant:"outline",size:"sm",className:"w-full",onClick:()=>K(S),children:[r.jsx(gt,{className:"h-4 w-4 ml-2"})," "]})]})},S.id)})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(N-1)*T+1,"-",Math.min(N*T,V),"  ",V]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>R(S=>Math.max(1,S-1)),disabled:N===1,className:"text-xs sm:text-sm",children:""}),Array.from({length:Math.min(5,me)},(S,A)=>{let B;return me<=5||N<=3?B=A+1:N>=me-2?B=me-4+A:B=N-2+A,r.jsx(U,{variant:N===B?"default":"outline",size:"sm",onClick:()=>R(B),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:B},B)}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>R(S=>Math.min(me,S+1)),disabled:N===me,className:"text-xs sm:text-sm",children:""})]})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"   "}):re?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):G!=null&&G.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:G.map(S=>{var A;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono",children:S.writeoff_number}),r.jsx("td",{className:"py-3 px-2",children:je(S.writeoff_date||S.created_at)}),r.jsx("td",{className:"py-3 px-2",children:(A=S.branch)==null?void 0:A.name_ar}),r.jsx("td",{className:"py-3 px-2",children:S.writeoff_reason}),r.jsx("td",{className:"py-3 px-2",children:S.total_items||0}),r.jsx("td",{className:"py-3 px-2",children:D(S.total_value||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${S.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:S.status==="completed"?"":""})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx(U,{variant:"ghost",size:"icon",title:"",onClick:()=>ce(S),children:r.jsx(gt,{className:"h-4 w-4"})})})]},S.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:G.map(S=>{var A;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:S.writeoff_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(S.writeoff_date||S.created_at)})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${S.status==="completed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:S.status==="completed"?"":""})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(A=S.branch)==null?void 0:A.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:S.writeoff_reason})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:S.total_items||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-destructive",children:D(S.total_value||0)})]})]}),r.jsxs(U,{variant:"outline",size:"sm",className:"w-full",onClick:()=>ce(S),children:[r.jsx(gt,{className:"h-4 w-4 ml-2"})," "]})]})},S.id)})}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-3 mt-4 pt-4 border-t",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:[" ",(x-1)*T+1,"-",Math.min(x*T,$),"  ",$]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{variant:"outline",size:"sm",onClick:()=>I(S=>Math.max(1,S-1)),disabled:x===1,className:"text-xs sm:text-sm",children:""}),Array.from({length:Math.min(5,Z)},(S,A)=>{let B;return Z<=5||x<=3?B=A+1:x>=Z-2?B=Z-4+A:B=x-2+A,r.jsx(U,{variant:x===B?"default":"outline",size:"sm",onClick:()=>I(B),className:"w-8 h-8 sm:w-10 sm:h-10 p-0 text-xs sm:text-sm",children:B},B)}),r.jsx(U,{variant:"outline",size:"sm",onClick:()=>I(S=>Math.min(Z,S+1)),disabled:x===Z,className:"text-xs sm:text-sm",children:""})]})]})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"   "})})]})]})}function n2(){const[e,t]=C.useState("general"),s=[{key:"general",label:" ",icon:Yd},{key:"branches",label:"",icon:Or},{key:"users",label:"",icon:wa},{key:"categories",label:"",icon:Ng},{key:"brands",label:"",icon:L_},{key:"units",label:"",icon:E_}];return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[r.jsx("div",{className:"w-full md:w-48",children:r.jsx("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-x-visible pb-2 md:pb-0",children:s.map(n=>r.jsxs("button",{onClick:()=>t(n.key),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors whitespace-nowrap ${e===n.key?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(n.icon,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:n.label})]},n.key))})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[e==="general"&&r.jsx(a2,{}),e==="branches"&&r.jsx(i2,{}),e==="users"&&r.jsx(l2,{}),e==="categories"&&r.jsx(o2,{}),e==="brands"&&r.jsx(c2,{}),e==="units"&&r.jsx(u2,{})]})]})]})}function a2(){const[e,t]=C.useState(""),{data:s}=se({queryKey:["system-settings"],queryFn:async()=>{const{data:i}=await L.from("system_settings").select("*");return i||[]}}),n=s==null?void 0:s.find(i=>i.key==="usd_exchange_rate"),a=async()=>{if(e)try{n?await L.from("system_settings").update({value:e}).eq("id",n.id):await L.from("system_settings").insert({key:"usd_exchange_rate",value:e,description:"     ",value_type:"number"}),alert("    "),window.location.reload()}catch{alert("   ")}};return r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsxs(be,{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-lg",children:"  "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"     "})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{type:"number",step:"0.01",placeholder:(n==null?void 0:n.value)||"50.00",value:e,onChange:i=>t(i.target.value),className:"w-32 text-center font-bold"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:""})]})]}),n&&r.jsxs("p",{className:"text-sm text-primary",children:[" : ",n.value," "]}),r.jsxs(U,{onClick:a,className:"mt-3",disabled:!e,children:[r.jsx(F_,{className:"h-4 w-4 ml-2"}),"  "]})]}),s==null?void 0:s.filter(i=>i.key!=="usd_exchange_rate").map(i=>r.jsxs("div",{className:"flex items-center justify-between border-b pb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:i.key}),r.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]}),r.jsx(te,{defaultValue:i.value||"",className:"w-48"})]},i.id))]})]})}function i2(){const{data:e}=se({queryKey:["branches-settings"],queryFn:async()=>{const{data:t}=await L.from("branches").select("*").order("created_at");return t||[]}});return r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:""}),r.jsx(U,{size:"sm",className:"w-full sm:w-auto",children:" "})]}),r.jsxs(be,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.branch_type==="warehouse"?"":" "}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.phone}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.status==="active"?"":" "})})]},t.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.map(t=>r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:t.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:t.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.status==="active"?"":" "})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:t.branch_type==="warehouse"?"":" "})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:t.phone})]})]})]})},t.id))})]})]})}function l2(){const{data:e}=se({queryKey:["users-settings"],queryFn:async()=>{const{data:t}=await L.from("users").select("*, role:roles(name_ar), branch:branches(name_ar)").order("created_at");return t||[]}});return r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:""}),r.jsx(U,{size:"sm",className:"w-full sm:w-auto",children:" "})]}),r.jsxs(be,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>{var s,n;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.employee_code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.full_name}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.username}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:(s=t.role)==null?void 0:s.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:((n=t.branch)==null?void 0:n.name_ar)||""}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.status==="active"?"":" "})})]},t.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.map(t=>{var s,n;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:t.full_name}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:t.employee_code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.status==="active"?"":" "})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:t.username})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(s=t.role)==null?void 0:s.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:((n=t.branch)==null?void 0:n.name_ar)||""})]})]})]})},t.id)})})]})]})}function o2(){const{data:e}=se({queryKey:["categories-settings"],queryFn:async()=>{const{data:t}=await L.from("categories").select("*").order("sort_order");return t||[]}});return r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:""}),r.jsx(U,{size:"sm",className:"w-full sm:w-auto",children:" "})]}),r.jsxs(be,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})})]},t.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.map(t=>r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:t.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:t.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})]})},t.id))})]})]})}function c2(){const{data:e}=se({queryKey:["brands-settings"],queryFn:async()=>{const{data:t}=await L.from("brands").select("*").order("name");return t||[]}});return r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:""}),r.jsx(U,{size:"sm",className:"w-full sm:w-auto",children:" "})]}),r.jsxs(be,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.name}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})})]},t.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.map(t=>r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:t.name}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:t.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})]})},t.id))})]})]})}function u2(){const{data:e}=se({queryKey:["units-settings"],queryFn:async()=>{const{data:t}=await L.from("units").select("*").order("name");return t||[]}});return r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:""}),r.jsx(U,{size:"sm",className:"w-full sm:w-auto",children:" "})]}),r.jsxs(be,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:e==null?void 0:e.map(t=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:t.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})})]},t.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.map(t=>r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:t.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:t.code})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:t.is_active?"":" "})]})},t.id))})]})]})}function d2(){const[e,t]=C.useState(""),[s,n]=C.useState([]),[a,i]=C.useState(null),[l,o]=C.useState(""),[c,u]=C.useState(!1),[d,f]=C.useState(0),[h,v]=C.useState(""),[g,w]=C.useState(""),[_,p]=C.useState(!1),[m,y]=C.useState(""),[j,k]=C.useState(!1),N=ot(),{data:R}=se({queryKey:["pos-branches"],queryFn:async()=>{const{data:b}=await L.from("branches").select("*").eq("status","active").eq("branch_type","outlet").order("name_ar");return b||[]}});!m&&R&&R.length>0&&y(R[0].id);const x=R==null?void 0:R.find(b=>b.id===m),{data:I}=se({queryKey:["pos-products",e,m],queryFn:async()=>{if(!m)return[];let b=L.from("inventory").select(`
          quantity,
          product:products!inner(
            id,
            code,
            name,
            name_ar,
            barcode,
            selling_price,
            status,
            category:categories(name_ar)
          )
        `).eq("branch_id",m).eq("product.status","active").gt("quantity",0);e&&(b=b.or(`product.code.ilike.%${e}%,product.name_ar.ilike.%${e}%,product.barcode.ilike.%${e}%`));const{data:P}=await b.limit(20);return(P||[]).map(q=>({...q.product,available_quantity:q.quantity}))},enabled:!!m}),{data:T}=se({queryKey:["pos-customers",l,m,c],queryFn:async()=>{if(!m)return[];let b=L.from("customers").select("*").eq("status","active").eq("branch_id",m);l&&(b=b.or(`code.ilike.%${l}%,name_ar.ilike.%${l}%,phone.ilike.%${l}%`));const{data:P}=await b.limit(20).order("name_ar");return P||[]},enabled:c&&!!m}),z=s.reduce((b,P)=>b+P.total,0),W=z*d/100,X=_?(z-W)*.14:0,ie=z-W+X,re=parseFloat(h)||0,he=ie-re,me=b=>{const P=s.find(K=>K.product.id===b.id),q=P?P.quantity:0,H=b.available_quantity||0;if(q>=H){alert(` : ${H}`);return}if(P)n(s.map(K=>K.product.id===b.id?{...K,quantity:K.quantity+1,total:(K.quantity+1)*K.unit_price}:K));else{const K={id:crypto.randomUUID(),product:b,quantity:1,unit_price:b.selling_price||0,discount:0,total:b.selling_price||0};n([...s,K])}},V=(b,P)=>{n(s.map(q=>{if(q.id===b){const H=Math.max(1,q.quantity+P),K=q.product.available_quantity||0;return H>K?(alert(` : ${K}`),q):{...q,quantity:H,total:H*q.unit_price}}return q}))},G=b=>{n(s.filter(P=>P.id!==b))},Z=()=>{n([]),i(null),f(0),v(""),w(""),p(!1)},$=vt({mutationFn:async b=>{var M;if(!m)throw new Error("   ");const{data:P}=await L.from("users").select("id").limit(1),q=(M=P==null?void 0:P[0])==null?void 0:M.id;if(!q)throw new Error("Missing user");const K={invoice_number:`INV-${Date.now()}`,invoice_date:new Date().toISOString(),branch_id:m,cashier_id:q,customer_id:(a==null?void 0:a.id)||null,customer_name:(a==null?void 0:a.name_ar)||(a==null?void 0:a.name)||null,subtotal:z,discount_amount:W,tax_amount:X,total_amount:ie,paid_amount:re,remaining_amount:he>0?he:0,payment_method:b,status:he<=0?"paid":"partially_paid",due_date:b==="credit"&&g?g:null,has_tax:_,payment_status:he<=0?"paid":"credit"},{data:ce,error:Ne}=await L.from("sales").insert(K).select().single();if(Ne)throw Ne;const O=s.map(S=>({sale_id:ce.id,product_id:S.product.id,quantity:S.quantity,unit_price:S.unit_price,discount_amount:S.discount,total_price:S.total})),{error:F}=await L.from("sale_items").insert(O);if(F)throw F;for(const S of s){const{data:A}=await L.from("inventory").select("quantity").eq("product_id",S.product.id).eq("branch_id",m).single();if(A){const B=(A.quantity||0)-S.quantity,{error:J}=await L.from("inventory").update({quantity:B}).eq("product_id",S.product.id).eq("branch_id",m);J&&console.error("Inventory update error:",J)}}return ce},onSuccess:()=>{Z(),N.invalidateQueries({queryKey:["sales"]}),alert("   !")},onError:b=>{alert(" : "+b.message)}});return r.jsxs("div",{className:"h-[calc(100vh-4rem)] flex flex-col lg:flex-row gap-2 sm:gap-4",children:[r.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[r.jsxs("div",{className:"mb-2 sm:mb-4 space-y-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 sm:p-3 border rounded-md cursor-pointer hover:bg-muted bg-card",onClick:()=>k(!j),children:[r.jsx(Or,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"}),r.jsx("span",{className:"flex-1 font-medium text-sm sm:text-base",children:x?x.name_ar:"  "})]}),j&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 max-h-60 overflow-auto",children:R==null?void 0:R.map(b=>r.jsxs("button",{type:"button",className:`w-full p-3 text-right hover:bg-muted ${m===b.id?"bg-primary/10":""}`,onClick:()=>{y(b.id),k(!1),n([])},children:[r.jsx("p",{className:"font-medium",children:b.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground",children:b.code})]},b.id))})]}),r.jsxs("div",{className:"relative",children:[r.jsx(C_,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground"}),r.jsx(te,{placeholder:"   ...",value:e,onChange:b=>t(b.target.value),className:"pr-10 sm:pr-12 text-base sm:text-lg h-10 sm:h-12",autoFocus:!0,disabled:!m})]})]}),r.jsx("div",{className:"flex-1 overflow-auto",children:m?I&&I.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:r.jsx("p",{className:"text-sm sm:text-base",children:"      "})}):r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-3",children:I==null?void 0:I.map(b=>r.jsxs("button",{type:"button",onClick:()=>me(b),className:"p-2 sm:p-4 bg-card border rounded-lg hover:border-primary hover:shadow-md transition-all text-right relative",children:[r.jsx("p",{className:"font-bold text-sm sm:text-lg truncate",children:b.name_ar}),r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:b.code}),r.jsx("p",{className:"text-primary font-bold mt-1 sm:mt-2 text-sm sm:text-base",children:D(b.selling_price||0)}),r.jsx("span",{className:"absolute top-1 sm:top-2 left-1 sm:left-2 bg-muted px-1 sm:px-2 py-0.5 sm:py-1 rounded text-xs",children:b.available_quantity})]},b.id))}):r.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:r.jsx("p",{className:"text-sm sm:text-base",children:"    "})})})]}),r.jsxs(le,{className:"w-full lg:w-[400px] flex flex-col max-h-[50vh] lg:max-h-none",children:[r.jsxs(_e,{className:"pb-2 p-3 sm:p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(We,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(bg,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"",s.length>0&&r.jsx("span",{className:"bg-primary text-primary-foreground rounded-full w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center text-xs",children:s.length})]}),r.jsx(U,{variant:"ghost",size:"sm",onClick:Z,className:"h-8 w-8 sm:h-9 sm:w-9",children:r.jsx(Ar,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),r.jsxs("div",{className:"relative mt-2",children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md cursor-pointer hover:bg-muted",onClick:()=>u(!c),children:[r.jsx(Pi,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"flex-1 text-xs sm:text-sm",children:a?a.name_ar||a.name:" "})]}),c&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 p-2",children:[r.jsx(te,{placeholder:"  ...",value:l,onChange:b=>o(b.target.value),className:"mb-2"}),r.jsxs("div",{className:"max-h-40 overflow-auto",children:[r.jsx("button",{type:"button",className:"w-full p-2 text-right hover:bg-muted rounded",onClick:()=>{i(null),u(!1)},children:" "}),T==null?void 0:T.map(b=>r.jsxs("button",{type:"button",className:"w-full p-2 text-right hover:bg-muted rounded",onClick:()=>{i(b),u(!1)},children:[r.jsx("p",{className:"font-medium",children:b.name_ar||b.name}),r.jsx("p",{className:"text-xs text-muted-foreground",children:b.phone})]},b.id))]})]})]})]}),r.jsx(be,{className:"flex-1 overflow-auto p-2 sm:p-4",children:s.length===0?r.jsx("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:r.jsx("p",{className:"text-sm",children:" "})}):r.jsx("div",{className:"space-y-2",children:s.map((b,P)=>r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 p-2 bg-muted/50 rounded",children:[r.jsx("span",{className:"text-xs text-muted-foreground w-4 sm:w-5",children:P+1}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-xs sm:text-sm truncate",children:b.product.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground",children:D(b.unit_price)})]}),r.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1",children:[r.jsx(U,{variant:"outline",size:"icon",className:"h-6 w-6 sm:h-7 sm:w-7",onClick:()=>V(b.id,-1),children:r.jsx(Ro,{className:"h-2 w-2 sm:h-3 sm:w-3"})}),r.jsx(te,{type:"number",value:b.quantity,onChange:q=>{const H=parseInt(q.target.value)||1,K=b.product.available_quantity||0;if(H>K){alert(` : ${K}`);return}H<1||n(s.map(ce=>ce.id===b.id?{...ce,quantity:H,total:H*ce.unit_price}:ce))},className:"w-12 sm:w-16 h-6 sm:h-7 text-center font-bold p-1 text-xs sm:text-sm",min:1,max:b.product.available_quantity||999}),r.jsx(U,{variant:"outline",size:"icon",className:"h-6 w-6 sm:h-7 sm:w-7",onClick:()=>V(b.id,1),children:r.jsx(jt,{className:"h-2 w-2 sm:h-3 sm:w-3"})})]}),r.jsx("span",{className:"font-bold w-16 sm:w-20 text-left text-xs sm:text-sm",children:D(b.total)}),r.jsx(U,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-7 sm:w-7",onClick:()=>G(b.id),children:r.jsx(Ar,{className:"h-2 w-2 sm:h-3 sm:w-3 text-destructive"})})]},b.id))})}),r.jsxs("div",{className:"border-t p-2 sm:p-4 space-y-2 sm:space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm",children:[r.jsx("span",{children:" "}),r.jsx("span",{children:D(z)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs sm:text-sm",children:" %"}),r.jsx(te,{type:"number",value:d,onChange:b=>f(parseFloat(b.target.value)||0),className:"w-16 sm:w-20 h-7 sm:h-8 text-center text-xs sm:text-sm",min:0,max:100}),r.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["(",D(W),")"]})]}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 py-2 border-y",children:[r.jsx("span",{className:"text-xs sm:text-sm font-medium",children:":"}),r.jsxs("label",{className:"flex items-center gap-1 sm:gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"tax",checked:!_,onChange:()=>p(!1),className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"text-xs sm:text-sm",children:""})]}),r.jsxs("label",{className:"flex items-center gap-1 sm:gap-2 cursor-pointer",children:[r.jsx("input",{type:"radio",name:"tax",checked:_,onChange:()=>p(!0),className:"w-3 h-3 sm:w-4 sm:h-4"}),r.jsx("span",{className:"text-xs sm:text-sm",children:""})]})]}),_&&r.jsxs("div",{className:"flex justify-between text-xs sm:text-sm text-blue-600",children:[r.jsx("span",{children:" (14%)"}),r.jsx("span",{children:D(X)})]}),r.jsxs("div",{className:"flex justify-between text-base sm:text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"text-primary",children:D(ie)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs sm:text-sm",children:""}),r.jsx(te,{type:"number",value:h,onChange:b=>v(b.target.value),className:"flex-1 h-8 sm:h-10 text-base sm:text-lg",placeholder:"0"})]}),a&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs sm:text-sm whitespace-nowrap",children:" "}),r.jsx(te,{type:"date",value:g,onChange:b=>w(b.target.value),className:"flex-1 h-8 sm:h-10 text-xs sm:text-sm",placeholder:""})]}),he>0&&r.jsxs("div",{className:"flex justify-between text-destructive text-xs sm:text-sm",children:[r.jsx("span",{children:""}),r.jsx("span",{children:D(he)})]}),he<0&&r.jsxs("div",{className:"flex justify-between text-green-600 text-xs sm:text-sm",children:[r.jsx("span",{children:" "}),r.jsx("span",{children:D(Math.abs(he))})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[r.jsxs(U,{className:"h-10 sm:h-12 text-sm sm:text-base",onClick:()=>$.mutate("cash"),disabled:s.length===0||$.isPending,children:[r.jsx(S_,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),""]}),r.jsxs(U,{variant:"outline",className:"h-10 sm:h-12 text-sm sm:text-base",onClick:()=>$.mutate("credit"),disabled:s.length===0||!a||$.isPending,children:[r.jsx(T_,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-2"}),""]})]})]})]})]})}const h2=`
  @media print {
    /* Hide sidebar and controls */
    aside, nav, .no-print {
      display: none !important;
    }
    
    /* Hide browser default headers and footers */
    @page {
      margin: 0.5cm;
    }
    
    /* Make content full width */
    main {
      margin: 0 !important;
      padding: 20px !important;
    }
    
    /* Show print header with logo */
    .print-header {
      display: block !important;
      text-align: center;
      margin-bottom: 30px;
      border-bottom: 2px solid #000;
      padding-bottom: 20px;
    }
    .print-header img {
      max-width: 80px;
      margin: 0 auto 10px;
      display: block;
    }
    .print-header h2 {
      font-size: 24px;
      font-weight: bold;
      margin: 10px 0;
    }
    .print-stats {
      display: flex !important;
      justify-content: space-around;
      margin: 20px 0;
      padding: 15px;
      background: #f5f5f5;
      page-break-inside: avoid;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table th, table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: right;
    }
    table th {
      background-color: #f2f2f2;
      font-weight: bold;
    }
  }
  
  /* Hide print header on screen */
  .print-header {
    display: none;
  }
`;function m2(){var h,v;const[e,t]=C.useState("sales"),[s,n]=C.useState(""),[a,i]=C.useState(""),[l,o]=C.useState("all"),{data:c}=se({queryKey:["reports-branches"],queryFn:async()=>{const{data:g}=await L.from("branches").select("*").eq("status","active").eq("branch_type","outlet").order("name_ar");return g||[]}}),u=()=>{window.print()},d=()=>{var p;if(!document.querySelector(".report-content"))return;const w=((p=f.find(m=>m.key===e))==null?void 0:p.label)||"",_=s&&a?` ${s}  ${a}`:"";alert(`  ${w} ${_}`)},f=[{key:"sales",label:" ",icon:Iu},{key:"purchases",label:" ",icon:_g},{key:"inventory",label:" ",icon:Oo},{key:"customers",label:" ",icon:wa},{key:"suppliers",label:" ",icon:wa},{key:"profit",label:" ",icon:Zn}];return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsx("style",{children:h2}),r.jsxs("div",{className:"print-header",children:[r.jsx("img",{src:"/el-fagr/logo.jpg",alt:"  "}),r.jsx("h2",{children:"  "}),r.jsx("h3",{children:(h=f.find(g=>g.key===e))==null?void 0:h.label}),s&&a&&r.jsxs("p",{children:[" ",s,"  ",a]})]}),r.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 no-print",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]})}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-6",children:[r.jsx("div",{className:"w-full md:w-56",children:r.jsx("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-x-visible pb-2 md:pb-0 no-print",children:f.map(g=>r.jsxs("button",{type:"button",onClick:()=>t(g.key),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors whitespace-nowrap ${e===g.key?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[r.jsx(g.icon,{className:"h-4 w-4 flex-shrink-0"}),r.jsx("span",{className:"hidden sm:inline",children:g.label})]},g.key))})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs(le,{children:[r.jsx(_e,{className:"no-print",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:(v=f.find(g=>g.key===e))==null?void 0:v.label}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[r.jsxs("select",{value:l,onChange:g=>o(g.target.value),className:"px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:" "}),c==null?void 0:c.map(g=>r.jsx("option",{value:g.id,children:g.name_ar},g.id))]}),r.jsx(te,{type:"date",value:s,onChange:g=>n(g.target.value),className:"flex-1 sm:w-32"}),r.jsx("span",{className:"hidden sm:inline text-sm",children:""}),r.jsx(te,{type:"date",value:a,onChange:g=>i(g.target.value),className:"flex-1 sm:w-32"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(U,{variant:"outline",size:"icon",onClick:u,className:"flex-1 sm:flex-none",children:r.jsx(ys,{className:"h-4 w-4"})}),r.jsx(U,{variant:"outline",size:"icon",onClick:d,className:"flex-1 sm:flex-none",children:r.jsx(R_,{className:"h-4 w-4"})})]})]})]})}),r.jsxs(be,{className:"report-content",children:[e==="sales"&&r.jsx(f2,{dateFrom:s,dateTo:a,branchFilter:l}),e==="purchases"&&r.jsx(p2,{dateFrom:s,dateTo:a,branchFilter:l}),e==="inventory"&&r.jsx(x2,{branchFilter:l}),e==="customers"&&r.jsx(g2,{branchFilter:l}),e==="suppliers"&&r.jsx(y2,{}),e==="profit"&&r.jsx(v2,{dateFrom:s,dateTo:a,branchFilter:l})]})]})})]})]})}function f2({dateFrom:e,dateTo:t,branchFilter:s}){const{data:n,isLoading:a}=se({queryKey:["sales-report",e,t,s],queryFn:async()=>{let i=L.from("sales").select("*").order("created_at",{ascending:!1});e&&(i=i.gte("invoice_date",e)),t&&(i=i.lte("invoice_date",t)),s!=="all"&&(i=i.eq("branch_id",s));const{data:l}=await i.limit(100),o=l||[],c=o.reduce((f,h)=>f+(h.total_amount||0),0),u=o.reduce((f,h)=>f+(h.paid_amount||0),0),d=o.length;return{sales:o,totalSales:c,totalPaid:u,count:d}}});return a?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n==null?void 0:n.count})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((n==null?void 0:n.totalSales)||0)})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((n==null?void 0:n.totalPaid)||0)})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2 hidden sm:table-cell",children:""})]})}),r.jsx("tbody",{children:n==null?void 0:n.sales.slice(0,20).map(i=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:i.invoice_number}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:je(i.invoice_date||i.created_at)}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(i.total_amount||0)}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(i.paid_amount||0)}),r.jsx("td",{className:"py-2 px-1 sm:px-2 hidden sm:table-cell",children:i.status})]},i.id))})]})})]})}function p2({dateFrom:e,dateTo:t,branchFilter:s}){const{data:n,isLoading:a}=se({queryKey:["purchases-report",e,t,s],queryFn:async()=>{let i=L.from("purchases").select("*, supplier:suppliers(name_ar)").order("created_at",{ascending:!1});e&&(i=i.gte("invoice_date",e)),t&&(i=i.lte("invoice_date",t)),s!=="all"&&(i=i.eq("branch_id",s));const{data:l}=await i.limit(100),o=l||[],c=o.reduce((d,f)=>d+(f.total_amount||0),0),u=o.reduce((d,f)=>d+(f.paid_amount||0),0);return{purchases:o,total:c,paid:u,count:o.length}}});return a?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:n==null?void 0:n.count})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((n==null?void 0:n.total)||0)})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((n==null?void 0:n.paid)||0)})]})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:n==null?void 0:n.purchases.slice(0,20).map(i=>{var l;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:i.invoice_number}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:(l=i.supplier)==null?void 0:l.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:je(i.invoice_date||i.created_at)}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(i.total_amount||0)}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(i.paid_amount||0)})]},i.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:n==null?void 0:n.purchases.slice(0,20).map(i=>{var l;return r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:i.invoice_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:je(i.invoice_date||i.created_at)})]})}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(l=i.supplier)==null?void 0:l.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-primary",children:D(i.total_amount||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:D(i.paid_amount||0)})]})]})]})},i.id)})})]})}function x2({branchFilter:e}){const{data:t,isLoading:s}=se({queryKey:["inventory-report",e],queryFn:async()=>{let n=L.from("inventory").select("*, product:products(code, name_ar, selling_price), branch:branches(name_ar)").order("quantity",{ascending:!0});e!=="all"&&(n=n.eq("branch_id",e));const{data:a}=await n.limit(100),i=a||[],l=i.filter(c=>(c.quantity||0)<=(c.min_quantity||10)),o=i.reduce((c,u)=>{var d;return c+(u.quantity||0)*(((d=u.product)==null?void 0:d.selling_price)||0)},0);return{inventory:i,lowStock:l,totalValue:o}}});return s?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:t==null?void 0:t.inventory.length})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"   "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:t==null?void 0:t.lowStock.length})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((t==null?void 0:t.totalValue)||0)})]})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "})]})}),r.jsx("tbody",{children:t==null?void 0:t.inventory.map(n=>{var a,i,l;return r.jsxs("tr",{className:`border-b ${(n.quantity||0)<=(n.min_quantity||10)?"bg-red-50":""}`,children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:(a=n.product)==null?void 0:a.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:(i=n.product)==null?void 0:i.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:(l=n.branch)==null?void 0:l.name_ar}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:n.quantity||0}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:n.min_quantity||10})]},n.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:t==null?void 0:t.inventory.map(n=>{var a,i,l;return r.jsx(le,{className:`p-3 ${(n.quantity||0)<=(n.min_quantity||10)?"border-red-300 bg-red-50":""}`,children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:(a=n.product)==null?void 0:a.name_ar}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:(i=n.product)==null?void 0:i.code})]}),(n.quantity||0)<=(n.min_quantity||10)&&r.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:" "})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(l=n.branch)==null?void 0:l.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:`font-bold ${(n.quantity||0)<=(n.min_quantity||10)?"text-red-600":"text-primary"}`,children:n.quantity||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:n.min_quantity||10})]})]})]})},n.id)})})]})}function g2({branchFilter:e}){const{data:t,isLoading:s}=se({queryKey:["customers-report",e],queryFn:async()=>{let n=L.from("customers").select("*").order("current_balance",{ascending:!1});e!=="all"&&(n=n.eq("branch_id",e));const{data:a}=await n.limit(100),i=a||[],l=i.reduce((c,u)=>c+(u.current_balance||0),0),o=i.filter(c=>(c.current_balance||0)>0);return{customers:i,totalBalance:l,withBalance:o.length}}});return s?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:t==null?void 0:t.customers.length})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"  "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:t==null?void 0:t.withBalance})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((t==null?void 0:t.totalBalance)||0)})]})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "})]})}),r.jsx("tbody",{children:t==null?void 0:t.customers.map(n=>r.jsxs("tr",{className:`border-b ${(n.current_balance||0)>(n.credit_limit||0)?"bg-red-50":""}`,children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:n.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:n.name_ar||n.name}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:n.phone}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(n.current_balance||0)}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(n.credit_limit||0)})]},n.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:t==null?void 0:t.customers.map(n=>r.jsx(le,{className:`p-3 ${(n.current_balance||0)>(n.credit_limit||0)?"border-red-300 bg-red-50":""}`,children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:n.name_ar||n.name}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:n.code})]}),(n.current_balance||0)>(n.credit_limit||0)&&r.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs rounded-full",children:" "})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:n.phone})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:`font-bold ${(n.current_balance||0)>0?"text-red-600":"text-green-600"}`,children:D(n.current_balance||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:D(n.credit_limit||0)})]})]})]})},n.id))})]})}function y2(){const{data:e,isLoading:t}=se({queryKey:["suppliers-report"],queryFn:async()=>{const{data:s}=await L.from("suppliers").select("*").order("current_balance",{ascending:!1}).limit(100),n=s||[],a=n.reduce((i,l)=>i+(l.current_balance||0),0);return{suppliers:n,totalBalance:a}}});return t?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-3 sm:p-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:e==null?void 0:e.suppliers.length})]}),r.jsxs("div",{className:"p-3 sm:p-4 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:D((e==null?void 0:e.totalBalance)||0)})]})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:" "})]})}),r.jsx("tbody",{children:e==null?void 0:e.suppliers.map(s=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:s.code}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:s.name_ar||s.name}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:s.phone}),r.jsx("td",{className:"py-2 px-1 sm:px-2",children:D(s.current_balance||0)})]},s.id))})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:e==null?void 0:e.suppliers.map(s=>r.jsx(le,{className:"p-3",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:s.name_ar||s.name}),r.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:s.code})]})}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:s.phone})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:`font-bold ${(s.current_balance||0)>0?"text-red-600":"text-green-600"}`,children:D(s.current_balance||0)})]})]})]})},s.id))})]})}function v2({dateFrom:e,dateTo:t,branchFilter:s}){const{data:n,isLoading:a}=se({queryKey:["profit-report",e,t,s],queryFn:async()=>{let i=L.from("sales").select("total_amount, discount_amount"),l=L.from("purchases").select("total_amount");e&&(i=i.gte("invoice_date",e),l=l.gte("invoice_date",e)),t&&(i=i.lte("invoice_date",t),l=l.lte("invoice_date",t)),s!=="all"&&(i=i.eq("branch_id",s),l=l.eq("branch_id",s));const[{data:o},{data:c}]=await Promise.all([i,l]),u=o||[],d=c||[],f=u.reduce((w,_)=>w+(_.total_amount||0),0),h=u.reduce((w,_)=>w+(_.discount_amount||0),0),v=d.reduce((w,_)=>w+(_.total_amount||0),0),g=f-v;return{totalSales:f,totalDiscounts:h,totalPurchases:v,grossProfit:g}}});return a?r.jsx("p",{className:"text-center py-8",children:" ..."}):r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 print-stats",children:[r.jsxs("div",{className:"p-4 sm:p-6 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:D((n==null?void 0:n.totalSales)||0)})]}),r.jsxs("div",{className:"p-4 sm:p-6 bg-red-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-red-600",children:D((n==null?void 0:n.totalPurchases)||0)})]}),r.jsxs("div",{className:"p-4 sm:p-6 bg-yellow-50 rounded-lg",children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-yellow-600",children:D((n==null?void 0:n.totalDiscounts)||0)})]}),r.jsxs("div",{className:`p-4 sm:p-6 rounded-lg ${((n==null?void 0:n.grossProfit)||0)>=0?"bg-green-100":"bg-red-100"}`,children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:`text-2xl sm:text-3xl font-bold ${((n==null?void 0:n.grossProfit)||0)>=0?"text-green-700":"text-red-700"}`,children:D((n==null?void 0:n.grossProfit)||0)})]})]})})}function j2(){const[e,t]=C.useState(!1),[s,n]=C.useState({branch_id:"",partner_name:"",amount:0,notes:""}),a=ot(),{data:i}=se({queryKey:["withdrawal-branches"],queryFn:async()=>{const{data:d}=await L.from("branches").select("*").eq("status","active").order("name_ar");return d||[]}}),{data:l,isLoading:o}=se({queryKey:["partner-withdrawals"],queryFn:async()=>{const{data:d}=await L.from("partner_withdrawals").select("*, branch:branches(name_ar)").order("created_at",{ascending:!1});return d||[]}}),{data:c}=se({queryKey:["branch-balance",s.branch_id],queryFn:async()=>{if(!s.branch_id)return 0;const{data:d}=await L.from("sales").select("total_amount").eq("branch_id",s.branch_id).eq("status","completed"),h=((d==null?void 0:d.reduce((w,_)=>w+(_.total_amount||0),0))||0)*.2,{data:v}=await L.from("partner_withdrawals").select("amount").eq("branch_id",s.branch_id).eq("status","approved"),g=(v==null?void 0:v.reduce((w,_)=>w+(_.amount||0),0))||0;return h-g},enabled:!!s.branch_id}),u=vt({mutationFn:async()=>{const d=`WD-${Date.now()}`,f=c||0,h=f-s.amount,{error:v}=await L.from("partner_withdrawals").insert({withdrawal_number:d,branch_id:s.branch_id,partner_name:s.partner_name,amount:s.amount,balance_before:f,balance_after:h,notes:s.notes||null,status:"approved",withdrawal_date:new Date().toISOString()});if(v)throw v},onSuccess:()=>{a.invalidateQueries({queryKey:["partner-withdrawals"]}),a.invalidateQueries({queryKey:["branch-balance"]}),t(!1),n({branch_id:"",partner_name:"",amount:0,notes:""}),alert("   !")},onError:d=>alert(": "+d.message)});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-muted-foreground",children:"    "})]}),r.jsxs(U,{onClick:()=>t(!0),children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),"  "]})]}),r.jsx(Ge,{open:e,onOpenChange:t,children:r.jsxs(Je,{onClose:()=>t(!1),className:"max-w-lg",children:[r.jsx(Ze,{children:r.jsx(et,{children:"  "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"branch",className:"text-sm font-medium",children:" *"}),r.jsxs("select",{id:"branch",value:s.branch_id,onChange:d=>n({...s,branch_id:d.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background",children:[r.jsx("option",{value:"",children:" "}),i==null?void 0:i.map(d=>r.jsx("option",{value:d.id,children:d.name_ar},d.id))]})]}),s.branch_id&&r.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-2xl font-bold text-primary",children:D(c||0)})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"partner",className:"text-sm font-medium",children:"  *"}),r.jsx(te,{id:"partner",value:s.partner_name,onChange:d=>n({...s,partner_name:d.target.value}),placeholder:"  "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"amount",className:"text-sm font-medium",children:" *"}),r.jsx(te,{id:"amount",type:"number",value:s.amount,onChange:d=>n({...s,amount:parseFloat(d.target.value)||0}),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"text-sm font-medium",children:""}),r.jsx(te,{id:"notes",value:s.notes,onChange:d=>n({...s,notes:d.target.value}),placeholder:" "})]})]}),r.jsxs(Ps,{children:[r.jsx(U,{variant:"outline",onClick:()=>t(!1),children:""}),r.jsx(U,{onClick:()=>u.mutate(),disabled:!s.branch_id||!s.partner_name||s.amount<=0||u.isPending,children:u.isPending?" ...":""})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsx(be,{children:o?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):l!=null&&l.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:l.map(d=>{var f;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:d.withdrawal_number}),r.jsxs("td",{className:"py-3 px-2",children:[r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[r.jsx(io,{className:"h-3 w-3"}),new Date(d.withdrawal_date||d.created_at).toLocaleDateString("ar-EG")]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(d.withdrawal_date||d.created_at).toLocaleTimeString("ar-EG")})]}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Or,{className:"h-3 w-3"}),(f=d.branch)==null?void 0:f.name_ar]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pi,{className:"h-3 w-3"}),d.partner_name]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:"font-bold text-destructive",children:D(d.amount||0)})}),r.jsx("td",{className:"py-3 px-2",children:D(d.balance_before||0)}),r.jsx("td",{className:"py-3 px-2",children:D(d.balance_after||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700",children:d.status==="approved"?"":""})})]},d.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:l.map(d=>{var f;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:d.withdrawal_number}),r.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(io,{className:"h-3 w-3"}),new Date(d.withdrawal_date||d.created_at).toLocaleDateString("ar-EG")]})]}),r.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700",children:d.status==="approved"?"":""})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Or,{className:"h-3 w-3"}),":"]}),r.jsx("span",{className:"font-medium",children:(f=d.branch)==null?void 0:f.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Pi,{className:"h-3 w-3"}),":"]}),r.jsx("span",{className:"font-medium",children:d.partner_name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Zn,{className:"h-3 w-3"}),":"]}),r.jsx("span",{className:"font-bold text-destructive",children:D(d.amount||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:D(d.balance_before||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsx("span",{className:"font-medium",children:D(d.balance_after||0)})]})]})]})},d.id)})})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}function w2(){var f,h;const[e,t]=C.useState(""),[s,n]=C.useState(null),[a,i]=C.useState(!1),l=C.useRef(null),{data:o}=se({queryKey:["statement-customers",e],queryFn:async()=>{if(!e)return[];const{data:v}=await L.from("customers").select("*").or(`code.ilike.%${e}%,name_ar.ilike.%${e}%,phone.ilike.%${e}%`).limit(10);return v||[]},enabled:e.length>0}),{data:c,isLoading:u}=se({queryKey:["customer-transactions",s==null?void 0:s.id],queryFn:async()=>{if(!s)return[];const v=[],{data:g}=await L.from("sales").select("*").eq("customer_id",s.id).order("created_at",{ascending:!0});g==null||g.forEach(p=>{v.push({date:p.created_at,type:"sale",reference:p.invoice_number,description:" ",debit:p.payment_method==="credit"?p.total_amount:0,credit:0}),p.paid_amount&&p.paid_amount>0&&v.push({date:p.created_at,type:"payment",reference:p.invoice_number,description:"  ",debit:0,credit:p.paid_amount})});const{data:w}=await L.from("returns").select("*").eq("customer_id",s.id).order("created_at",{ascending:!0});w==null||w.forEach(p=>{v.push({date:p.created_at,type:"return",reference:p.return_number,description:"",debit:0,credit:p.total_amount||0})}),v.sort((p,m)=>new Date(p.date).getTime()-new Date(m.date).getTime());let _=0;return v.forEach(p=>{_+=(p.debit||0)-(p.credit||0),p.balance=_}),v},enabled:!!s}),d=Vg.useReactToPrint({content:()=>l.current,documentTitle:`  - ${(s==null?void 0:s.name_ar)||(s==null?void 0:s.name)}`});return r.jsxs("div",{className:"p-3 md:p-6 space-y-4 md:space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"  "}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"     "})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsx(be,{children:r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-md cursor-pointer hover:bg-muted",onClick:()=>i(!a),children:[r.jsx(Pi,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"flex-1",children:s?s.name_ar||s.name:" ..."}),r.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"})]}),a&&r.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 p-2",children:[r.jsx("input",{type:"text",placeholder:"  ...",value:e,onChange:v=>t(v.target.value),className:"w-full px-3 py-2 border rounded-md mb-2",autoFocus:!0}),r.jsxs("div",{className:"max-h-60 overflow-auto",children:[o==null?void 0:o.map(v=>r.jsxs("button",{type:"button",className:"w-full p-2 text-right hover:bg-muted rounded",onClick:()=>{n(v),i(!1),t("")},children:[r.jsx("p",{className:"font-medium",children:v.name_ar||v.name}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[v.phone," - ",v.code]})]},v.id)),e&&(o==null?void 0:o.length)===0&&r.jsx("p",{className:"text-center py-4 text-muted-foreground text-sm",children:"  "})]})]})]})})]}),s&&r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[r.jsx(We,{className:"text-base sm:text-lg",children:" "}),r.jsxs(U,{onClick:d,disabled:!(c!=null&&c.length),className:"w-full sm:w-auto",children:[r.jsx(ys,{className:"h-4 w-4 ml-2"}),""]})]})}),r.jsx(be,{children:r.jsxs("div",{ref:l,className:"space-y-4",children:[r.jsxs("div",{className:"print-only mb-6",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"   "}),r.jsx("p",{className:"text-lg mt-2",children:"  "})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",s.name_ar||s.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",s.code]})]}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",s.phone]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",new Date().toLocaleDateString("ar-EG")]})]})]}),r.jsx("hr",{className:"my-4"})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 p-3 sm:p-4 bg-muted rounded-md no-print",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-bold text-sm sm:text-base",children:s.name_ar||s.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"font-bold text-sm sm:text-base",children:s.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"font-bold text-sm sm:text-base",children:s.code})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:`font-bold text-base sm:text-lg ${(s.current_balance||0)>0?"text-destructive":"text-green-600"}`,children:D(s.current_balance||0)})]})]}),u?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):c!=null&&c.length?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2 hidden sm:table-cell",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-1 sm:px-2",children:""})]})}),r.jsx("tbody",{children:c.map((v,g)=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-2 px-1 sm:px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(io,{className:"h-3 w-3 hidden sm:inline"}),r.jsx("span",{className:"text-xs",children:new Date(v.date).toLocaleDateString("ar-EG",{month:"numeric",day:"numeric"})})]})}),r.jsx("td",{className:"py-2 px-1 sm:px-2 font-mono text-xs",children:v.reference}),r.jsx("td",{className:"py-2 px-1 sm:px-2 hidden sm:table-cell",children:v.description}),r.jsx("td",{className:"py-2 px-1 sm:px-2 text-destructive text-xs sm:text-sm",children:v.debit>0?D(v.debit):"-"}),r.jsx("td",{className:"py-2 px-1 sm:px-2 text-green-600 text-xs sm:text-sm",children:v.credit>0?D(v.credit):"-"}),r.jsx("td",{className:"py-2 px-1 sm:px-2 font-bold text-xs sm:text-sm",children:r.jsx("span",{className:v.balance>0?"text-destructive":"text-green-600",children:D(v.balance)})})]},g))}),r.jsx("tfoot",{children:r.jsxs("tr",{className:"border-t-2 font-bold",children:[r.jsx("td",{colSpan:2,className:"py-3 px-1 sm:px-2 text-right text-xs sm:text-sm",children:""}),r.jsx("td",{className:"py-3 px-1 sm:px-2 text-destructive text-xs sm:text-sm hidden sm:table-cell",children:D(c.reduce((v,g)=>v+(g.debit||0),0))}),r.jsx("td",{className:"py-3 px-1 sm:px-2 text-destructive text-xs sm:text-sm sm:hidden",children:D(c.reduce((v,g)=>v+(g.debit||0),0))}),r.jsx("td",{className:"py-3 px-1 sm:px-2 text-green-600 text-xs sm:text-sm",children:D(c.reduce((v,g)=>v+(g.credit||0),0))}),r.jsx("td",{className:"py-3 px-1 sm:px-2 text-xs sm:text-sm",children:r.jsx("span",{className:((f=c[c.length-1])==null?void 0:f.balance)>0?"text-destructive":"text-green-600",children:D(((h=c[c.length-1])==null?void 0:h.balance)||0)})})]})})]})}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})]})})]}),r.jsx("style",{children:`
        @media print {
          .no-print { display: none !important; }
          .print-only { display: block !important; }
        }
        @media screen {
          .print-only { display: none !important; }
        }
      `})]})}function _2(){var j;const[e,t]=C.useState(""),[s,n]=C.useState(!1),[a,i]=C.useState([]),[l,o]=C.useState(""),c=ot(),{data:u}=se({queryKey:["stockcount-branches"],queryFn:async()=>{const{data:k}=await L.from("branches").select("*").eq("status","active").order("name_ar");return k||[]}}),{data:d,isLoading:f}=se({queryKey:["stockcount-inventory",e],queryFn:async()=>{if(!e)return[];const{data:k}=await L.from("inventory").select(`
          product_id,
          quantity,
          product:products(id, code, name, name_ar)
        `).eq("branch_id",e);return k||[]},enabled:!!e}),{data:h,isLoading:v}=se({queryKey:["stock-counts"],queryFn:async()=>{const{data:k}=await L.from("stock_counts").select("*, branch:branches(name_ar)").order("created_at",{ascending:!1});return k||[]}}),g=()=>{if(!e){alert("   ");return}if(!d||d.length===0){alert("     ");return}const k=d.map(N=>{var R,x,I;return{product_id:N.product_id,product_name:((R=N.product)==null?void 0:R.name_ar)||((x=N.product)==null?void 0:x.name),product_code:(I=N.product)==null?void 0:I.code,system_quantity:N.quantity||0,counted_quantity:0,variance:0,variance_type:"match"}});i(k),n(!0)},w=(k,N)=>{i(R=>R.map(x=>{if(x.product_id===k){const I=N-x.system_quantity,T=I>0?"surplus":I<0?"shortage":"match";return{...x,counted_quantity:N,variance:I,variance_type:T}}return x}))},_=vt({mutationFn:async()=>{var ie;const k=`SC-${Date.now()}`,{data:N}=await L.from("users").select("id").limit(1),R=(ie=N==null?void 0:N[0])==null?void 0:ie.id;a.reduce((re,he)=>re+Math.abs(he.variance),0);const x=a.filter(re=>re.variance_type==="surplus").length,I=a.filter(re=>re.variance_type==="shortage").length,{data:T,error:z}=await L.from("stock_counts").insert({count_number:k,branch_id:e,counted_by:R,count_date:new Date().toISOString(),status:"pending",notes:l||null,total_items:a.length,variance_items:x+I}).select().single();if(z)throw z;const W=a.map(re=>({stock_count_id:T.id,product_id:re.product_id,system_quantity:re.system_quantity,counted_quantity:re.counted_quantity,variance_quantity:re.variance,variance_type:re.variance_type})),{error:X}=await L.from("stock_count_items").insert(W);if(X)throw X;return T},onSuccess:()=>{c.invalidateQueries({queryKey:["stock-counts"]}),n(!1),i([]),o(""),alert("   !")},onError:k=>{alert(" : "+k.message)}}),p=vt({mutationFn:async k=>{const{data:N}=await L.from("stock_count_items").select("*").eq("stock_count_id",k);if(!N)throw new Error("Count items not found");const{data:R}=await L.from("stock_counts").select("branch_id").eq("id",k).single();if(!R)throw new Error("Count not found");for(const x of N)x.variance_quantity!==0&&await L.from("inventory").update({quantity:x.counted_quantity}).eq("product_id",x.product_id).eq("branch_id",R.branch_id);await L.from("stock_counts").update({status:"approved",approved_at:new Date().toISOString()}).eq("id",k)},onSuccess:()=>{c.invalidateQueries({queryKey:["stock-counts"]}),c.invalidateQueries({queryKey:["stockcount-inventory"]}),alert("    !")},onError:k=>{alert(" : "+k.message)}});a.reduce((k,N)=>k+Math.abs(N.variance),0);const m=a.filter(k=>k.variance_type==="surplus").length,y=a.filter(k=>k.variance_type==="shortage").length;return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-muted-foreground",children:"   "})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:"  "})}),r.jsx(be,{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsxs("select",{value:e,onChange:k=>t(k.target.value),className:"w-full px-3 py-2 border rounded-md bg-background mt-1",children:[r.jsx("option",{value:"",children:" "}),u==null?void 0:u.map(k=>r.jsx("option",{value:k.id,children:k.name_ar},k.id))]})]}),r.jsx("div",{className:"pt-6",children:r.jsxs(U,{onClick:g,disabled:!e||f,children:[r.jsx(jt,{className:"h-4 w-4 ml-2"})," "]})})]})})]}),r.jsx(Ge,{open:s,onOpenChange:n,children:r.jsxs(Je,{onClose:()=>n(!1),className:"max-w-4xl max-h-[80vh] overflow-auto",children:[r.jsx(Ze,{children:r.jsxs(et,{children:["  - ",(j=u==null?void 0:u.find(k=>k.id===e))==null?void 0:j.name_ar]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-3 bg-blue-50 rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" "}),r.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),r.jsxs("div",{className:"p-3 bg-green-50 rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:m})]}),r.jsxs("div",{className:"p-3 bg-red-50 rounded-md",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:""}),r.jsx("p",{className:"text-2xl font-bold text-destructive",children:y})]})]}),r.jsx("div",{className:"overflow-x-auto max-h-96",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"sticky top-0 bg-background",children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-2 px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-2",children:""}),r.jsx("th",{className:"text-right py-2 px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-2",children:" "}),r.jsx("th",{className:"text-right py-2 px-2",children:""})]})}),r.jsx("tbody",{children:a.map(k=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:k.product_code}),r.jsx("td",{className:"py-2 px-2",children:k.product_name}),r.jsx("td",{className:"py-2 px-2 text-center font-bold",children:k.system_quantity}),r.jsx("td",{className:"py-2 px-2",children:r.jsx(te,{type:"number",value:k.counted_quantity,onChange:N=>w(k.product_id,parseInt(N.target.value)||0),className:"w-24 text-center",min:0})}),r.jsxs("td",{className:"py-2 px-2 text-center",children:[k.variance!==0&&r.jsxs("span",{className:`font-bold ${k.variance_type==="surplus"?"text-green-600":"text-destructive"}`,children:[k.variance>0?"+":"",k.variance]}),k.variance===0&&r.jsx("span",{className:"text-muted-foreground",children:"-"})]})]},k.product_id))})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:""}),r.jsx(te,{value:l,onChange:k=>o(k.target.value),placeholder:" ...",className:"mt-1"})]})]}),r.jsxs(Ps,{children:[r.jsx(U,{variant:"outline",onClick:()=>n(!1),children:""}),r.jsx(U,{onClick:()=>_.mutate(),disabled:_.isPending||a.some(k=>k.counted_quantity===0),children:_.isPending?" ...":" "})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:"  "})}),r.jsx(be,{children:v?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):h!=null&&h.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:h.map(k=>{var N;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:k.count_number}),r.jsx("td",{className:"py-3 px-2",children:new Date(k.count_date||k.created_at).toLocaleDateString("ar-EG")}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Or,{className:"h-3 w-3"}),(N=k.branch)==null?void 0:N.name_ar]})}),r.jsx("td",{className:"py-3 px-2 text-center",children:k.total_items||0}),r.jsx("td",{className:"py-3 px-2 text-center",children:k.variance_items>0?r.jsx("span",{className:"text-destructive font-bold",children:k.variance_items}):r.jsx("span",{className:"text-green-600",children:"-"})}),r.jsx("td",{className:"py-3 px-2",children:k.status==="approved"?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700 flex items-center gap-1 w-fit",children:[r.jsx(Lm,{className:"h-3 w-3"}),""]}):k.status==="rejected"?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-700 flex items-center gap-1 w-fit",children:[r.jsx(zm,{className:"h-3 w-3"}),""]}):r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-700 flex items-center gap-1 w-fit",children:[r.jsx(Si,{className:"h-3 w-3"}),""]})}),r.jsx("td",{className:"py-3 px-2",children:k.status==="pending"&&r.jsx(U,{size:"sm",onClick:()=>p.mutate(k.id),disabled:p.isPending,children:""})})]},k.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:h.map(k=>{var N;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:k.count_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(k.count_date||k.created_at).toLocaleDateString("ar-EG")})]}),k.status==="approved"?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-green-100 text-green-700 flex items-center gap-1",children:[r.jsx(Lm,{className:"h-3 w-3"}),""]}):k.status==="rejected"?r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-red-100 text-red-700 flex items-center gap-1",children:[r.jsx(zm,{className:"h-3 w-3"}),""]}):r.jsxs("span",{className:"px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-700 flex items-center gap-1",children:[r.jsx(Si,{className:"h-3 w-3"}),""]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Or,{className:"h-3 w-3"}),":"]}),r.jsx("span",{className:"font-medium",children:(N=k.branch)==null?void 0:N.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[r.jsx(Oo,{className:"h-3 w-3"})," :"]}),r.jsx("span",{className:"font-medium",children:k.total_items||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),k.variance_items>0?r.jsx("span",{className:"text-destructive font-bold",children:k.variance_items}):r.jsx("span",{className:"text-green-600 font-medium",children:" "})]})]}),k.status==="pending"&&r.jsx(U,{size:"sm",className:"w-full",onClick:()=>p.mutate(k.id),disabled:p.isPending,children:""})]})},k.id)})})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"   "})})]})]})}function b2(){const[e,t]=C.useState(!1),[s,n]=C.useState(""),[a,i]=C.useState(""),[l,o]=C.useState("all"),[c,u]=C.useState("all"),[d,f]=C.useState("all"),[h,v]=C.useState({expense_date:new Date().toISOString().split("T")[0],branch_id:"",category_id:"",amount:"",payment_method:"cash",payment_status:"paid",reference_number:"",notes:""}),g=ot(),w=jn(),{data:_}=se({queryKey:["expense-branches"],queryFn:async()=>{const{data:x}=await L.from("branches").select("*").eq("status","active").order("name_ar");return x||[]}}),{data:p}=se({queryKey:["expense-categories-list"],queryFn:async()=>{const{data:x}=await L.from("expense_categories").select("*").eq("is_active",!0).order("name_ar");return x||[]}}),{data:m,isLoading:y}=se({queryKey:["expenses",s,a,l,c,d],queryFn:async()=>{let x=L.from("expenses").select("*, branch:branches(name_ar), category:expense_categories(name_ar), created_by_user:users!expenses_created_by_fkey(full_name_ar, full_name)").order("expense_date",{ascending:!1});s&&(x=x.gte("expense_date",s)),a&&(x=x.lte("expense_date",a)),l!=="all"&&(x=x.eq("branch_id",l)),c!=="all"&&(x=x.eq("category_id",c)),d!=="all"&&(x=x.eq("payment_status",d));const{data:I}=await x.limit(100);return I||[]}}),j=(m==null?void 0:m.reduce((x,I)=>x+(I.amount||0),0))||0,k=(m==null?void 0:m.filter(x=>x.payment_status==="paid").reduce((x,I)=>x+(I.amount||0),0))||0,N=(m==null?void 0:m.filter(x=>x.payment_status==="pending").reduce((x,I)=>x+(I.amount||0),0))||0,R=vt({mutationFn:async()=>{var W;const x=`EXP-${Date.now()}`,{data:I}=await L.from("users").select("id").limit(1),T=(W=I==null?void 0:I[0])==null?void 0:W.id,{error:z}=await L.from("expenses").insert({expense_number:x,expense_date:h.expense_date,branch_id:h.branch_id,category_id:h.category_id,amount:parseFloat(h.amount),payment_method:h.payment_method,payment_status:h.payment_status,reference_number:h.reference_number||null,notes:h.notes||null,created_by:T});if(z)throw z},onSuccess:()=>{g.invalidateQueries({queryKey:["expenses"]}),t(!1),v({expense_date:new Date().toISOString().split("T")[0],branch_id:"",category_id:"",amount:"",payment_method:"cash",payment_status:"paid",reference_number:"",notes:""}),alert("   !")},onError:x=>alert(": "+x.message)});return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:""}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"  "})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 w-full sm:w-auto",children:[r.jsxs(U,{variant:"outline",onClick:()=>w("/expense-categories"),className:"w-full sm:w-auto",children:[r.jsx(Yd,{className:"h-4 w-4 ml-2"})," "]}),r.jsxs(U,{onClick:()=>t(!0),className:"w-full sm:w-auto",children:[r.jsx(jt,{className:"h-4 w-4 ml-2"})," "]})]})]}),r.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-3",children:[r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(We,{className:"text-sm font-medium",children:" "}),r.jsx(Zn,{className:"h-5 w-5 text-muted-foreground"})]}),r.jsxs(be,{children:[r.jsx("div",{className:"text-2xl font-bold",children:D(j)}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(m==null?void 0:m.length)||0," "]})]})]}),r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(We,{className:"text-sm font-medium",children:""}),r.jsx(Zn,{className:"h-5 w-5 text-green-600"})]}),r.jsx(be,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:D(k)})})]}),r.jsxs(le,{children:[r.jsxs(_e,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(We,{className:"text-sm font-medium",children:""}),r.jsx(Zn,{className:"h-5 w-5 text-yellow-600"})]}),r.jsx(be,{children:r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:D(N)})})]})]}),r.jsx(Ge,{open:e,onOpenChange:t,children:r.jsxs(Je,{onClose:()=>t(!1),className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ze,{children:r.jsx(et,{className:"text-base sm:text-lg",children:"  "})}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" *"}),r.jsx(te,{type:"date",value:h.expense_date,onChange:x=>v({...h,expense_date:x.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" *"}),r.jsxs("select",{value:h.branch_id,onChange:x=>v({...h,branch_id:x.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"",children:" "}),_==null?void 0:_.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"  *"}),r.jsxs("select",{value:h.category_id,onChange:x=>v({...h,category_id:x.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"",children:" "}),p==null?void 0:p.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" *"}),r.jsx(te,{type:"number",value:h.amount,onChange:x=>v({...h,amount:x.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsxs("select",{value:h.payment_method,onChange:x=>v({...h,payment_method:x.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"cash",children:""}),r.jsx("option",{value:"bank_transfer",children:" "}),r.jsx("option",{value:"check",children:""}),r.jsx("option",{value:"credit_card",children:" "})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsxs("select",{value:h.payment_status,onChange:x=>v({...h,payment_status:x.target.value}),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"paid",children:""}),r.jsx("option",{value:"pending",children:""})]})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:" "}),r.jsx(te,{value:h.reference_number,onChange:x=>v({...h,reference_number:x.target.value}),placeholder:"   "})]}),r.jsxs("div",{className:"sm:col-span-2",children:[r.jsx("label",{className:"text-sm font-medium",children:""}),r.jsx(te,{value:h.notes,onChange:x=>v({...h,notes:x.target.value}),placeholder:" "})]})]}),r.jsxs(Ps,{className:"flex-col sm:flex-row gap-2",children:[r.jsx(U,{variant:"outline",onClick:()=>t(!1),className:"w-full sm:w-auto",children:""}),r.jsx(U,{onClick:()=>R.mutate(),disabled:!h.branch_id||!h.category_id||!h.amount||R.isPending,className:"w-full sm:w-auto",children:R.isPending?" ...":""})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(io,{className:"h-4 w-4"}),r.jsx("span",{className:"text-sm",children:":"})]}),r.jsx(te,{type:"date",value:s,onChange:x=>n(x.target.value),className:"flex-1 sm:w-40",placeholder:""}),r.jsx("span",{className:"text-center sm:text-right text-sm",children:""}),r.jsx(te,{type:"date",value:a,onChange:x=>i(x.target.value),className:"flex-1 sm:w-40",placeholder:""})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:[r.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:" "}),_==null?void 0:_.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]}),r.jsxs("select",{value:c,onChange:x=>u(x.target.value),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:" "}),p==null?void 0:p.map(x=>r.jsx("option",{value:x.id,children:x.name_ar},x.id))]}),r.jsxs("select",{value:d,onChange:x=>f(x.target.value),className:"w-full px-3 py-2 border rounded-md bg-background text-sm",children:[r.jsx("option",{value:"all",children:" "}),r.jsx("option",{value:"paid",children:""}),r.jsx("option",{value:"pending",children:""})]})]})]})}),r.jsx(be,{children:y?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):m!=null&&m.length?r.jsxs("div",{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b",children:[r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:" "}),r.jsx("th",{className:"text-right py-3 px-2",children:""}),r.jsx("th",{className:"text-right py-3 px-2",children:""})]})}),r.jsx("tbody",{children:m.map(x=>{var I,T;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"py-3 px-2 font-mono text-sm",children:x.expense_number}),r.jsx("td",{className:"py-3 px-2",children:new Date(x.expense_date).toLocaleDateString("ar-EG")}),r.jsx("td",{className:"py-3 px-2",children:(I=x.branch)==null?void 0:I.name_ar}),r.jsx("td",{className:"py-3 px-2",children:(T=x.category)==null?void 0:T.name_ar}),r.jsx("td",{className:"py-3 px-2 font-bold",children:D(x.amount||0)}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("span",{className:"text-sm",children:[x.payment_method==="cash"&&"",x.payment_method==="bank_transfer"&&" ",x.payment_method==="check"&&"",x.payment_method==="credit_card"&&""]})}),r.jsx("td",{className:"py-3 px-2",children:r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${x.payment_status==="paid"?"bg-green-100 text-green-700":x.payment_status==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[x.payment_status==="paid"&&"",x.payment_status==="pending"&&"",x.payment_status==="cancelled"&&""]})}),r.jsx("td",{className:"py-3 px-2 text-sm text-muted-foreground",children:x.notes||"-"})]},x.id)})})]})}),r.jsx("div",{className:"block md:hidden space-y-3",children:m.map(x=>{var I,T;return r.jsx(le,{className:"p-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-mono text-sm font-bold",children:x.expense_number}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(x.expense_date).toLocaleDateString("ar-EG")})]}),r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs ${x.payment_status==="paid"?"bg-green-100 text-green-700":x.payment_status==="pending"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[x.payment_status==="paid"&&"",x.payment_status==="pending"&&"",x.payment_status==="cancelled"&&""]})]}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(I=x.branch)==null?void 0:I.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-medium",children:(T=x.category)==null?void 0:T.name_ar})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:":"}),r.jsx("span",{className:"font-bold text-primary",children:D(x.amount||0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:" :"}),r.jsxs("span",{className:"font-medium",children:[x.payment_method==="cash"&&"",x.payment_method==="bank_transfer"&&" ",x.payment_method==="check"&&"",x.payment_method==="credit_card"&&""]})]}),x.notes&&r.jsx("div",{className:"pt-2 border-t",children:r.jsx("p",{className:"text-xs text-muted-foreground",children:x.notes})})]})]})},x.id)})})]}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}function N2(){const[e,t]=C.useState(!1),[s,n]=C.useState(null),[a,i]=C.useState({name_ar:"",name_en:"",description:""}),l=ot(),{data:o,isLoading:c}=se({queryKey:["expense-categories"],queryFn:async()=>{const{data:g}=await L.from("expense_categories").select("*").order("name_ar");return g||[]}}),u=vt({mutationFn:async()=>{if(s){const{error:g}=await L.from("expense_categories").update({name_ar:a.name_ar,name_en:a.name_en||null,description:a.description||null,updated_at:new Date().toISOString()}).eq("id",s.id);if(g)throw g}else{const g=`EXP_${Date.now()}`,{error:w}=await L.from("expense_categories").insert({code:g,name_ar:a.name_ar,name_en:a.name_en||null,description:a.description||null,is_system:!1});if(w)throw w}},onSuccess:()=>{l.invalidateQueries({queryKey:["expense-categories"]}),t(!1),n(null),i({name_ar:"",name_en:"",description:""}),alert(s?"   !":"   !")},onError:g=>alert(": "+g.message)}),d=vt({mutationFn:async g=>{const{error:w}=await L.from("expense_categories").delete().eq("id",g);if(w)throw w},onSuccess:()=>{l.invalidateQueries({queryKey:["expense-categories"]}),alert("   !")},onError:g=>alert(": "+g.message)}),f=g=>{n(g),i({name_ar:g.name_ar,name_en:g.name_en||"",description:g.description||""}),t(!0)},h=g=>{if(g.is_system){alert("    ");return}confirm(`     "${g.name_ar}"`)&&d.mutate(g.id)},v=()=>{t(!1),n(null),i({name_ar:"",name_en:"",description:""})};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:" "}),r.jsx("p",{className:"text-muted-foreground",children:"  "})]}),r.jsxs(U,{onClick:()=>t(!0),children:[r.jsx(jt,{className:"h-4 w-4 ml-2"}),"  "]})]}),r.jsx(Ge,{open:e,onOpenChange:v,children:r.jsxs(Je,{onClose:v,className:"max-w-lg",children:[r.jsx(Ze,{children:r.jsx(et,{children:s?"  ":"   "})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name_ar",className:"text-sm font-medium",children:"  *"}),r.jsx(te,{id:"name_ar",value:a.name_ar,onChange:g=>i({...a,name_ar:g.target.value}),placeholder:": "})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name_en",className:"text-sm font-medium",children:" "}),r.jsx(te,{id:"name_en",value:a.name_en,onChange:g=>i({...a,name_en:g.target.value}),placeholder:"Example: Electricity"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"text-sm font-medium",children:""}),r.jsx(te,{id:"description",value:a.description,onChange:g=>i({...a,description:g.target.value}),placeholder:" "})]})]}),r.jsxs(Ps,{children:[r.jsx(U,{variant:"outline",onClick:v,children:""}),r.jsx(U,{onClick:()=>u.mutate(),disabled:!a.name_ar||u.isPending,children:u.isPending?" ...":""})]})]})}),r.jsxs(le,{children:[r.jsx(_e,{children:r.jsx(We,{children:" "})}),r.jsx(be,{children:c?r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:" ..."}):o!=null&&o.length?r.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-3",children:o.map(g=>r.jsx("div",{className:"p-4 border rounded-lg hover:border-primary transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ng,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:g.name_ar}),g.name_en&&r.jsx("p",{className:"text-sm text-muted-foreground",children:g.name_en}),g.description&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:g.description}),g.is_system&&r.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",children:""})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>f(g),children:r.jsx(Ei,{className:"h-4 w-4"})}),!g.is_system&&r.jsx(U,{variant:"ghost",size:"icon",onClick:()=>h(g),children:r.jsx(Ar,{className:"h-4 w-4 text-destructive"})})]})]})},g.id))}):r.jsx("p",{className:"text-center py-8 text-muted-foreground",children:"  "})})]})]})}function k2(){return r.jsxs(vj,{children:[r.jsx(Ue,{path:"/login",element:r.jsx(D1,{})}),r.jsxs(Ue,{path:"/",element:r.jsx(W_,{}),children:[r.jsx(Ue,{index:!0,element:r.jsx(Yx,{to:"/dashboard",replace:!0})}),r.jsx(Ue,{path:"dashboard",element:r.jsx(F1,{})}),r.jsx(Ue,{path:"pos",element:r.jsx(d2,{})}),r.jsx(Ue,{path:"products",element:r.jsx(B1,{})}),r.jsx(Ue,{path:"customers",element:r.jsx(K1,{})}),r.jsx(Ue,{path:"sales",element:r.jsx(W1,{})}),r.jsx(Ue,{path:"inventory",element:r.jsx(V1,{})}),r.jsx(Ue,{path:"purchases",element:r.jsx(H1,{})}),r.jsx(Ue,{path:"suppliers",element:r.jsx(Y1,{})}),r.jsx(Ue,{path:"returns",element:r.jsx(X1,{})}),r.jsx(Ue,{path:"transfers",element:r.jsx(s2,{})}),r.jsx(Ue,{path:"damaged",element:r.jsx(r2,{})}),r.jsx(Ue,{path:"reports",element:r.jsx(m2,{})}),r.jsx(Ue,{path:"partner-withdrawals",element:r.jsx(j2,{})}),r.jsx(Ue,{path:"customer-statement",element:r.jsx(w2,{})}),r.jsx(Ue,{path:"stock-count",element:r.jsx(_2,{})}),r.jsx(Ue,{path:"expenses",element:r.jsx(b2,{})}),r.jsx(Ue,{path:"expense-categories",element:r.jsx(N2,{})}),r.jsx(Ue,{path:"settings",element:r.jsx(n2,{})})]})]})}const S2=new Zj({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});bc.createRoot(document.getElementById("root")).render(r.jsx(ns.StrictMode,{children:r.jsx(ew,{client:S2,children:r.jsx(Sj,{children:r.jsx(k2,{})})})}));
